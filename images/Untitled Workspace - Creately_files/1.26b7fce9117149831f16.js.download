(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"/amk":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("qonV"),r=n("EM62"),a=["container"],o=function(){function e(e){this.pluginReg=e}return Object.defineProperty(e.prototype,"id",{get:function(){return this.manifest._url},enumerable:!1,configurable:!0}),e.prototype.ngAfterViewInit=function(){var e=this.pluginReg.burrowMainIframe(this.manifest._url);this.container.nativeElement.appendChild(e)},e.prototype.ngOnDestroy=function(){var e=this.container.nativeElement.firstChild;this.pluginReg.returnMainIframe(this.manifest._url,e)},e.\u0275fac=function(t){return new(t||e)(r.fc(i.a))},e.\u0275cmp=r.Zb({type:e,selectors:[["plugin-panel"]],viewQuery:function(e,t){var n;(1&e&&r.Wc(a,!0),2&e)&&(r.Lc(n=r.uc())&&(t.container=n.first))},inputs:{manifest:"manifest"},decls:2,vars:0,consts:[[1,"plugin-iframe-container"],["container",""]],template:function(e,t){1&e&&r.gc(0,"div",0,1)},styles:[".plugin-iframe-container[_ngcontent-%COMP%], .plugin-iframe-container[_ngcontent-%COMP%]     iframe{width:100%;height:100%}"],changeDetection:0}),e}()},"53e4":function(e,t,n){"use strict";n.d(t,"a",(function(){return se}));var i=n("D57K"),r=n("C5+t"),a=n("5xGT"),o=n("NNJu"),s=n("hX56"),c=n("nsO7"),l=n("C05f"),d=n("P4Xx"),u=n("qZtG"),p=n("6Oco"),h=n("3p4X"),g=n("GoAz"),f=n("wTjk"),m=n("ROBh"),b=n("HM3f"),v=n("wqq/"),y=n("YtkY"),O=n("8j5Y"),_=n("TLy2"),C=n("J+dc"),P=n("xVbo"),x=n("Ohay"),S=n("xtkq"),k=n("cJ9h"),D=n("0B/R"),w=n("xATe"),T=n("qMyy"),I=n("1JG0"),j=n("16Fa"),E=n("QoSw"),M=n("oyCe"),R=n("Bbfy"),A=n("EM62"),L=n("s2Ay"),N=n("sEIs"),U=n("crdX"),F=n("2kYt"),B=n("rPyh"),H=n("ZTXN"),z=n("4Kso"),G=n("uIWG");function V(e,t){1&e&&A.gc(0,"div",15)}function Y(e,t){if(1&e){var n=A.mc();A.lc(0,"editable-label",16),A.tc("changedText",(function(e){return A.Pc(n),A.xc().nameChanged(e)})),A.kc()}if(2&e){var i=A.xc();A.Cc("value",i.getDisplayText())("focus",!0)("selectAll",!0)("readonly",!1)}}function W(e,t){if(1&e&&(A.lc(0,"label",17),A.ed(1),A.kc()),2&e){var n=A.xc();A.Sb(1),A.fd(n.getDisplayText())}}function K(e,t){1&e&&(A.lc(0,"label",18),A.ed(1,"HISTORY_PANEL.LABELS.CURRENT"),A.kc())}function q(e,t){if(1&e&&(A.lc(0,"li",22),A.ed(1),A.kc()),2&e){var n=t.$implicit;A.Sb(1),A.fd(n.fullName)}}var X=function(e){return{moreCount:e}};function Z(e,t){if(1&e&&A.gc(0,"li",23),2&e){var n=A.xc(2);A.Cc("translate","HISTORY_PANEL.LABELS.MORE_USERS")("translateParams",A.Hc(2,X,n.hiddenUserCount()))}}function J(e,t){if(1&e&&(A.lc(0,"ul",19),A.cd(1,q,2,1,"li",20),A.cd(2,Z,1,4,"li",21),A.kc()),2&e){var n=A.xc();A.Sb(1),A.Cc("ngForOf",n.users),A.Sb(1),A.Cc("ngIf",n.hiddenUserCount()>1)}}function Q(e,t){if(1&e){var n=A.mc();A.lc(0,"a",13),A.tc("click",(function(){return A.Pc(n),A.xc().createCopy.next(!0)})),A.ed(1,"HISTORY_PANEL.LABELS.CREATE_COPY"),A.kc()}}function $(e,t){if(1&e){var n=A.mc();A.lc(0,"a",13),A.tc("click",(function(){return A.Pc(n),A.xc().restore.next(!0)})),A.ed(1,"HISTORY_PANEL.LABELS.RESTORE"),A.kc()}}var ee=function(e){return{active:e}},te=function(){return["ApplicationIsEmbedded",!1]},ne=function(){function e(){this.active=!1,this.currentVersion=!1,this.createCopy=new H.a,this.restore=new H.a,this.preview=new H.a,this.renamed=new H.a,this.renaming=new l.a(!1)}return Object.defineProperty(e.prototype,"users",{get:function(){return this.historyItem.users?this.historyItem.users.length>4?this.historyItem.users.slice(0,3):this.historyItem.users:[]},enumerable:!1,configurable:!0}),e.prototype.hiddenUserCount=function(){return this.historyItem.users?this.historyItem.users.length-3:0},e.prototype.getDisplayText=function(){return this.historyItem.name||new Date(this.historyItem.ts).toLocaleTimeString()},e.prototype.nameChanged=function(e){var t=this;""!==e&&e!==this.getDisplayText()?this.renamed.next({name:e,complete:function(){return t.renaming.next(!1)}}):this.renaming.next(!1)},e.prototype.startRenaming=function(){var e=this.renaming.getValue();this.renaming.next(!e),e||a.Kb.track("right.history.timestampActions.rename.click",{value1Type:"snapshotId",value1:this.historyItem.lastChangeId})},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=A.Zb({type:e,selectors:[["history-item"]],inputs:{historyItem:"historyItem",active:"active",currentVersion:"currentVersion",restoreEnabled:"restoreEnabled"},outputs:{createCopy:"createCopy",restore:"restore",preview:"preview",renamed:"renamed"},decls:19,vars:13,consts:[[1,"history-item",3,"ngClass"],[1,"item-container"],["class","active-indicator",4,"ngIf"],[1,"history-item-content",3,"click"],[3,"value","focus","selectAll","readonly","changedText",4,"ngIf","ngIfElse"],["historyItemLabel",""],["class","nu2-caption-5","translate","",4,"ngIf"],["class","user-list",4,"ngIf"],[1,"actions-menu"],[1,"nu-icon","nu-icon-med"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-more"],[1,"menu-content"],["class","dark-blue","translate","",3,"click",4,"ifState"],["translate","",1,"dark-blue",3,"click"],["class","dark-blue","translate","",3,"click",4,"ngIf"],[1,"active-indicator"],[3,"value","focus","selectAll","readonly","changedText"],[1,"nu2-caption-3"],["translate","",1,"nu2-caption-5"],[1,"user-list"],["class","nu2-caption-6",4,"ngFor","ngForOf"],["class","nu2-caption-6",3,"translate","translateParams",4,"ngIf"],[1,"nu2-caption-6"],[1,"nu2-caption-6",3,"translate","translateParams"]],template:function(e,t){if(1&e&&(A.lc(0,"div",0),A.lc(1,"div",1),A.cd(2,V,1,0,"div",2),A.lc(3,"div",3),A.tc("click",(function(){return t.preview.next(!0)})),A.cd(4,Y,1,4,"editable-label",4),A.yc(5,"async"),A.cd(6,W,2,1,"ng-template",null,5,A.dd),A.cd(8,K,2,0,"label",6),A.cd(9,J,3,2,"ul",7),A.kc(),A.kc(),A.lc(10,"div",8),A.lc(11,"a"),A.wc(),A.lc(12,"svg",9),A.gc(13,"use",10),A.kc(),A.kc(),A.vc(),A.lc(14,"div",11),A.cd(15,Q,2,0,"a",12),A.lc(16,"a",13),A.tc("click",(function(){return t.startRenaming()})),A.ed(17,"HISTORY_PANEL.LABELS.RENAME"),A.kc(),A.cd(18,$,2,0,"a",14),A.kc(),A.kc(),A.kc()),2&e){var n=A.Mc(7);A.Cc("ngClass",A.Hc(10,ee,t.active)),A.Sb(2),A.Cc("ngIf",t.active),A.Sb(2),A.Cc("ngIf",A.zc(5,8,t.renaming))("ngIfElse",n),A.Sb(4),A.Cc("ngIf",t.currentVersion),A.Sb(1),A.Cc("ngIf",t.users.length>0),A.Sb(6),A.Cc("ifState",A.Gc(12,te)),A.Sb(3),A.Cc("ngIf",t.restoreEnabled)}},directives:[F.q,F.t,z.a,L.a,G.a,F.s],pipes:[F.b],styles:[".history-item[_ngcontent-%COMP%]{padding:5px 0;position:relative;min-height:60px}.history-item[_ngcontent-%COMP%]:hover{background:linear-gradient(0deg,rgba(81,192,170,.05),rgba(81,192,170,.05)),hsla(0,0%,100%,.65)}.history-item[_ngcontent-%COMP%]:hover   .history-item-content[_ngcontent-%COMP%]   .nu2-caption-3[_ngcontent-%COMP%]{color:#29947f}.history-item[_ngcontent-%COMP%]   .item-container[_ngcontent-%COMP%]{display:flex;flex-direction:row}.history-item[_ngcontent-%COMP%]   .item-container[_ngcontent-%COMP%]   .active-indicator[_ngcontent-%COMP%]{padding:1px;margin-right:8px;background:#51c0aa}.history-item[_ngcontent-%COMP%]   .history-item-content[_ngcontent-%COMP%]{height:100%;padding-left:10px;display:flex;flex-direction:column;width:100%}.history-item[_ngcontent-%COMP%]   .history-item-content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none}.history-item[_ngcontent-%COMP%]   .history-item-content[_ngcontent-%COMP%]   .nu2-caption-3[_ngcontent-%COMP%]{color:rgba(38,55,59,.7)}.history-item[_ngcontent-%COMP%]   .history-item-content[_ngcontent-%COMP%]   .nu2-caption-5[_ngcontent-%COMP%]{color:rgba(20,40,46,.8)}.history-item[_ngcontent-%COMP%]   .history-item-content[_ngcontent-%COMP%]   .nu2-caption-6[_ngcontent-%COMP%]{color:rgba(61,66,66,.6)}.history-item.active[_ngcontent-%COMP%]   .history-item-content[_ngcontent-%COMP%]{padding-left:0}.actions-menu[_ngcontent-%COMP%]{position:absolute;top:3px;right:0}.actions-menu[_ngcontent-%COMP%]   .menu-content[_ngcontent-%COMP%]{display:none;position:absolute;z-index:10;top:25px;right:0;width:128px;border:1px solid #d3d3e7;padding:15px;border-radius:4px;background:#fff}.actions-menu[_ngcontent-%COMP%]:hover   .menu-content[_ngcontent-%COMP%]{display:block}.actions-menu[_ngcontent-%COMP%]:hover   .menu-content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin-bottom:10px;display:block}.actions-menu[_ngcontent-%COMP%]:hover   .menu-content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:last-of-type{margin-bottom:0}"],changeDetection:0}),e}(),ie=n("sIsI");function re(e,t){if(1&e){var n=A.mc();A.lc(0,"history-item",6),A.tc("preview",(function(){return A.Pc(n),A.xc().previewCurrent()}))("renamed",(function(e){A.Pc(n);var i=t.ngIf;return A.xc().createNamedHistoryItem(i.lastChangeId,e.name,e.complete)}))("createCopy",(function(){return A.Pc(n),A.xc().createCopy("CURRENT")})),A.kc()}if(2&e){var i=t.ngIf,r=A.xc();A.Cc("historyItem",i)("active","__CURRENT__"===r.currentSnapshotId)("currentVersion",!0)("restoreEnabled",!1)}}function ae(e,t){if(1&e){var n=A.mc();A.lc(0,"history-item",9),A.tc("preview",(function(){A.Pc(n);var e=t.$implicit;return A.xc(2).previewSnapshot(e.lastChangeId)}))("renamed",(function(e){A.Pc(n);var i=t.$implicit;return A.xc(2).createNamedHistoryItem(i.lastChangeId,e.name,e.complete)}))("restore",(function(){A.Pc(n);var e=t.$implicit;return A.xc(2).showRestoreConfimationDialog(e.lastChangeId)}))("createCopy",(function(){A.Pc(n);var e=t.$implicit;return A.xc(2).createCopy(e.lastChangeId)})),A.kc()}if(2&e){var i=t.$implicit,r=A.xc(2);A.Cc("historyItem",i)("active",r.currentSnapshotId===i.lastChangeId)("restoreEnabled",!0)}}function oe(e,t){if(1&e){var n=A.mc();A.lc(0,"app-collapsible-menu-item",7),A.tc("activeChange",(function(e){A.Pc(n);var i=t.$implicit;return A.xc().toggleMenuItem(i.title,e)})),A.cd(1,ae,1,3,"history-item",8),A.kc()}if(2&e){var i=t.$implicit;A.Cc("title",i.title)("active",i.active),A.Sb(1),A.Cc("ngForOf",i.items)}}var se=function(){function e(e,t,n,i,r,a,o,s,c,d){this.commands=e,this.state=t,this.translateService=n,this.router=i,this.ll=r,this.diffSvc=a,this.historySvc=o,this.dialogBoxController=s,this.notifierController=c,this.dataStore=d,this.id="historyPanel",this.icon="history",this.tooltip=this.translateService.instant("TOOLTIPS.DIAGRAM_HISTORY"),this.currentSnapshotId="__CURRENT__",this.subs=[],this.currentProject="home",this.activeMenus={$first:!0},this.features=new l.a([]),this.notificationMessages=new R.a(this.translateService),this.initRestoreObservable(),this.subs.push(this.getCreateSnapshotHandler().subscribe())}return e.prototype.ngOnInit=function(){var e=this.getDiagramAndHistoryItems().pipe(Object(v.a)(1));this.initHistoryItems(e),this.initCurrentVersion(e),this.subs.push(this.getExitHandler().subscribe()),this.subs.push(this.listenToConnectionChanges().subscribe()),this.subs.push(this.listenToInterfaceControlChanges().subscribe())},e.prototype.showRestoreConfimationDialog=function(e){var t=this;a.Kb.track("right.history.timestampActions.restore.click",{value1Type:"newVersion",value1:e,value2Type:"oldVersion",value2:this.currentVersion});var n={id:"right-sb-restore-diagram-confirmation",heading:"DIALOG_BOX.RESTORE_DIAGRAM.HEADING",description:"DIALOG_BOX.RESTORE_DIAGRAM.DESCRIPTION",type:"warning",icon:"warning",buttons:[{type:"ok",text:"BUTTONS.RESTORE",clickHandler:function(){return t.restore(e,t.currentVersion)}},{type:"cancel",text:"BUTTONS.CANCEL",clickHandler:function(){a.Kb.track("dialog.infoHistory.restore.click",{value1Type:"button",value1:"cancel",value2Type:"snapshotId",value2:e})}}]};this.dialogBoxController.showDialog(n)},e.prototype.createCopy=function(e){a.Kb.track("center.history.copy.click",{value1Type:"diagramId",value1:this.diagramId,value2Type:"snapshotId",value2:e});var t={inputs:{heading:this.translateService.instant("NOTIFICATIONS.DIAGRAM_DUPLICATE.SUCCESS.HEADING"),description:this.translateService.instant("NOTIFICATIONS.DIAGRAM_DUPLICATE.SUCCESS.BODY"),autoDismiss:!0,dismissAfter:3e3}};return this.notifierController.show("DIAGRAM_DUPLICATE_SUCCESS",a.i,a.jb.Success,t),this.router.navigate(["start/new/project/"+this.currentProject],{queryParams:{diagramId:this.diagramId,snapshotId:e}})},e.prototype.createNamedHistoryItem=function(e,t,n){this.commands.dispatch(T.a.createDiagramSnapshot,{diagramId:this.diagramId,lastChangeId:e,name:t}).subscribe({complete:function(){n(),a.Kb.track("notification.infoHistory.rename.success",{value1Type:"snapshotId",value1:e})},error:function(){n(),a.Kb.track("notification.infoHistory.rename.fail",{value1Type:"snapshotId",value1:e})}})},e.prototype.restore=function(e,t){var n=this,r=function(e){return Object(c.omit)(e,w.a.ignoreFields)};Object(d.a)([this.historySvc.fetchRawSnapshot(this.diagramId,e).pipe(Object(y.a)(r)),this.ll.forDiagram(this.diagramId,!1).getRawDiagramDataOnce().pipe(Object(y.a)(r))]).pipe(Object(O.a)((function(r){var a=Object(i.h)(r,2),o=a[0],s=a[1];Object(c.isEqual)(o,s)?n.showRestoreFailedWarning():n.restoreDiagram(e,t)}))).subscribe()},e.prototype.closePanel=function(){this.state.set("OpenRightSidebar",o.r.None)},e.prototype.previewCurrent=function(){"__CURRENT__"!==this.currentSnapshotId&&(a.Kb.track("center.history.preview.current.click",{value1Type:"diagramId",value1:this.diagramId}),this.resetPreview(),this.currentSnapshotId="__CURRENT__",this.state.set("CurrentSnapshot","__CURRENT__"))},e.prototype.previewSnapshot=function(e){var t=this;return this.currentSnapshotId===e?Promise.resolve(null):(a.Kb.track("right.history.timestamp.click",{value1Type:"snapshotId",value1:e}),this.switchToViewMode().then((function(n){if(n){var i=Object(d.a)({current:t.ll.forDiagram(t.diagramId,!1).getDiagramOnce(),snapshot:t.historySvc.fetchSnapshot(t.diagramId,e)}).pipe(Object(y.a)((function(e){var n=e.current,i=e.snapshot;return t.diffSvc.getSakotaDiff(n,i)})),Object(O.a)((function(e){return t.state.set("PreviewChanges",e)})));"__CURRENT__"!==t.currentSnapshotId&&(i=Object(u.a)(t.resetPreview(),i)),i.subscribe({complete:function(){a.Kb.track("notification.history.previewLoad.success",{value1Type:"snapshotId",value1:e})},error:function(){a.Kb.track("notification.history.previewLoad.fail",{value1Type:"snapshotId",value1:e})}}),t.currentSnapshotId=e,t.state.set("CurrentSnapshot",e),t.state.set("HistoryPreviewMode",!0)}})))},e.prototype.toggleMenuItem=function(e,t){this.activeMenus[e]=t},e.prototype.onActive=function(){a.Kb.track("right.history.click",{value1Type:"status",value1:"open"})},e.prototype.onInactive=function(){a.Kb.track("right.history.click",{value1Type:"status",value1:"close"})},e.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},e.prototype.restoreDiagram=function(e,t){var n=this;a.Kb.track("dialog.infoHistory.restore.click",{value1Type:"button",value1:"restore",value2Type:"snapshotId",value2:e}),"__CURRENT__"!==this.currentSnapshotId&&this.resetPreview(),this.commands.dispatch(T.a.restoreSnapshot,this.diagramId,{diagramId:this.diagramId,lastChangeId:e}).subscribe({complete:function(){a.Kb.track("notification.infoHistory.restore.success",{value1Type:"newVersion",value1:e,value2Type:"oldVersion",value2:t||n.currentVersion}),n.currentSnapshotId="__CURRENT__",n.state.set("CurrentSnapshot","__CURRENT__")},error:function(){a.Kb.track("notification.infoHistory.restore.fail",{value1Type:"newVersion",value1:e,value2Type:"oldVersion",value2:t||n.currentVersion})}})},e.prototype.getCreateSnapshotHandler=function(){var e=this;return this.getCreateSnapshotInterval().pipe(Object(y.a)((function(){return e.state.get("CurrentDiagram")})),Object(_.a)((function(t){return e.historySvc.getLatestHistoryItem(t).pipe(Object(_.a)((function(n){return n?Date.now()-n.ts>3e5?e.dataStore.findOneRaw(M.a,{id:t}).pipe(Object(C.a)(1),Object(O.a)((function(i){i.lastChangeId!==n.lastChangeId&&e.createHistoryItem(t)}))):p.a:e.ll.forDiagram(t,!1).getDiagramOnce().pipe(Object(O.a)((function(n){Object.keys(n.shapes).length>0&&e.createHistoryItem(t)})))})))})))},e.prototype.getExitHandler=function(){var e=this;return this.state.changes("HistoryPreviewMode").pipe(Object(P.a)((function(e){return!e})),Object(O.a)((function(){return e.previewCurrent()})))},e.prototype.getCreateSnapshotInterval=function(){return this.restoreEnabled.pipe(Object(_.a)((function(e){return e?Object(h.a)(6e4):p.a})))},e.prototype.createHistoryItem=function(e){return this.commands.dispatch(T.a.createDiagramSnapshot,{diagramId:e})},e.prototype.resetPreview=function(){return this.commands.dispatch(T.a.resetSnapshotPreview)},e.prototype.switchToViewMode=function(){return"view"===this.state.get("InterfaceControlState")?Promise.resolve(!0):this.router.navigate(["../",this.state.get("CurrentDiagram"),"view"])},e.prototype.showRestoreFailedWarning=function(){var e=this.notificationMessages.getNotificationMessage(R.b.RESTORE_FAILED);this.notifierController.show(R.b.RESTORE_FAILED,e.component,e.type,e.options,e.collapsed)},e.prototype.listenToConnectionChanges=function(){var e=this;return this.state.changes(r.c).pipe(Object(O.a)((function(t){t!==r.c.ONLINE&&"historyPanel"===e.state.get("RightSidebarPanel")&&e.closePanel()})))},e.prototype.listenToInterfaceControlChanges=function(){var e=this;return this.state.changes("InterfaceControlState").pipe(Object(P.a)((function(t){return"view"===t&&"historyPanel"===e.state.get("OpenRightSidebar")})),Object(O.a)((function(){return e.closePanel()})))},e.prototype.initHistoryItems=function(e){var t=this;this.historyItems=e.pipe(Object(y.a)((function(e){var t=Object(i.h)(e,2),n=t[0],r=t[1];return n.filter((function(e){return e.lastChangeId!==r.lastChangeId})).reverse()})),Object(x.a)(c.isEqual),Object(_.a)((function(e){return e.length>0?Object(g.a)(e).pipe(Object(S.b)((function(e){return new Date(e.ts).toDateString()})),Object(k.a)((function(e){return Object(f.b)(Object(m.a)(e.key),e.pipe(Object(D.a)()))})),Object(y.a)((function(e){var n=Object(i.h)(e,2),r=n[0];return{title:r,items:n[1],active:!!t.activeMenus[r]}})),Object(D.a)(),Object(O.a)((function(e){t.activeMenus.$first&&(t.activeMenus.$first=!1,t.activeMenus[e[0].title]=!0,e[0].active=!0)}))):Object(m.a)([])})))},e.prototype.initCurrentVersion=function(e){this.currentDocVersion=e.pipe(Object(y.a)((function(e){var t=Object(i.h)(e,2),n=t[0],r=t[1],a=n.find((function(e){return e.lastChangeId===r.lastChangeId}));return a||(a={lastChangeId:r.lastChangeId,ts:r.lastUpdated,userIds:[]}),a})))},e.prototype.getDiagramAndHistoryItems=function(){var e=this;return this.state.changes("CurrentDiagram").pipe(Object(O.a)((function(t){e.diagramId=t,e.activeMenus={$first:!0}})),Object(_.a)((function(t){return Object(b.b)([e.historySvc.getHistoryItemsWithUsers(t),e.dataStore.findOneRaw(M.a,{id:t}).pipe(Object(P.a)((function(e){return!!e})),Object(O.a)((function(t){e.currentVersion=t.lastChangeId,e.currentProject=t.project})))])})))},e.prototype.initRestoreObservable=function(){this.restoreEnabled=this.features.pipe(Object(y.a)((function(e){var t=e.find((function(e){return"RESTORE"===e.featureId}));return!!t&&t.data.enabled})))},e.\u0275fac=function(t){return new(t||e)(A.fc(a.B),A.fc(a.Ib),A.fc(L.e),A.fc(N.d),A.fc(E.a),A.fc(I.a),A.fc(j.a),A.fc(a.M),A.fc(a.kb),A.fc(s.b))},e.\u0275cmp=A.Zb({type:e,selectors:[["history-panel"]],decls:9,vars:6,consts:[[1,"history-panel"],[1,"panel-title-close-container"],[1,"history-item-container"],[1,"history-item-container-scrollbar"],[3,"historyItem","active","currentVersion","restoreEnabled","preview","renamed","createCopy",4,"ngIf"],[3,"title","active","activeChange",4,"ngFor","ngForOf"],[3,"historyItem","active","currentVersion","restoreEnabled","preview","renamed","createCopy"],[3,"title","active","activeChange"],[3,"historyItem","active","restoreEnabled","preview","renamed","restore","createCopy",4,"ngFor","ngForOf"],[3,"historyItem","active","restoreEnabled","preview","renamed","restore","createCopy"]],template:function(e,t){1&e&&(A.lc(0,"div",0),A.gc(1,"div",1),A.lc(2,"div",2),A.lc(3,"perfect-scrollbar",3),A.cd(4,re,1,4,"history-item",4),A.yc(5,"async"),A.lc(6,"app-collapsible-menu"),A.cd(7,oe,2,3,"app-collapsible-menu-item",5),A.yc(8,"async"),A.kc(),A.kc(),A.kc(),A.kc()),2&e&&(A.Sb(4),A.Cc("ngIf",A.zc(5,2,t.currentDocVersion)),A.Sb(3),A.Cc("ngForOf",A.zc(8,4,t.historyItems)))},directives:[U.b,F.t,B.a,F.s,ne,ie.a],pipes:[F.b],styles:[".history-panel[_ngcontent-%COMP%]{padding-left:21px;padding-right:21px;padding-top:18px;height:100%}.history-panel[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{color:#04263d}.history-item-container[_ngcontent-%COMP%]{padding-bottom:40px;max-height:100%;overflow:visible}perfect-scrollbar[_ngcontent-%COMP%]  history-item .actions-menu{right:10px}.history-item-container-scrollbar[_ngcontent-%COMP%]{height:calc(100vh - 65px);min-width:233px}app-collapsible-menu[_ngcontent-%COMP%]  app-collapsible-menu-item .col-menu-item-container{overflow:hidden}app-collapsible-menu[_ngcontent-%COMP%]  app-collapsible-menu-item .col-menu-item-container.expanded{margin-bottom:0}app-collapsible-menu[_ngcontent-%COMP%]  app-collapsible-menu-item .col-menu-item-content{overflow:visible}app-collapsible-menu[_ngcontent-%COMP%]  app-collapsible-menu-item:last-child .col-menu-item-container{margin-bottom:25px}app-collapsible-menu[_ngcontent-%COMP%]  app-collapsible-menu-item:last-child .col-menu-item-container.expanded{margin-bottom:65px}.panel-title-close-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:280px;margin-top:5px}.panel-close-btn[_ngcontent-%COMP%]{margin-top:10px;background:transparent;margin-right:-10px;cursor:pointer}.nu-ic-close[_ngcontent-%COMP%], .panel-close-btn[_ngcontent-%COMP%]{height:35px;width:35px}"],changeDetection:0}),e}()},"62De":function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n("EM62"),r=n("C05f"),a=n("5xGT"),o=n("2kYt");function s(e,t){1&e&&i.gc(0,"div",10)}var c=function(e){return{"background-image":e}},l=function(){function e(){this.isTemplate=!0,this.onButtonClick=new i.t,this.loading=new r.a(!1)}return e.prototype.buttonClicked=function(e){this.onButtonClick.next(e),this.loading.next(!1);var t=this.trackingInfo.type?this.trackingInfo.type.split("#")[1]:this.trackingInfo.type;a.Kb.track(this.trackingInfo.location+".item.click",{value1Type:"templateId",value1:this.trackingInfo.id,value2Type:"name",value2:this.trackingInfo.name,value3Type:"type",value3:t})},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Zb({type:e,selectors:[["template-thumbnail"]],inputs:{name:"name",isTemplate:"isTemplate",thumbImg:"thumbImg",trackingInfo:"trackingInfo",isUserPaused:"isUserPaused"},outputs:{onButtonClick:"onButtonClick"},decls:12,vars:14,consts:[[1,"template-thumbnail-container",3,"click"],["class","overlay",4,"ngIf"],[1,"template-thumbnail-inner"],[1,"template-thumbnail-image",3,"ngStyle"],[1,"template-thumbnail-name","fx-ellipsis"],[1,"spinner-container","fx-cover","fx-center-all"],["id","spinner",1,"spinner"],[1,"bounce1","white"],[1,"bounce2","white"],[1,"bounce3","white"],[1,"overlay"]],template:function(e,t){1&e&&(i.lc(0,"div",0),i.tc("click",(function(){return t.buttonClicked("use")})),i.yc(1,"async"),i.cd(2,s,1,0,"div",1),i.lc(3,"div",2),i.gc(4,"div",3),i.kc(),i.lc(5,"div",4),i.ed(6),i.kc(),i.lc(7,"div",5),i.lc(8,"div",6),i.gc(9,"div",7),i.gc(10,"div",8),i.gc(11,"div",9),i.kc(),i.kc(),i.kc()),2&e&&(i.Xb("show-loading",i.zc(1,10,t.loading))("template",t.isTemplate)("fx-pointer-events-none",t.isUserPaused),i.Tb("data-testid",t.name),i.Sb(2),i.Cc("ngIf",t.isUserPaused),i.Sb(2),i.Cc("ngStyle",i.Hc(12,c,"url("+t.thumbImg+")")),i.Sb(2),i.gd(" ",t.name," "))},directives:[o.t,o.w],pipes:[o.b],styles:[".spinner[_ngcontent-%COMP%]{text-align:center}.spinner[_ngcontent-%COMP%]   .bounce[_ngcontent-%COMP%]{width:15px;height:15px;margin-left:4px;margin-right:4px;border-radius:100%;display:inline-block;-webkit-animation:sk-bouncedelay 1.4s ease-in-out infinite both;animation:sk-bouncedelay 1.4s ease-in-out infinite both}.spinner[_ngcontent-%COMP%]   .bounce-1[_ngcontent-%COMP%]{-webkit-animation-delay:-.32s;animation-delay:-.32s}.spinner[_ngcontent-%COMP%]   .bounce-2[_ngcontent-%COMP%]{-webkit-animation-delay:-.16s;animation-delay:-.16s}.bounce[_ngcontent-%COMP%]   .paused[_ngcontent-%COMP%]{-webkit-animation-play-state:paused;animation-play-state:paused}@-webkit-keyframes sk-bouncedelay{0%,80%,to{transform:scale(0)}40%{transform:scale(1)}}@keyframes sk-bouncedelay{0%,80%,to{transform:scale(0)}40%{transform:scale(1)}}.template-thumbnail-container[_ngcontent-%COMP%]{background-color:#fff;border-radius:4px;width:195px;height:175px;display:inline-block;position:relative;cursor:pointer;border:1px solid #d3d3e7;box-shadow:0 2px 2px #c3c3de}.template-thumbnail-container[_ngcontent-%COMP%]:hover{background:linear-gradient(0deg,rgba(81,192,170,.05),rgba(81,192,170,.05)),hsla(0,0%,100%,.65)}.template-thumbnail-container[_ngcontent-%COMP%]:hover   .template-thumbnail-overlay[_ngcontent-%COMP%]{display:flex}.template-thumbnail-container[_ngcontent-%COMP%]:hover   .template-thumbnail-name[_ngcontent-%COMP%]{color:#195249}.template-thumbnail-container[_ngcontent-%COMP%]   .spinner-container[_ngcontent-%COMP%]{top:0;display:none;background-color:rgba(0,0,0,.5)}.template-thumbnail-container.show-loading[_ngcontent-%COMP%]{pointer-events:none}.template-thumbnail-container.show-loading[_ngcontent-%COMP%]   .spinner-container[_ngcontent-%COMP%]{display:flex}.template-thumbnail-container[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]{background-color:hsla(0,0%,100%,.5);position:absolute;width:100%;height:100%;top:0;left:0;pointer-events:none}.template-thumbnail-inner[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%}.template-thumbnail-image[_ngcontent-%COMP%]{flex:1;background-size:contain;background-repeat:no-repeat;background-position:50%;margin:10px}.template-thumbnail-name[_ngcontent-%COMP%]{text-align:center;color:#14282e;font-size:12px;height:20px;padding-top:5px}.template-thumbnail-overlay[_ngcontent-%COMP%]{display:none;flex-direction:column;background-color:rgba(0,0,0,.5);position:absolute;width:100%;height:100%;padding:10px}.template-thumbnail-overlay[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:5px;margin-bottom:5px;width:70px}.template-thumbnail-overlay-heading[_ngcontent-%COMP%]{height:44px;color:#fff;text-align:center;line-height:20px;overflow:hidden}"],changeDetection:0}),e}()},"8EYK":function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=[{id:"g-popular",name:"TEMPLATE_PANEL.CAT_POPULAR",categories:[{id:"g-popular-default"}]},{id:"g-diagrams",name:"TEMPLATE_PANEL.CAT_DIAGRAM",categories:[{id:"g-diagrams-default"},{id:"g-it-network-default"}]},{id:"g-projects",name:"TEMPLATE_PANEL.CAT_PROJECTS",categories:[{id:"g-projects-default"}]},{id:"g-strategy",name:"TEMPLATE_PANEL.CAT_STRATEGY",categories:[{id:"g-strategy-default"}]},{id:"g-brainstorm",name:"TEMPLATE_PANEL.CAT_BRAINSTORM",categories:[{id:"g-brainstorm-default"}]},{id:"g-meetings",name:"TEMPLATE_PANEL.CAT_MEETINGS",categories:[{id:"g-meetings-default"}]},{id:"g-research",name:"TEMPLATE_PANEL.CAT_RESEARCH",categories:[{id:"g-research-default"}]}],r=n("yQxh"),a=[{id:"g4nxEBiLhaI",name:"Flowchart",categories:["g-popular-default"],thumbUrl:"https://neutrino-diagram-svg.s3.amazonaws.com/g4nxEBiLhaI",type:"diagram/def/flowchart.js#Flowchart"},{id:"ddPVp5iSnAW",name:"Mind Map",categories:["g-popular-default"],thumbUrl:"https://neutrino-diagram-svg.s3.amazonaws.com/ddPVp5iSnAW",type:"diagram/def/mindmap.js#MindMap"},{id:"bWR4c0jH0fI",name:"Org Chart",categories:["g-popular-default"],thumbUrl:"https://neutrino-diagram-svg.s3.amazonaws.com/bWR4c0jH0fI",type:"diagram/def/org-chart.js#OrgChart"},{id:"vAnBkdf0iQR",name:"Concept Map",categories:["g-popular-default"],thumbUrl:"https://neutrino-diagram-svg.s3.amazonaws.com/vAnBkdf0iQR",type:"diagram/def/concept-map.js#ConceptMap"},{id:"vyWUec9kb7U",name:"Infographic",categories:["g-popular-default"],thumbUrl:"https://neutrino-diagram-svg.s3.amazonaws.com/vyWUec9kb7U",type:"diagram/def/infographics.js#Infographics"},{id:"QntZ3BLMuEE",name:"UML Class",categories:["g-popular-default"],thumbUrl:"https://neutrino-diagram-svg.s3.amazonaws.com/QntZ3BLMuEE",type:"diagram/def/uml-class.js#UMLClass"},{id:"tN3HFAAsYmP",name:"UML Use Case",categories:["g-popular-default"],thumbUrl:"https://neutrino-diagram-svg.s3.amazonaws.com/tN3HFAAsYmP",type:"diagram/def/usecase.js#UseCase"},{id:"ijS6B7RhEZr",name:"Database",categories:["g-popular-default"],thumbUrl:"https://neutrino-diagram-svg.s3.amazonaws.com/ijS6B7RhEZr",type:"diagram/def/database.js#Database"}],o=[{id:"IjuYT0expGG",name:"Kanban",categories:["g-project-default"],thumbUrl:"./assets/images/thumbnails/tb_kanban.svg",type:"diagram/def/concept-map.js#ConceptMap"},{id:"g4nxEBiLhaI",name:"Flowchart",categories:["g-popular-default"],thumbUrl:"./assets/images/thumbnails/tb_flowchart.svg",type:"diagram/def/flowchart.js#Flowchart"},{id:"ddPVp5iSnAW",name:"Mind Map",categories:["g-popular-default"],thumbUrl:"./assets/images/thumbnails/tb_mindmap.svg",type:"diagram/def/mindmap.js#MindMap"},{id:"bWR4c0jH0fI",name:"Org Chart",categories:["g-popular-default"],thumbUrl:"./assets/images/thumbnails/tb_org_chart.svg",type:"diagram/def/org-chart.js#OrgChart"}],s=n("nsO7"),c=[{id:"WfGxjzXpLaN",name:"Kanban Board / Agile Planning",description:"Use Kanban Boards and data integrated cards to manage any kind of workflow.",categories:["g-project-default"],thumbUrl:"https://neutrino-diagram-svg.s3.amazonaws.com/vAnBkdf0iQR",type:"diagram/def/concept-map.js#ConceptMap",isProject:!0},{id:"GIUpbp79emx",name:"Roadmap / Timeline",description:"Build a fully customizable data-backed product roadmap, link it to tasks and plans.",categories:["g-project-default"],thumbUrl:"https://neutrino-diagram-svg.s3.amazonaws.com/vAnBkdf0iQR",type:"diagram/def/concept-map.js#ConceptMap",isProject:!0},{id:"ttQPU8oNU1w",name:"Product Management Toolkit",description:"Idea management, prioritisation, roadmaps, kanban boards all linked together as a complete system.",categories:["g-project-default"],thumbUrl:"https://neutrino-diagram-svg.s3.amazonaws.com/g4nxEBiLhaI",type:"diagram/def/flowchart.js#Flowchart",isProject:!0},{id:"HzN0Df3TeJ7",name:"Ideas and Brainstorming",description:"Mind-maps and Sticky notes with idea management doc templates built in.",categories:["g-project-default"],thumbUrl:"https://neutrino-diagram-svg.s3.amazonaws.com/ddPVp5iSnAW",type:"diagram/def/mindmap.js#MindMap",isProject:!0},{id:"7xjqeg1mY37",name:"Priority Grid 2x2",description:"Calculate priority scores and rank items in interactive 2x2 grids.",categories:["g-project-default"],thumbUrl:"https://neutrino-diagram-svg.s3.amazonaws.com/bWR4c0jH0fI",type:"diagram/def/org-chart.js#OrgChart",isProject:!0},{id:"qC8xpTItKqe",name:"Visual Requirement Specs",description:"Visual requirement specs and detailed notes all in linked to the same canvas.",categories:["g-project-default"],thumbUrl:"https://neutrino-diagram-svg.s3.amazonaws.com/vAnBkdf0iQR",type:"diagram/def/concept-map.js#ConceptMap",isProject:!0},{id:"fMPDivvvj5X",name:"OKR & Goal Planner",description:"OKRs, KPI's or Strategy alignment templates, which calculates goal completion % in real time.",categories:["g-project-default"],thumbUrl:"",type:"diagram/def/block.js#Block",isProject:!0},{id:"xdaPFfke1cP",name:"HR Org Structure",description:"Dynamic org structure that allows for master and departmental charts that always stay in sync.",categories:["g-project-default"],thumbUrl:"",type:"diagram/def/block.js#Block",isProject:!0}],l=n("EM62"),d=function(){function e(){this.groups=i,this.templates=r.a,this._featuredTemplates=a,this._projectTemplates=c,this._dashboardTemplates=o}return Object.defineProperty(e.prototype,"allTemplateGroups",{get:function(){return this.groups},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"featuredTemplates",{get:function(){return this._featuredTemplates},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"projectTemplates",{get:function(){return this._projectTemplates},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"allTemplates",{get:function(){return this.templates},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dashboardTemplates",{get:function(){return this._dashboardTemplates},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"allCategoryLessTemplates",{get:function(){return this.allTemplates.filter((function(e){return e.categories.length<=0}))},enumerable:!1,configurable:!0}),e.prototype.getTemplatesByCategory=function(e){return this.allTemplates.filter((function(t){return t.categories.includes(e)}))},e.prototype.getTemplatesByGroupCategory=function(e){var t=this,n=this.groups.find((function(t){return t.id===e}));return n&&n.categories?Object(s.flatten)(n.categories.map((function(e){return t.getTemplatesByCategory(e.id)}))):this.getTemplatesByCategory(e)},e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=l.bc({token:e,factory:e.\u0275fac}),e}()},IOVY:function(e,t,n){"use strict";n.d(t,"a",(function(){return C}));var i=n("D57K"),r=n("PGgW"),a=n("s9Xn"),o=n("nsO7"),s=n("sKtG"),c=n("IGWl"),l=n("aSzn"),d=n("X0jn"),u=n("TLy2"),p=n("YtkY"),h=n("jIqt"),g=n("BwBJ"),f=n("Ohay"),m=n("xVbo"),b=n("0B/R"),v=n("ROBh"),y=n("GoAz"),O=n("flPR"),_=n("EM62"),C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.toolbarGap=40,t}return Object(i.e)(t,e),Object.defineProperty(t.prototype,"toolbar",{get:function(){return this.toolbarManager.get("shape-text-toolbar")},enumerable:!1,configurable:!0}),t.prototype.listenToChanges=function(){var e=this;return this.duringTextEdit({action:"quickhide"},{action:"quickshow"}).pipe(Object(u.a)((function(t){return e.isShowAction(t.action)?e.state.changes("TextEditorState").pipe(Object(p.a)((function(e){return e.selection&&e.selection.width?{action:"quickshow"}:{action:"quickhide"}}))):Object(v.a)(t)})),Object(u.a)((function(t){return e.isShowAction(t.action)?e.duringPan({action:"quickshow"},{action:"quickhide"}).pipe(Object(h.a)(t)):Object(v.a)(t)})),Object(g.a)(1),Object(f.a)())},t.prototype.positionToolbar=function(){var e=this.state.get("TextEditorState");if(e.selection&&e.selection.width){var t=this.state.get("DiagramZoomLevel"),n=this.state.get("DiagramPan"),i=t/e.zoom,r=n.x-e.pan.x*i,a=n.y-e.pan.y*i,o=e.editorBounds.x*i+r+(e.selection.x+e.selection.width/2)*t,s=e.editorBounds.y*i+a+(e.selection.y-this.toolbarGap)*i;this.toolbar.position({x:o,y:s},"bottomcenter")}return Object(v.a)({})},t.prototype.getToolbarItems=function(){var e=this,t=this.state.get("Selected");return t.length>0?this.getTextToolbarItems(t[0]).pipe(Object(u.a)((function(t){return e.state.changes("TextEditorState").pipe(Object(p.a)((function(e){return e.styles})),Object(p.a)((function(n){return t.map((function(i){return i.data&&(i.data.value=void 0===n[i.data.style]?null:n[i.data.style],e.handleListData(i,n[i.data.style]),e.handleHyperlinkButtons(t,n)),Object(o.cloneDeep)(i)}))})))}))):Object(v.a)([])},t.prototype.handleHyperlinkButtons=function(e,t){var n;return(n="string"==typeof t.link||Object(o.isEqual)({},t.link)?e.findIndex((function(e){return"openHyperlinkEditor"===e.featureId})):e.findIndex((function(e){return"unlinkHyperlink"===e.featureId})))>-1&&e.splice(n,1),e},t.prototype.getTextToolbarItems=function(e){var t=this;return this.ll.forCurrent(!1).getShapeOnce(e).pipe(Object(m.a)((function(e){return!!e})),Object(u.a)((function(e){var n=e.getContextualToolbarItemsForTextEdit();return Object(y.a)(n).pipe(Object(u.a)((function(e){return t.isFeatureEnabled(e.featureId).pipe(Object(p.a)((function(t){return{enabled:t,item:e}})),Object(m.a)((function(e){return e.enabled})),Object(p.a)((function(e){return e.item})))})),Object(b.a)())})))},t.prototype.updateShowMethod=function(e){return e},t.prototype.getUIControlType=function(e){if(!e||e===d.c.BINARY)return c.a;if(e===d.c.OPTION_LIST_COMBO)return s.a;if(e===d.c.OPTION_LIST)return r.a;if(e===d.c.OPTION_IMAGES)return a.a;throw new Error("A contextual toolbar UI control is not available for "+e)},t.prototype.handleListData=function(e,t){if(e.data.data){var n=e.data.data;if(n.forEach((function(e){return e.selected=!1})),!(void 0===t||"object"==typeof t&&Object(o.isEmpty)(t))){var i=n.find((function(e){return""+e.value==""+t}));if(i)i.selected=!0;else{var r=n.find((function(e){return e.custom}));r?(r.id=t,r.label=t,r.buttonLabel=t,r.value=t,r.selected=!0):n.push({id:t,label:t,buttonLabel:t,value:t,custom:!0,selected:!0})}}}},t.\u0275fac=function(e){return P(e||t)},t.\u0275prov=_.bc({token:t,factory:t.\u0275fac}),t=Object(i.d)([Object(O.a)()],t)}(l.a),P=_.nc(C);Object.defineProperty(C,"name",{value:"ShapeTextToolbarHandler"})},J1Bu:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n("5xGT"),r=(n("Q4Fx"),n("EM62")),a=n("2kYt"),o=n("s2Ay"),s=n("53e4"),c=["contentContainer"],l=function(){function e(e){this.state=e,this.id="history",this.isExpandable=!1}return e.prototype.ngOnDestroy=function(){},e.prototype.ngOnInit=function(){},e.\u0275fac=function(t){return new(t||e)(r.fc(i.Ib))},e.\u0275cmp=r.Zb({type:e,selectors:[["left-history-panel"]],viewQuery:function(e,t){var n;(1&e&&r.Wc(c,!0),2&e)&&(r.Lc(n=r.uc())&&(t.contentContainer=n.first))},decls:6,vars:1,consts:[[1,"history-panel","left-sidebar-panel","fx-span-height-100vh","fx-pointer-events-auto",3,"ngClass"],["contentContainer",""],[1,"left-sidebar-panel-padding","history-panel-header"],["translate","",1,"nu-text-medium"]],template:function(e,t){1&e&&(r.lc(0,"div",0,1),r.lc(2,"div",2),r.lc(3,"label",3),r.ed(4,"HISTORY_PANEL.HEADER"),r.kc(),r.kc(),r.gc(5,"history-panel"),r.kc()),2&e&&r.Cc("ngClass",t.sidebarState)},directives:[a.q,o.a,s.a],styles:[".left-sidebar-panel[_ngcontent-%COMP%]{width:264px}.left-sidebar-panel.collapsing[_ngcontent-%COMP%], .left-sidebar-panel.expanded[_ngcontent-%COMP%], .left-sidebar-panel.shrinking[_ngcontent-%COMP%]{width:890px}.left-sidebar-panel.closed[_ngcontent-%COMP%]{transform:translateX(-215px);width:0}.left-sidebar-panel-padding[_ngcontent-%COMP%]{padding-left:10px;padding-right:10px}.history-panel-header[_ngcontent-%COMP%]{padding-top:30px}"],changeDetection:0}),e}()},JupZ:function(e,t,n){e.exports=function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=i(n(2));e.exports=r.default},function(e,t){function n(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}e.exports=n},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(9)),a=i(n(3)),o=n(4),s=function(){if("undefined"!=typeof window){var e=100,t=["scroll","resize","load"],n={history:[]},i={offset:{},threshold:0,test:o.inViewport},s=(0,r.default)((function(){n.history.forEach((function(e){n[e].check()}))}),e);t.forEach((function(e){return addEventListener(e,s)})),window.MutationObserver&&addEventListener("DOMContentLoaded",(function(){new MutationObserver(s).observe(document.body,{attributes:!0,childList:!0,subtree:!0})}));var c=function(e){if("string"==typeof e){var t=[].slice.call(document.querySelectorAll(e));return n.history.indexOf(e)>-1?n[e].elements=t:(n[e]=(0,a.default)(t,i),n.history.push(e)),n[e]}};return c.offset=function(e){if(void 0===e)return i.offset;var t=function(e){return"number"==typeof e};return["top","right","bottom","left"].forEach(t(e)?function(t){return i.offset[t]=e}:function(n){return t(e[n])?i.offset[n]=e[n]:null}),i.offset},c.threshold=function(e){return"number"==typeof e&&e>=0&&e<=1?i.threshold=e:i.threshold},c.test=function(e){return"function"==typeof e?i.test=e:i.test},c.is=function(e){return i.test(e,i)},c.offset(0),c}};t.default=s()},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(t,i){n(this,e),this.options=i,this.elements=t,this.current=[],this.handlers={enter:[],exit:[]},this.singles={enter:[],exit:[]}}return i(e,[{key:"check",value:function(){var e=this;return this.elements.forEach((function(t){var n=e.options.test(t,e.options),i=e.current.indexOf(t),r=i>-1,a=!n&&r;n&&!r&&(e.current.push(t),e.emit("enter",t)),a&&(e.current.splice(i,1),e.emit("exit",t))})),this}},{key:"on",value:function(e,t){return this.handlers[e].push(t),this}},{key:"once",value:function(e,t){return this.singles[e].unshift(t),this}},{key:"emit",value:function(e,t){for(;this.singles[e].length;)this.singles[e].pop()(t);for(var n=this.handlers[e].length;--n>-1;)this.handlers[e][n](t);return this}}]),e}();t.default=function(e,t){return new r(e,t)}},function(e,t){"use strict";function n(e,t){var n=e.getBoundingClientRect(),i=n.top,r=n.right,a=n.bottom,o=n.left,s=n.width,c=n.height,l={t:a,r:window.innerWidth-o,b:window.innerHeight-i,l:r},d={x:t.threshold*s,y:t.threshold*c};return l.t>t.offset.top+d.y&&l.r>t.offset.right+d.x&&l.b>t.offset.bottom+d.y&&l.l>t.offset.left+d.x}Object.defineProperty(t,"__esModule",{value:!0}),t.inViewport=n},function(e,t){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(t,function(){return this}())},function(e,t,n){var i=n(5),r="object"==typeof self&&self&&self.Object===Object&&self,a=i||r||Function("return this")();e.exports=a},function(e,t,n){function i(e,t,n){function i(t){var n=v,i=y;return v=y=void 0,x=t,_=e.apply(i,n)}function d(e){return x=e,C=setTimeout(h,t),S?i(e):_}function u(e){var n=t-(e-P);return k?l(n,O-(e-x)):n}function p(e){var n=e-P;return void 0===P||n>=t||n<0||k&&e-x>=O}function h(){var e=a();return p(e)?g(e):void(C=setTimeout(h,u(e)))}function g(e){return C=void 0,D&&v?i(e):(v=y=void 0,_)}function f(){void 0!==C&&clearTimeout(C),x=0,v=P=y=C=void 0}function m(){return void 0===C?_:g(a())}function b(){var e=a(),n=p(e);if(v=arguments,y=this,P=e,n){if(void 0===C)return d(P);if(k)return C=setTimeout(h,t),i(P)}return void 0===C&&(C=setTimeout(h,t)),_}var v,y,O,_,C,P,x=0,S=!1,k=!1,D=!0;if("function"!=typeof e)throw new TypeError(s);return t=o(t)||0,r(n)&&(S=!!n.leading,O=(k="maxWait"in n)?c(o(n.maxWait)||0,t):O,D="trailing"in n?!!n.trailing:D),b.cancel=f,b.flush=m,b}var r=n(1),a=n(8),o=n(10),s="Expected a function",c=Math.max,l=Math.min;e.exports=i},function(e,t,n){var i=n(6),r=function(){return i.Date.now()};e.exports=r},function(e,t,n){function i(e,t,n){var i=!0,s=!0;if("function"!=typeof e)throw new TypeError(o);return a(n)&&(i="leading"in n?!!n.leading:i,s="trailing"in n?!!n.trailing:s),r(e,t,{leading:i,maxWait:t,trailing:s})}var r=n(7),a=n(1),o="Expected a function";e.exports=i},function(e,t){function n(e){return e}e.exports=n}])},PDpc:function(e,t,n){"use strict";n.d(t,"a",(function(){return C}));var i=n("D57K"),r=n("Jzy8"),a=n("W9bu"),o=n("X0jn"),s=n("19Zn"),c=n("SKSx"),l=n("5xGT"),d=n("ZTXN"),u=n("g6G6"),p=n("KTx3"),h=n("6Oco"),g=n("TLy2"),f=n("8j5Y"),m=n("xVbo"),b=n("w1VY"),v=n("QoSw"),y=n("flPR"),O=n("sXdR"),_=n("EM62"),C=function(e){function t(t,n,i,r){var a=e.call(this,n)||this;return a.ll=t,a.state=n,a.linkService=i,a.diagToViewport=r,a._indicators=[],a.addSource=new d.a,a.removeSource=new d.a,a.changeSource=new d.a,a}return Object(i.e)(t,e),Object.defineProperty(t.prototype,"indicators",{get:function(){return this._indicators},enumerable:!1,configurable:!0}),t.prototype.initialize=function(){var e=this,t=this.state.changes("InterfaceControlState").pipe(Object(g.a)((function(t){return e.removeIndicators(),"edit"===t?e.initForEditor():e.initForViewer()})));this.subs.push(t.subscribe())},t.prototype.createAddSource=function(){return this.addSource},t.prototype.createRemoveSource=function(){return this.removeSource},t.prototype.createChangeSource=function(){return this.changeSource},t.prototype.initForViewer=function(){var e=this;return Object(u.a)(this.addIndicators().pipe(Object(g.a)((function(){return e.handleClick()}))),this.listenToViewportChanges().pipe(Object(O.lodashThrottle)(300,{leading:!1,trailing:!0}),Object(f.a)((function(){return e.updateIndicators()}))))},t.prototype.initForEditor=function(){var e=this;return Object(u.a)(this.hyperlinkKeyEvent("keydown").pipe(Object(O.lodashThrottle)(300,{leading:!0,trailing:!1}),Object(g.a)((function(){return e.addIndicators()})),Object(g.a)((function(){return e.handleClick()}))),this.hyperlinkKeyEvent("keyup").pipe(Object(f.a)((function(){return e.removeIndicators()}))),this.listenToViewportChanges().pipe(Object(f.a)((function(){return e.removeIndicators()}))))},t.prototype.updateIndicators=function(){var e=this;this._indicators.forEach((function(t){e.positionIndicator(t),e.changeSource.next(t)}))},t.prototype.addIndicators=function(){var e=this;return this.ll.forCurrent(!0).getDiagramOnce().pipe(Object(f.a)((function(t){Object.keys(t.shapes).forEach((function(n){var i=t.shapes[n];i.getTextsWithHyperlinks().forEach((function(t){var n=new l.vb(0,0,t.width,t.height),r=e.getPoint(i,t),a=new c.a(t,r),o=s.G.getPointOnText(n,t.alignX,t.alignY);a.regX=o.x,a.regY=o.y,a.rotation=i.transform?i.transform.angle:0,e.positionIndicator(a),e._indicators.push(a),e.addSource.next(a)}))}))})))},t.prototype.getPoint=function(e,t){var n;if(e.isConnector()){var i=e;n=s.G.getPointOnConnector(i,t)}else{var r=e;n=s.G.getPointOnShape(t.position,r.defaultBounds,r.transform)}return n},t.prototype.handleClick=function(){var e=this;if(this.indicators.length>0){var t=this.indicators.map((function(t){var n=t.children.map((function(t){return Object(p.a)(t,"click").pipe(Object(f.a)((function(){return e.navigate(t)})))}));return u.a.apply(void 0,Object(i.j)(n))}));return u.a.apply(void 0,Object(i.j)(t))}return Object(h.b)()},t.prototype.hyperlinkKeyEvent=function(e){return Object(p.a)(window,e).pipe(Object(m.a)((function(e){return e.keyCode===o.j.Command||e.keyCode===o.j.Control})))},t.prototype.positionIndicator=function(e){e.x=this.diagToViewport.x(e.origin.x),e.y=this.diagToViewport.y(e.origin.y);var t=this.state.get("DiagramZoomLevel");e.scaleX=t,e.scaleY=t},t.prototype.removeIndicators=function(){for(;this._indicators.length>0;)this.removeSource.next(this._indicators.pop())},t.prototype.navigate=function(e){this.linkService.navigate(r.K.fromUrl(e.value))},t.prototype.listenToViewportChanges=function(){return Object(u.a)(this.state.changes("DiagramPan"),this.state.changes("DiagramZoomLevel"))},t.removeForPanZoom=!0,t.\u0275fac=function(e){return new(e||t)(_.pc(v.a),_.pc(l.Ib),_.pc(a.a),_.pc(b.a))},t.\u0275prov=_.bc({token:t,factory:t.\u0275fac}),t=Object(i.d)([Object(y.a)(),Object(i.g)("design:paramtypes",[v.a,l.Ib,a.a,b.a])],t)}(y.b)},Q4Fx:function(e,t,n){"use strict";n.d(t,"b",(function(){return B})),n.d(t,"a",(function(){return W}));var i,r=n("C05f"),a=n("ROBh"),o=n("YtkY"),s=n("wqq/"),c=n("TLy2"),l=n("xVbo"),d=n("Ohay"),u=n("8j5Y"),p=n("nsO7"),h=n("5xGT"),g=n("NNJu"),f=n("4y1S"),m=n("QoSw"),b=n("ZZOX"),v=n("fqe/"),y=n("onas"),O=n("C5+t"),_=n("yn08"),C=n("X0jn"),P=n("Lmsv"),x=n("7N9q"),S=n("D57K"),k=n("hX56"),D=n("qZtG"),w=n("i9xl"),T=n("Wpmq"),I=n("c7W3"),j=n("55zG"),E=n("iim9"),M=n("6qzS"),R=n("EM62"),A=n("s2Ay"),L=n("sEIs"),N=n("x+xc"),U=["window"],F=["container"];!function(e){e.ADD_TO_WORKSPACE="community:addToWorkspace",e.CLOSE="community:close"}(i||(i={}));var B,H=function(e){function t(t,n,i,r,a,o,s,c,l){var d=e.call(this)||this;return d.state=t,d.modalController=n,d.translate=i,d.postMessage=r,d.commands=a,d.router=o,d.datastore=s,d.vToDcoordinate=c,d.libraryList=l,d.subs=[],d}return Object(S.e)(t,e),Object.defineProperty(t.prototype,"iFrameUrl",{get:function(){return this.templateTypeUrl=this.state.get("TemplatesModalTemplateGroupId"),this.state.set("TemplatesModalTemplateGroupId",f.q.All),this.templateTypeUrl&&this.templateTypeUrl!==f.q.All?""+h.m.get("DIAGRAM_COMMUNITY_URL")+this.templateTypeUrl:""+h.m.get("DIAGRAM_COMMUNITY_URL")+f.q.All},enumerable:!1,configurable:!0}),t.prototype.ngOnInit=function(){var e=this;this.state.set("ShowTemplateSkip",!0),this.subs.push(this.showWindow(this.container,this.window).subscribe(),this.postMessage.recv().subscribe((function(t){return e.handleIncomingMessages(t)})))},t.prototype.closeWindow=function(){var e=this,t=this.hideWindow(this.container,this.window).subscribe({complete:function(){e.modalController.hide()}});this.subs.push(t)},t.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},t.prototype.handleIncomingMessages=function(e){if(e&&"object"==typeof e){var t=e,n=t.event,r=t.data;n===i.ADD_TO_WORKSPACE?(r&&r.templateId&&this.useTemplate(r.templateId),this.closeWindow()):n===i.CLOSE&&this.closeWindow()}},t.prototype.useTemplate=function(e){var t=this.state.get("TemplateOriginLocation"),n=this.state.get("FolderPanelSelectedProject");h.Kb.track("template.document.create.load",{value1Type:"templateId",value1:e}),"dashboard"===t||"onboarding"===t?(this.router.navigate(["start/new/project/"+(null!=n?n:"home")],{queryParams:{templateId:e}}).catch((function(e){e.data&&setTimeout((function(){throw new f.j("diagram create failed",e.data)}))})),this.state.set("SelectedLeftPanel","none")):this.addTemplate(e),this.state.set("SelectedLeftPanel","none"),this.state.set("SelectedFloatingPanel","shapes"),this.state.set("ToggleTemplatesModal",!1)},t.prototype.addTemplate=function(e){var t=this;this.state.set("SelectedFloatingPanel","shapes"),this.state.set("ToggleTemplatesModal",!1);var n=this.state.get("DiagramViewPort");Object(D.a)(this.commands.dispatch(I.a.getTemplate,e,{templateId:e}),Object(w.a)((function(){return t.datastore.findOneLatest(j.a,{id:e}).pipe(Object(c.a)((function(e){e&&e.libraries&&t.addLibraries(e.libraries);var i=e.clone({x:t.vToDcoordinate.x(n.centerX)-200,y:t.vToDcoordinate.y(n.centerY)-200});return t.commands.dispatch(I.a.addDiagramShape,{cloned:!0,shapes:i.shapes,groups:i.groups,connections:i.connections})})))}))).subscribe()},t.prototype.addLibraries=function(e){var t=this;if(e&&e.length){var n=this.state.get("CurrentLibraries"),i=Object(p.difference)(e.map((function(e){return e[0]})),n.map((function(e){return e.id}))),r=Object(p.cloneDeep)(n);i.forEach((function(e){r.push({id:e,type:E.c.Static,status:"loading",libGroup:t.libraryList.getMainGroupForLibrary(e),isCollapsed:e.isCollapsed})})),this.state.set("CurrentLibraries",r),this.state.set("CurrentLibraryGroup",r[0].libGroup)}},t.\u0275fac=function(e){return new(e||t)(R.fc(h.Ib),R.fc(h.gb),R.fc(A.e),R.fc(h.pb),R.fc(h.B),R.fc(L.d),R.fc(k.b),R.fc(T.a),R.fc(M.a))},t.\u0275cmp=R.Zb({type:t,selectors:[["template-modal"]],viewQuery:function(e,t){var n;(1&e&&(R.Wc(U,!0),R.Wc(F,!0)),2&e)&&(R.Lc(n=R.uc())&&(t.window=n.first),R.Lc(n=R.uc())&&(t.container=n.first))},features:[R.Pb],decls:7,vars:3,consts:[[1,"modal-window-container","fx-cover","fx-center-all","template-panel-window-container"],["container",""],[1,"modal-window-inner"],["window",""],[1,"template-panel-iframe",3,"src"],["iframe",""]],template:function(e,t){1&e&&(R.lc(0,"div",0,1),R.lc(2,"div",2,3),R.gc(4,"iframe",4,5),R.yc(6,"safe"),R.kc(),R.kc()),2&e&&(R.Sb(4),R.Cc("src",R.zc(6,1,t.iFrameUrl),R.Rc))},pipes:[N.b],styles:[".modal-window-container[_ngcontent-%COMP%]{z-index:1001;background-color:rgba(0,0,0,.5)}.modal-window-inner[_ngcontent-%COMP%]{width:1160px!important;height:640px!important;max-width:1400px;max-height:920px;margin:20px;padding:0;overflow:hidden}.template-panel-iframe[_ngcontent-%COMP%]{display:block;width:100%;height:100%;border:none;border-radius:4px}"],changeDetection:0}),t}(g.p),z=n("qMyy"),G=["panelContainer"],V=["expandPanelButton"],Y=["panelItem"];!function(e){e.Closed="closed",e.Opening="opening",e.Opened="opened",e.Expanding="expanding",e.Expanded="expanded",e.Shrinking="shrinking",e.Collapsing="collapsing",e.Closing="closing"}(B||(B={}));var W=function(){function e(e,t,n,i,a,c,l,d,u,h,g){this.ll=e,this.state=t,this.containerEnv=n,this.translate=i,this.modalController=a,this.userLocator=c,this.authentication=l,this.appNavConfigInterpreter=d,this.permManager=u,this.globalNotificationService=h,this.commandService=g,this.isUserPaused=new r.a(!1),this.isPremiumUser=new r.a(!1),this.hasEDataPermission=!1,this.hasHistoryPanelPermission=!1,this.isFreeOrDemoUser=!0,this.showAccountButton=new r.a(!0),this.isSidebarExpanded=new r.a(!1),this.panelChangedEvent=new r.a("none"),this.isDiagramInHome=new r.a(!0),this.subs=[],this.openedWidth=264,this.expandedWidth=890,this._toggleNotification=!1,this.buttons=new r.a(this.getSidebarButtons()),this.manifests=this.state.changes("EnabledPlugins").pipe(Object(o.a)((function(e){return Object(p.filter)(e,(function(e){return e.panels&&Object(p.some)(e.panels,["position","left"])}))})),Object(s.a)(1)),this.subs=[this.listenToTemplateModalToggles()],this.currentState=B.Closed,this.hasEDataPermission=this.permManager.check([C.p.CUSTOM_DATABASES+"|"+C.p.GITHUB_INTEGRATION]),this.listenToPanelStateChanges(),this.hasHistoryPanelPermission=this.permManager.check([C.p.CREATELY_VERSION_HISTORY])}return Object.defineProperty(e.prototype,"appDisabledState",{get:function(){return this.state.changes("CurrentDiagram").pipe(Object(c.a)((function(e){return""===e||"start"===e?Object(a.a)(!1):Object(a.a)(!0)})))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"appConnectionStatus",{get:function(){return this.state.changes(O.c)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasMoreUnreadGlobalNotifications",{get:function(){return this.globalNotificationService.hasUnreadGlobalNotifications()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"logoutUrl",{get:function(){return h.m.get("COGNITO_LOGOUT_URL")+"?client_id="+h.m.get("COGNITO_CLIENT_ID")+"&logout_uri="+h.m.get("COGNITO_LOGOUT_REDIRECT_URL")},enumerable:!1,configurable:!0}),e.prototype.ngAfterViewInit=function(){this.projectId=this.ll.forCurrentObserver(!1).pipe(Object(c.a)((function(e){return e.getDiagramModel().pipe(Object(l.a)((function(e){return Boolean(e&&e.project)})),Object(o.a)((function(e){return"string"==typeof e.project?e.project:e.project.id})))}))),this.listenToShapeSearchResults(),this.listenToCurrentUserChanges(),this.listenToProjectChanges()},e.prototype.checkUserPauseStatus=function(){var e=this;return this.userLocator.isUserPaused().pipe(Object(d.a)(),Object(u.a)((function(t){return e.isUserPaused.next(t)})))},e.prototype.toggleExpand=function(){this.currentState===B.Opened||this.currentState===B.Closed?this.goToNextState(B.Expanded):this.currentState===B.Expanded&&(this.goToNextState(B.Closed),this.isSidebarExpanded.next(!1))},e.prototype.toggleCloseIfOpenedOrExpaned=function(){this.currentState!==B.Opened&&this.currentState!==B.Expanded||this.goToNextState(B.Closed)},e.prototype.getIcon=function(e){return"./assets/icons/symbol-defs.svg#nu-ic-"+e},e.prototype.toggleDashboard=function(){"plugin"===h.m.get("APP_MODE")||this.state.get("ApplicationIsEmbedded")||this.togglePanel("dashboard")},e.prototype.togglePanel=function(e){this._toggleNotification&&this.showGlobalNotificationModal(),this.resetMouseControlState();var t=this.getPanel(e);if(t){var n=t.isExpandable,i=this.toggleOpen(e,n);this.switchPanel(i?e:"none"),this.isSidebarExpanded.next(t.expandSidebar&&i)}else this.switchPanel("none")},e.prototype.resetMouseControlState=function(){var e=this.state.get("MouseControlState");[_.b.Text,_.b.Connector,_.b.Pen,_.b.Highlighter].includes(e)&&this.commandService.dispatch(z.a.changeMouseControlState,{state:_.b.Normal})},e.prototype.openTeamPortalOverview=function(){h.Kb.track("left.account.click",{value1Type:"button",value1:"overview"}),this.openTeamPortalWindow(y.b.Overview)},e.prototype.openClassicDiagramImport=function(){h.Kb.track("left.account.click",{value1Type:"button",value1:"classic diagram import"}),this.modalController.show(b.a)},e.prototype.openTeamPortalAccount=function(){h.Kb.track("left.account.click",{value1Type:"button",value1:"my account"}),this.openTeamPortalWindow(y.b.Account)},e.prototype.logout=function(){var e=this;h.Kb.track("left.account.click",{value1Type:"button",value1:"signout"}),this.state.set("LoadingIndicatorState",{main:!0,description:this.translate.instant("LOADING_WINDOWS.LOGOUT")}),delete localStorage.appReloadedForOffline,this.authentication.logOut().subscribe({complete:function(){return e.redirect(e.logoutUrl)}})},e.prototype.getExpandTooltip=function(){return this.currentState===B.Expanded?this.translate.instant("TOOLTIPS.COLLAPSE_PANEL"):this.translate.instant("TOOLTIPS.EXPAND_PANEL")},e.prototype.ngOnDestroy=function(){for(;this.subs.length;)this.subs.pop().unsubscribe()},e.prototype.showGlobalNotificationModal=function(){this._toggleNotification?this.modalController.hide():this.modalController.show(x.a),this._toggleNotification=!this._toggleNotification},e.prototype.onUserMenu=function(){this._toggleNotification&&this.showGlobalNotificationModal()},e.prototype.getGlobalNotificationBellToolTip=function(){var e=this;return this.globalNotificationService.getNoOfUnreadGlobalNotification().pipe(Object(o.a)((function(t){return e.translate.instant("TOOLTIPS.NOTIFICATION.NEW_NOTIFICATIONS",{noOfNewNotifications:t})})))},e.prototype.getLogoTooltip=function(){return"plugin"===h.m.get("APP_MODE")?this.translate.instant("TOOLTIPS.BACK_CONFLUENCE"):this.state.get("ApplicationIsEmbedded")?"Creately":this.translate.instant("TOOLTIPS.DASHBOARD")},e.prototype.getSelectedPanelId=function(){return this.selectedPanelId},e.prototype.listenToTemplateModalToggles=function(){var e=this;return this.state.changes("ToggleTemplatesModal").pipe(Object(u.a)((function(t){t?e.modalController.show(H):e.modalController.hide()}))).subscribe()},e.prototype.listenToShapeSearchResults=function(){var e=this;this.subs.push(this.state.changes("SelectedLeftPanel").pipe(Object(l.a)((function(e){return!!e})),Object(u.a)((function(t){return e.setSelectedPanelId(t)}))).subscribe(),this.checkUserPauseStatus().subscribe())},e.prototype.listenToProjectChanges=function(){var e=this;this.subs.push(this.state.changes("CurrentProject").subscribe((function(t){e.isDiagramInHome.next("home"===t),e.togglePremiumButton("task"),e.togglePremiumButton("edata"),e.togglePremiumButton("nav"),e.togglePremiumButton("cformat",!0)})))},e.prototype.listenToCurrentUserChanges=function(){var e=this;this.userMdl=this.userLocator.getUserData(),this.subs.push(this.userMdl.pipe(Object(l.a)((function(e){return!!e}))).subscribe((function(t){t.status===f.B.DEMO?e.showAccountButton.next(!1):e.showAccountButton.next(!0)})),this.permManager.isFreeOrDemoUser().subscribe((function(t){e.isPremiumUser.next(!t),e.togglePremiumButton("task"),e.togglePremiumButton("edata"),e.togglePremiumButton("nav"),e.togglePremiumButton("cformat",!0)})))},e.prototype.setState=function(e){this.currentState=e,this.state.set("LeftSidebarState",e||"")},e.prototype.transitionState=function(e,t){var n,i,r={width:"0",transform:"translateX(-"+this.openedWidth+"px)"},a={width:this.openedWidth+"px",transform:"translateX(0)"},o={width:this.expandedWidth+"px",transform:"translateX(0)"};switch(e){case B.Closed:n=r;break;case B.Opened:n=a;break;case B.Expanded:n=o}switch(t){case B.Closed:i=r;break;case B.Opened:i=a;break;case B.Expanded:i=o}var s=new g.e({from:n,to:i,transitionProperty:"width, transform",duration:0,easing:"step-end"});return s.element=this.panelContainer.nativeElement,s},e.prototype.showHideLeftSideButton=function(e,t){var n=this.buttons.getValue(),i=n.find((function(t){return t.id===e}));i&&i.visible!==t&&(i.visible=t,this.buttons.next(n))},e.prototype.togglePremiumButton=function(e,t){var n=this.buttons.getValue(),i=n.find((function(t){return t.id===e}));i&&(i.disabledWithUserPlan=!this.isPremiumUser.value,i.disabledWithDiagramLocation=!t&&this.isDiagramInHome.value,i.tooltip=this.getPremiumButtonTooltips(e),this.buttons.next(n))},e.prototype.toggleOpen=function(e,t){return this.currentState!==B.Opened&&this.currentState!==B.Expanded||this.selectedPanelId!==e?(t||this.currentState!==B.Closed?!t||this.currentState!==B.Closed&&this.currentState!==B.Opened||this.goToNextState(B.Expanded):this.goToNextState(B.Opened),!0):(this.goToNextState(B.Closed),this.setSelectedPanelId("none"),!1)},e.prototype.switchPanel=function(e){this.state.set("SelectedLeftPanel",e),"cformat"===e?h.Kb.track("rules.icon.click"):h.Kb.track("left."+e+".click")},e.prototype.goToNextState=function(e){var t=this;if(this.currentState!==e){var n,i=this.currentState;switch(i){case B.Closed:e===B.Opened?n=B.Opening:e===B.Expanded&&(n=B.Expanded);break;case B.Opened:e===B.Expanded?n=B.Expanding:e===B.Closed&&(n=B.Closing);break;case B.Expanded:e===B.Opened?n=B.Shrinking:e===B.Closed&&(n=B.Collapsing)}n&&this.setState(n),this.subs.push(this.transitionState(i,e).start().pipe(Object(u.a)({complete:function(){return t.setState(e)}})).subscribe())}},e.prototype.setSelectedPanelId=function(e){if("none"===e)return this.selectedPanelId="none",this.goToNextState(B.Closed),void this.isSidebarExpanded.next(!1);this.selectedPanelId=e;var t=this.getPanel(e);this.isSidebarExpanded.next(t.expandSidebar),this.panelChangedEvent.next(this.selectedPanelId),void 0!==t.onOpen&&t.onOpen(),t.isExpandable?this.enableExpand():this.disableExpand()},e.prototype.getPanel=function(e){return this.panelItems.filter((function(t){return t.id===e}))[0]},e.prototype.openTeamPortalWindow=function(e){void 0===e&&(e=y.b.Overview),this.modalController.show(y.c,{inputs:{page:e}})},e.prototype.enableExpand=function(){this.isExpandable=!0,this.currentState!==B.Opened&&this.currentState!==B.Closed||this.goToNextState(B.Expanded),this.subs.push(this.toggleExpandButton().start().subscribe())},e.prototype.disableExpand=function(){this.isExpandable=!1,this.currentState===B.Expanded&&this.goToNextState(B.Opened),this.subs.push(this.toggleExpandButton(!1).start().subscribe())},e.prototype.toggleExpandButton=function(e){void 0===e&&(e=!0);var t={transform:"translateX(25px)"},n={transform:"translateX(-2px)"},i=n,r=t;e||(i=t,r=n);var a=new g.e({from:i,to:r,transitionProperty:"transform",duration:0,easing:"step-end"});return a.element=this.expandPanelButton.nativeElement,a},e.prototype.getSidebarButtons=function(){var e=[];return"plugin"===h.m.get("APP_MODE")||this.state.get("ApplicationIsEmbedded")||(e.push({isSeperator:!0,show:!0}),e.push({id:"task",icon:"tasks",tooltip:this.getPremiumButtonTooltips("task"),name:"TOOLTIPS.TASKS",visible:!0,disableWithApp:!0,disabledWithUserPlan:!this.isPremiumUser.value,disabledWithDiagramLocation:this.isDiagramInHome.value}),e.push({id:"edata",icon:"data",tooltip:this.getPremiumButtonTooltips("edata"),name:"TOOLTIPS.DATA",visible:!0,disableWithApp:!0,disabledWithUserPlan:!this.isPremiumUser.value,disabledWithDiagramLocation:this.isDiagramInHome.value}),e.push({isSeperator:!0,show:!0}),e.push({id:"cformat",icon:"cformat",tooltip:this.getPremiumButtonTooltips("cformat"),name:"TOOLTIPS.DIAGRAM_CFORMAT",visible:!0,disableWithApp:!0,disabledWithUserPlan:!this.isPremiumUser.value}),e.push({id:"history",icon:"history",tooltip:"TOOLTIPS.DIAGRAM_HISTORY",name:"TOOLTIPS.DIAGRAM_HISTORY",visible:!0,disableWithApp:!0}),e.unshift({id:"folders",icon:"folder-thin",tooltip:"TOOLTIPS.FOLDER",name:"LABELS.FOLDERS",visible:!0,disableWithApp:!1}),e.unshift({id:"nav",icon:"navigation",tooltip:this.getPremiumButtonTooltips("nav"),name:"LABELS.NAV",visible:!0,disableWithApp:!0,disabledWithUserPlan:!this.isPremiumUser.value,disabledWithDiagramLocation:this.isDiagramInHome.value}),e.unshift({id:"dashboard",icon:"dashboard",tooltip:"TOOLTIPS.DASHBOARD",name:"TOOLTIPS.DASHBOARD",visible:!0,disableWithApp:!1})),e},e.prototype.getPremiumButtonTooltips=function(e){var t={task:{normal:"TOOLTIPS.TASKS",inHome:"TOOLTIPS.CREATE_IN_A_FOLDER",premiumOnly:"TOOLTIPS.TASKS_PREMIUM_ONLY"},edata:{normal:"TOOLTIPS.DATA",inHome:"TOOLTIPS.CREATE_IN_A_FOLDER",premiumOnly:"TOOLTIPS.DATA_PREMIUM_ONLY"},nav:{normal:"TOOLTIPS.NAV",inHome:"TOOLTIPS.CREATE_IN_A_FOLDER",premiumOnly:"TOOLTIPS.NAV_PREMIUM_ONLY"},cformat:{normal:"TOOLTIPS.DIAGRAM_CFORMAT",inHome:"TOOLTIPS.DIAGRAM_CFORMAT",premiumOnly:"TOOLTIPS.DIAGRAM_CFORMAT_PREMIUM_ONLY"}};return this.isPremiumUser.value?this.isDiagramInHome.value?t[e].inHome:t[e].normal:t[e].premiumOnly},e.prototype.isNavVisible=function(){return"home"!==this.state.get("CurrentProject")},e.prototype.isCFormatVisible=function(){return!this.isFreeOrDemoUser&&"home"!==this.state.get("CurrentProject")},e.prototype.redirect=function(e){window.location.replace(e)},e.prototype.listenToPanelStateChanges=function(){var e=this;this.state.changes("TooltipAutomateState").pipe(Object(u.a)((function(t){t===_.e.collapseLSB?e.setSelectedPanelId("none"):t===_.e.expandEData&&"edata"!==e.selectedPanelId?e.togglePanel("edata"):t===_.e.expandTask&&"task"!==e.selectedPanelId&&e.togglePanel("task")}))).subscribe()},e.\u0275fac=function(t){return new(t||e)(R.fc(m.a),R.fc(h.Ib),R.fc(h.F),R.fc(A.e),R.fc(h.gb),R.fc(f.y),R.fc(v.a),R.fc(h.o),R.fc(f.m),R.fc(P.a),R.fc(h.B))},e.\u0275dir=R.ac({type:e,viewQuery:function(e,t){var n;(1&e&&(R.Wc(G,!0),R.Wc(V,!0),R.jd(Y,!0)),2&e)&&(R.Lc(n=R.uc())&&(t.panelContainer=n.first),R.Lc(n=R.uc())&&(t.expandPanelButton=n.first),R.Lc(n=R.uc())&&(t.panelItems=n))}}),e}()},S0Xf:function(e,t,n){"use strict";n.d(t,"a",(function(){return le}));var i=n("ZTXN"),r=n("mWib"),a=n("iV8b"),o=n("EM62"),s=n("2kYt"),c=n("Jzy8"),l=n("c7W3"),d=n("5xGT"),u=n("X0jn"),p=n("NNJu"),h=n("C05f"),g=n("ROBh"),f=n("xVbo"),m=n("Ohay"),b=n("TLy2"),v=n("J+dc"),y=n("4e/d"),O=n("8j5Y"),_=n("7ntQ"),C=n("TaSY"),P=n("7SLS"),x=n("4y1S"),S=n("nsO7"),k=n("JupZ"),D=n("xnGY"),w=n("P1E4"),T=n("yn08"),I=n("C5+t"),j=n("RTAa"),E=n("7+LA"),M=n("QoSw"),R=n("sEIs"),A=n("K0+f"),L=n("/ege"),N=n("thzy"),U=n("jHi0"),F=n("s2Ay"),B=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Zb({type:e,selectors:[["thumbnail-loader"]],decls:14,vars:0,consts:[[1,"thumbnail-loader-container","white","fx-center-all"],[1,"thumbnail-loader-inner"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24.51 30"],["x","8.15","y","5.71","width","7.91","height","2.59","rx","1.03","ry","1.03",2,"fill","#f1f0f0"],["x","3.72","y","14.88","width","6.24","height","2.59","rx","1.03","ry","1.03",2,"fill","#f1f0f0"],["x","3.2","y","22.61","width","4.38","height","2.59","rx","1.03","ry","1.03",2,"fill","#f1f0f0"],["x","10.31","y","22.61","width","4.38","height","2.59","rx","1.03","ry","1.03",2,"fill","#f1f0f0"],["x","17.2","y","22.61","width","4.38","height","2.59","rx","1.03","ry","1.03",2,"fill","#f1f0f0"],["x","14.2","y","14.88","width","6.24","height","2.59","rx","1.03","ry","1.03",2,"fill","#f1f0f0"],["x1","12.11","y1","8.27","x2","12.11","y2","12.83",2,"fill","none","stroke","#f1f0f0","stroke-miterlimit","10"],["points","6.9 15.24 6.9 12.35 17.32 12.35 17.32 15.33",2,"fill","none","stroke","#f1f0f0","stroke-miterlimit","10"],["points","17.32 16.17 17.32 19.81 5.39 19.81 5.39 22.87",2,"fill","none","stroke","#f1f0f0","stroke-miterlimit","10"],["x1","12.5","y1","22.87","x2","12.5","y2","19.81",2,"fill","none","stroke","#f1f0f0","stroke-miterlimit","10"],["points","19.39 22.87 19.39 19.81 17.04 19.81",2,"fill","none","stroke","#f1f0f0","stroke-miterlimit","10"]],template:function(e,t){1&e&&(o.lc(0,"div",0),o.lc(1,"div",1),o.wc(),o.lc(2,"svg",2),o.gc(3,"rect",3),o.gc(4,"rect",4),o.gc(5,"rect",5),o.gc(6,"rect",6),o.gc(7,"rect",7),o.gc(8,"rect",8),o.gc(9,"line",9),o.gc(10,"polyline",10),o.gc(11,"polyline",11),o.gc(12,"line",12),o.gc(13,"polyline",13),o.kc(),o.kc(),o.kc())},styles:[".thumbnail-loader-container[_ngcontent-%COMP%]{width:100%;position:absolute;top:10px;left:0}.thumbnail-loader-inner[_ngcontent-%COMP%]{width:70px;height:75px}"],changeDetection:0}),e}(),H=n("uIWG"),z=["svgImageElement"],G=["dropdown"];function V(e,t){if(1&e&&(o.lc(0,"div",9),o.gc(1,"nu-badge",10),o.kc()),2&e){var n=o.xc();o.Sb(1),o.Cc("badgeText",n.status.label)("bgColor",n.status.bgColor)("textColor",n.status.textColor)("expanded",!0)}}function Y(e,t){1&e&&(o.lc(0,"div",11),o.wc(),o.lc(1,"svg",12),o.gc(2,"use",13),o.kc(),o.vc(),o.lc(3,"span",14),o.lc(4,"p",15),o.ed(5,"TOOLTIPS.DOCUMENT_LOCK.DOCUMENT_LOCK_INDICATOR.HEADING"),o.kc(),o.lc(6,"p",16),o.ed(7,"TOOLTIPS.DOCUMENT_LOCK.DOCUMENT_LOCK_INDICATOR.DESCRIPTION"),o.kc(),o.kc(),o.kc())}function W(e,t){1&e&&o.gc(0,"thumbnail-loader")}function K(e,t){if(1&e&&(o.lc(0,"div",17),o.cd(1,W,1,0,"thumbnail-loader",18),o.yc(2,"async"),o.gc(3,"div",19,20),o.kc()),2&e){var n=o.xc();o.Sb(1),o.Cc("ngIf",!o.zc(2,1,n.thumbnailSVG))}}function q(e,t){1&e&&(o.lc(0,"div",21),o.gc(1,"img",22),o.kc())}var X=function(e){return{value1Type:"diagramId",value1:e}},Z=function(e){return{event:"center.diagram.open.click",data:e}};function J(e,t){if(1&e){var n=o.mc();o.lc(0,"a",26),o.tc("click",(function(){o.Pc(n);var e=o.xc(2);return e.navToSelectedDiagram(e.id)})),o.ed(1),o.kc()}if(2&e){var i=o.xc(2);o.Cc("trackAction",o.Hc(4,Z,o.Hc(2,X,i.id))),o.Sb(1),o.gd(" ",i.name," ")}}function Q(e,t){if(1&e){var n=o.mc();o.lc(0,"editable-label",27),o.tc("changedText",(function(e){return o.Pc(n),o.xc(2).renameDiagram(e)})),o.kc()}if(2&e){var i=o.xc(2);o.Cc("value",i.name)("focus",!0)("selectAll",!0)("readonly",!1)}}function $(e,t){if(1&e&&(o.lc(0,"div",23),o.cd(1,J,2,6,"a",24),o.cd(2,Q,1,4,"editable-label",25),o.kc()),2&e){var n=t.ngIf;o.Sb(1),o.Cc("ngIf","inactive"===n),o.Sb(1),o.Cc("ngIf","active"===n)}}function ee(e,t){if(1&e){var n=o.mc();o.lc(0,"a",37),o.tc("click",(function(){return o.Pc(n),o.xc(3).enableRenameMode()})),o.ed(1,"DIAGRAM_FEATURE.RENAME"),o.kc()}}function te(e,t){if(1&e){var n=o.mc();o.lc(0,"a",37),o.tc("click",(function(){return o.Pc(n),o.xc(3).duplicateDiagram()})),o.yc(1,"async"),o.ed(2,"DIAGRAM_FEATURE.DUPLICATE"),o.kc()}if(2&e){var i=o.xc(3);o.Xb("disabled",i.isUserPaused||0===o.zc(1,2,i.appConnectionStatus))}}function ne(e,t){if(1&e){var n=o.mc();o.lc(0,"a",37),o.tc("click",(function(){o.Pc(n);var e=o.xc(3);return e.moveDiagram(e.id)})),o.yc(1,"async"),o.ed(2,"DIAGRAM_FEATURE.MOVE"),o.kc()}if(2&e){var i=o.xc(3);o.Xb("disabled",0===o.zc(1,2,i.appConnectionStatus))}}function ie(e,t){if(1&e){var n=o.mc();o.lc(0,"a",37),o.tc("click",(function(){return o.Pc(n),o.xc(3).showDeleteConfimationDialog()})),o.yc(1,"async"),o.ed(2,"DIAGRAM_FEATURE.DELETE"),o.kc()}if(2&e){var i=o.xc(3);o.Xb("disabled",0===o.zc(1,2,i.appConnectionStatus))}}function re(e,t){if(1&e&&(o.wc(),o.vc(),o.lc(0,"div",34),o.cd(1,ee,2,0,"a",35),o.cd(2,te,3,4,"a",36),o.cd(3,ne,3,4,"a",36),o.yc(4,"async"),o.cd(5,ie,3,4,"a",36),o.kc()),2&e){var n=o.xc().ngLet,i=o.xc();o.Sb(1),o.Cc("ngIf",5===n||0===n),o.Sb(1),o.Cc("ngIf",5===n||0===n),o.Sb(1),o.Cc("ngIf",0===n&&o.zc(4,4,i.projectCount)>1),o.Sb(2),o.Cc("ngIf",0===n)}}function ae(e,t){if(1&e&&(o.lc(0,"div",28,29),o.lc(2,"button",30),o.wc(),o.lc(3,"svg",31),o.gc(4,"use",32),o.kc(),o.kc(),o.cd(5,re,6,6,"div",33),o.kc()),2&e){var n=t.ngLet;o.Sb(2),o.Cc("disabled",5!==n&&0!==n),o.Sb(3),o.Cc("ngIf",5===n||0===n)}}var oe=function(){function e(e,t,n,i,r,a,o,s,c,l,d,u,p,g,f,m){this.resourceLoader=e,this.state=t,this.commandService=n,this.modalController=i,this.dialogBoxController=r,this.rolePermService=a,this.router=o,this.random=s,this.logger=c,this.planPermManager=l,this.documentManage=d,this.elementRef=u,this.modelSubManager=p,this.diagramNavigation=g,this.ll=f,this.eDataSyncSvc=m,this.renameMode=new h.a("inactive"),this.showBrokenThumbnail=new h.a(!1),this.enteredToViewport=new h.a(!1),this._thumbnailUrl=new h.a(void 0),k.offset({bottom:-400})}return Object.defineProperty(e.prototype,"isCurrent",{get:function(){return this.state.get("CurrentDiagram")===this.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scrollCheck",{set:function(e){!this.enteredToViewport.value&&k.is(this.elementRef.nativeElement)&&this.enteredToViewport.next(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"thumbnailUrl",{set:function(e){this._thumbnailUrl.next(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"thumbnailUrlSub",{get:function(){return this._thumbnailUrl},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"appConnectionStatus",{get:function(){return this.state.changes(I.c)},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){var e=this;this.thumbnailSVG=this._thumbnailUrl.pipe(Object(f.a)((function(e){return e&&e.length>0})),Object(m.a)(),Object(b.a)((function(t){var n=t.split("?")[0];return e.enteredToViewport.pipe(Object(f.a)((function(e){return!!e})),Object(v.a)(1),Object(b.a)((function(){return e.resourceLoader.forceLoad(t,n).pipe(Object(y.a)((function(t){return d.db.warning("Thumbnail loading failed for diagram:",e.id),e.showBrokenThumbnail.next(!0),Object(g.a)(void 0)})),Object(O.a)((function(t){return e.svgImageElement.nativeElement.innerHTML=t})))})))}))),this.roleObs=this.rolePermService.getCurrentUserRole(this.id).pipe(Object(_.a)())},e.prototype.showOptDropdown=function(){this.dropdown&&!this.isUserPaused&&(this.dropdown.nativeElement.style.display="block")},e.prototype.hideOptDropdown=function(){this.dropdown&&!this.isUserPaused&&(this.dropdown.nativeElement.style.display="none")},e.prototype.showDeleteConfimationDialog=function(){var e=this;d.Kb.track("left.folder.document.delete.click",{value1Type:"diagramId",value1:this.id});var t={id:"left-sb-delete-diagram-confirmation",heading:"DIALOG_BOX.DELETE_DIAGRAM.HEADING",description:"DIALOG_BOX.DELETE_DIAGRAM.DESCRIPTION",descriptionParams:{diagramName:this.name},type:"warning",icon:"warning",buttons:[{type:"ok",text:"BUTTONS.DELETE_DIAGRAM",clickHandler:function(){return e.deleteDiagram()}},{type:"cancel",text:"BUTTONS.CANCEL",clickHandler:function(){d.Kb.track("dialog.diagramdelete.cancel.click",{value1Type:"diagramId",value1:e.id})}}]};this.dialogBoxController.showDialog(t)},e.prototype.duplicateDiagram=function(){d.Kb.track("left.folder.document.duplicate.click",{value1Type:"location",value1:this.state.get("FolderPanelSelectedTab")});var e=this.random.diagramId();this.logger.debug("Creating diagram from template. Diagram id : "+e+" Template id "+this.id),this.dispatchCreateCommand({id:e,templateId:this.id,type:"duplicate"})},e.prototype.renameDiagram=function(e){d.Kb.track("left.folder.document.rename.change",{value1Type:"location",value1:this.state.get("FolderPanelSelectedTab")}),this.renameMode.next("inactive"),this.commandService.dispatch(l.a.renameDiagram,this.id,{name:e})},e.prototype.enableRenameMode=function(){d.Kb.track("left.folder.document.rename.change",{value1Type:"location",value1:this.state.get("FolderPanelSelectedTab")}),this.renameMode.next("active"),this.hideOptDropdown()},e.prototype.navToSelectedDiagram=function(e){var t=this,n=this.state.get("CurrentDiagram");this.state.set("SelectedLeftPanel","none"),"start"!==n?n!==e&&(this.state.set("SelectedFloatingPanel","shapes"),this.modelSubManager.stop(this.state.get("CurrentDiagram"),!0).pipe(Object(v.a)(1),Object(O.a)((function(){t.state.get("InterfaceControlState")===T.a.View?t.diagramNavigation.navigateToDiagram(e,"view"):t.diagramNavigation.navigateToDiagram(e,"edit")}))).subscribe()):this.state.get("InterfaceControlState")===T.a.View?this.diagramNavigation.navigateToDiagram(e,"view"):this.diagramNavigation.navigateToDiagram(e,"edit")},e.prototype.deleteDiagram=function(){var e=this;d.Kb.track("left.folder.document.delete.click",{value1Type:"location",value1:this.state.get("FolderPanelSelectedTab")});var t=this.getNextAvailDiagram(this.id);this.ll.forDiagram(this.id,!1).getDiagramOnce().pipe(Object(b.a)((function(n){return e.documentManage.deleteDiagram(e.id,t).pipe(Object(C.a)(),Object(P.a)(n))})),Object(O.a)((function(t){return e.eDataSyncSvc.syncDiagramToEData(t,!0)}))).subscribe()},e.prototype.moveDiagram=function(e){d.Kb.track("left.folder.document.move.change",{value1Type:"location",value1:this.state.get("FolderPanelSelectedTab")}),this.modalController.show(c.r,{inputs:{diagramIds:[e],name:this.name,sourceProjectId:this.state.get("FolderPanelSelectedProject")}})},e.prototype.dispatchCreateCommand=function(e){var t,n=this;if(this.planPermManager.check([u.p.DIAGRAM_CREATE]))t=w.a.createDiagram;else if(this.planPermManager.check([u.p.DIAGRAM_CREATE_PRIVATE]))t=w.a.createDiagramPrivate;else if(this.planPermManager.check([u.p.DIAGRAM_CREATE_TEAM]))t=w.a.createDiagramTeam;else{if(!this.planPermManager.check([u.p.DIAGRAM_CREATE_PUBLIC]))return void this.showUpgradeDialog(u.p.DIAGRAM_CREATE_PUBLIC,x.t.CreateWorkspace);t=w.a.createDiagramPublic}var i=this.state.get("FolderPanelSelectedProject");this.logger.debug("Creating diagram with id : "+e.id),this.commandService.dispatch(t,i,e).subscribe({error:function(e){n.handleDiagramPermissionError(e)},complete:function(){n.gotoEditor(e.id)}})},e.prototype.handleDiagramPermissionError=function(e){1615===e.code&&this.showUpgradeDialog(u.p.DIAGRAM_CREATE,x.t.CreateWorkspace),1611===e.code&&this.showUpgradeDialog(u.p.DIAGRAM_CREATE_PUBLIC,x.t.CreateWorkspace),1612===e.code&&this.showUpgradeDialog(u.p.DIAGRAM_CREATE_PRIVATE,x.t.CreateWorkspace),1623===e.code&&this.showUpgradeDialog(u.p.DIAGRAM_CREATE_TEAM,x.t.CreateWorkspace)},e.prototype.gotoEditor=function(e){var t=this;this.router.navigate(["../",e,"edit"]),this.state.changes("DiagramLoaded").pipe(Object(f.a)((function(t){return t===e})),Object(v.a)(1),Object(O.a)((function(){t.eDataSyncSvc.syncDiagramToEData(e)}))).subscribe()},e.prototype.showUpgradeDialog=function(e,t,n,i){void 0===n&&(n=function(){}),void 0===i&&(i=!1);var r={id:e,iframeType:t,buttons:[{type:"action",clickHandler:n,visibility:i?"enable":"disabled"},{type:"upgrade",clickHandler:function(){}}],integrationContext:{embedded:this.state.get("ApplicationIsEmbedded"),environment:this.state.get("PluginApp")}};this.modalController.show(x.u,{inputs:{dialogData:r}})},e.prototype.getNextAvailDiagram=function(e){var t=this.state.get("FolderPanelSelectedTab");if("diagrams"===t){var n=this.state.get("FolderPanelSelectedProject");n===c.E.SHARED_HOME&&(n=c.E.HOME);var i=Object(S.clone)(this.state.get("ProjectDiagrams")[n]);if(i&&i.length>1)return i.reverse(),this.findNextAvailDiagram(i,e)}else if("recent"===t){var r=this.state.get("RecentDiagrams");if(r&&r.length>1)return this.findNextAvailDiagram(r,e)}return""},e.prototype.findNextAvailDiagram=function(e,t){var n=e.findIndex((function(e){return e.id===t})),i=e[n+1];return i?i.id:e[0].id},e.\u0275fac=function(t){return new(t||e)(o.fc(d.Cb),o.fc(d.Ib),o.fc(d.B),o.fc(d.gb),o.fc(p.g),o.fc(c.F),o.fc(R.d),o.fc(d.sb),o.fc(d.db),o.fc(x.m),o.fc(c.n),o.fc(o.r),o.fc(D.d),o.fc(j.a),o.fc(M.a),o.fc(E.a))},e.\u0275cmp=o.Zb({type:e,selectors:[["diagram-thumbnail-item"]],viewQuery:function(e,t){var n;(1&e&&(o.jd(z,!0),o.jd(G,!0)),2&e)&&(o.Lc(n=o.uc())&&(t.svgImageElement=n.first),o.Lc(n=o.uc())&&(t.dropdown=n.first))},inputs:{name:"name",isUserPaused:"isUserPaused",projectCount:"projectCount",id:"id",status:"status",scrollCheck:"scrollCheck",thumbnailUrl:"thumbnailUrl"},features:[o.Rb([d.Cb])],decls:13,vars:21,consts:[[1,"thumbnail-item",3,"mouseenter","mouseleave"],["class","thumbnail-item-badge",4,"ngIf"],["tooltip","","placement","bottom","class","thumbnail-item-lock",4,"ngIf"],[3,"trackAction","click"],[1,"diagram-thumbnail-item-img-container"],["class","white fx-center-all",4,"ngIf"],["class","diagram-thumbnail-item-broken-image fx-center-all",4,"ngIf"],["class","thumbnail-item-text fx-center-all",4,"ngIf"],["class","thumbnail-dd",4,"ngLet"],[1,"thumbnail-item-badge"],[3,"badgeText","bgColor","textColor","expanded"],["tooltip","","placement","bottom",1,"thumbnail-item-lock"],[1,"nu-icon","nu-ic-lock"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-lock"],[1,"tooltip-content"],["translate","",1,"tooltip-header","nu-text-bold"],["translate","",1,"tooltip-body"],[1,"white","fx-center-all"],[4,"ngIf"],[1,"diagram-thumbnail-item-img"],["svgImageElement",""],[1,"diagram-thumbnail-item-broken-image","fx-center-all"],["src","./assets/images/broken-image.svg","width","65"],[1,"thumbnail-item-text","fx-center-all"],["class","thumbnail-item-inner dark-blue",3,"trackAction","click",4,"ngIf"],[3,"value","focus","selectAll","readonly","changedText",4,"ngIf"],[1,"thumbnail-item-inner","dark-blue",3,"trackAction","click"],[3,"value","focus","selectAll","readonly","changedText"],[1,"thumbnail-dd"],["dropdown",""],[1,"thumbnail-dd-button","nu-btn-med","secondary",3,"disabled"],[1,"nu-icon"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-more"],["class","thumbnail-dd-item",4,"ngIf"],[1,"thumbnail-dd-item"],["translate","",3,"click",4,"ngIf"],["translate","",3,"disabled","click",4,"ngIf"],["translate","",3,"click"]],template:function(e,t){1&e&&(o.lc(0,"div",0),o.tc("mouseenter",(function(){return t.showOptDropdown()}))("mouseleave",(function(){return t.hideOptDropdown()})),o.cd(1,V,2,4,"div",1),o.cd(2,Y,8,0,"div",2),o.lc(3,"a",3),o.tc("click",(function(){return t.navToSelectedDiagram(t.id)})),o.lc(4,"div",4),o.cd(5,K,5,3,"div",5),o.yc(6,"async"),o.cd(7,q,2,0,"div",6),o.yc(8,"async"),o.kc(),o.kc(),o.cd(9,$,3,2,"div",7),o.yc(10,"async"),o.cd(11,ae,6,2,"div",8),o.yc(12,"async"),o.kc()),2&e&&(o.Xb("selected",t.isCurrent),o.Sb(1),o.Cc("ngIf","none"!==t.status.id),o.Sb(1),o.Cc("ngIf",t.isUserPaused),o.Sb(1),o.Cc("trackAction",o.Hc(19,Z,o.Hc(17,X,t.id))),o.Sb(2),o.Cc("ngIf",o.zc(6,9,t.thumbnailUrlSub)),o.Sb(2),o.Cc("ngIf",o.zc(8,11,t.showBrokenThumbnail)),o.Sb(2),o.Cc("ngIf",o.zc(10,13,t.renameMode)),o.Sb(2),o.Cc("ngLet",o.zc(12,15,t.roleObs)))},directives:[s.t,A.a,L.a,N.a,U.a,F.a,B,H.a],pipes:[s.b],styles:[".thumbnail-item[_ngcontent-%COMP%]{border:1px solid #d3d3e7;border-radius:4px;cursor:pointer;display:block;color:#04263d;position:relative;margin-bottom:10px;background-color:#fff;box-shadow:0 2px 2px #c3c3de;width:196px}.thumbnail-item.selected[_ngcontent-%COMP%], .thumbnail-item[_ngcontent-%COMP%]:hover{border:1px solid #c0d9bf}.thumbnail-item[_ngcontent-%COMP%]:hover   .project-thumbnail-dd[_ngcontent-%COMP%]{display:inline-block}.thumbnail-item-text[_ngcontent-%COMP%]{height:50px;position:relative}.thumbnail-item-lock[_ngcontent-%COMP%]{position:absolute;right:5px;top:5px;z-index:1}.thumbnail-item-lock[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:#aaa}.thumbnail-dd[_ngcontent-%COMP%]{position:absolute;top:5px;right:0;display:none}.thumbnail-dd[_ngcontent-%COMP%]   .nu-icon[_ngcontent-%COMP%]{transform:rotate(90deg)}.thumbnail-dd-button[_ngcontent-%COMP%]:hover   .nu-icon[_ngcontent-%COMP%]{color:#fff}.thumbnail-item-inner[_ngcontent-%COMP%]{max-height:40px;line-height:20px;overflow:hidden;padding-left:30px;padding-right:30px;word-break:break-word}.thumbnail-dd-item[_ngcontent-%COMP%]{width:100px;padding:10px;background:#fff;border:1px solid #dcdcdc;border-radius:4px;display:none;position:absolute;z-index:1;right:0}.thumbnail-dd-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin-bottom:10px;display:block}.thumbnail-dd-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:last-of-type{margin-bottom:0}.thumbnail-dd[_ngcontent-%COMP%]:hover   .thumbnail-dd-item[_ngcontent-%COMP%]{display:block}.diagram-thumbnail-item-img-container[_ngcontent-%COMP%]{overflow:hidden;text-align:center;height:135px;padding:20px 20px 0}.diagram-thumbnail-item-img-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{overflow:hidden;position:relative;height:115px}.diagram-thumbnail-item-img-container[_ngcontent-%COMP%]   .diagram-thumbnail-broken[_ngcontent-%COMP%]{margin-left:10px}.diagram-thumbnail-item-img[_ngcontent-%COMP%]{max-height:100%;max-width:100%}.diagram-thumbnail-item-img[_ngcontent-%COMP%]  svg{max-height:115px;max-width:152px}editable-label[_ngcontent-%COMP%]  .editable-label-container{width:140px}.thumbnail-item-badge[_ngcontent-%COMP%]{position:absolute;padding:5px;z-index:10}.thumbnail-item[_ngcontent-%COMP%]:hover   .thumbnail-item-badge[_ngcontent-%COMP%]{display:none}"],changeDetection:0}),e}();function se(e,t){if(1&e&&(o.gc(0,"diagram-thumbnail-item",2),o.yc(1,"async"),o.yc(2,"async")),2&e){var n=t.$implicit,i=o.xc();o.Cc("id",null==n?null:n.id)("name",null==n?null:n.name)("status",i.getDocumentStatus(null==n?null:n.status))("scrollCheck",o.zc(1,7,i.scroll))("thumbnailUrl",null==n?null:n.thumbnailUrl)("projectCount",i.projectCount)("isUserPaused",o.zc(2,9,i.isUserPaused))}}var ce=function(e){return{"diagram-list-area-three-columns":e}},le=function(){function e(t){this.docStatus=t,this._columnCount=1,this._scroll=new i.a,this.scroll=this._scroll.pipe(Object(r.a)(e.scrollDebounce))}return Object.defineProperty(e.prototype,"columnCount",{get:function(){return this._columnCount},set:function(e){this._columnCount=e},enumerable:!1,configurable:!0}),e.prototype.getDocumentStatus=function(e){return this.docStatus.getDocumentStatus(e)},e.prototype.getDiagramTrackId=function(e,t){return t.id},e.prototype.onScroll=function(e){this._scroll.next(e)},e.scrollDebounce=400,e.\u0275fac=function(t){return new(t||e)(o.fc(a.a))},e.\u0275cmp=o.Zb({type:e,selectors:[["diagram-list-area"]],inputs:{diagramList:"diagramList",projectCount:"projectCount",isUserPaused:"isUserPaused",columnCount:"columnCount"},decls:3,vars:7,consts:[[1,"diagram-list-area-container","diagram-list-area-grid",3,"ngClass"],[3,"id","name","status","scrollCheck","thumbnailUrl","projectCount","isUserPaused",4,"ngFor","ngForOf","ngForTrackBy"],[3,"id","name","status","scrollCheck","thumbnailUrl","projectCount","isUserPaused"]],template:function(e,t){1&e&&(o.lc(0,"div",0),o.cd(1,se,3,11,"diagram-thumbnail-item",1),o.yc(2,"async"),o.kc()),2&e&&(o.Cc("ngClass",o.Hc(5,ce,3===t.columnCount)),o.Sb(1),o.Cc("ngForOf",o.zc(2,3,t.diagramList))("ngForTrackBy",t.getDiagramTrackId))},directives:[s.q,s.s,oe],pipes:[s.b],styles:[".diagram-list-area-grid.diagram-list-area-three-columns[_ngcontent-%COMP%]{display:inline-grid;grid-template-columns:repeat(auto-fit,minmax(195px,195px));grid-row-gap:16px;grid-column-gap:18px;width:100%}.diagram-list-area-grid.diagram-list-area-three-columns[_ngcontent-%COMP%]   diagram-thumbnail-item[_ngcontent-%COMP%]{width:31%}"],changeDetection:0}),e}()},Sf0Q:function(e,t,n){"use strict";n.d(t,"a",(function(){return D}));var i=n("oqI+"),r=n("seVz"),a=n("2kYt"),o=n("nIj0"),s=n("ulve"),c=n("+Tre"),l=n("3Uyd"),d=n("29Wa"),u=n("bFHC"),p=n("Cd2c"),h=n("R7+U"),g=n("s2Ay"),f=n("5xGT"),m=n("NNJu"),b=n("TMvu"),v=n("z3tU"),y=n("IOVY"),O=n("A7ZO"),_=n("8EYK"),C=n("aSzn"),P=n("xcrX"),x=n("6qzS"),S=n("I4UX"),k=n("EM62"),D=function(){function e(){}return e.\u0275mod=k.dc({type:e}),e.\u0275inj=k.cc({factory:function(t){return new(t||e)},providers:[S.a,P.a,v.a,C.a,y.a,x.a,_.a],imports:[[a.c,o.m,o.C,m.n,O.a,f.S,g.c,s.b,d.e,p.c,c.b,l.b,u.b,i.c,r.b,h.b,b.b]]}),e}()},WH6p:function(e,t,n){"use strict";n.d(t,"a",(function(){return S}));var i=n("D57K"),r=n("Lx0A"),a=n("EePP"),o=n("QoSw"),s=n("5xGT"),c=n("h1tj"),l=function(e){function t(){var t=e.call(this)||this,n=new Image;return n.src="data:image/svg+xml;base64,"+btoa('<svg width="19" height="19" viewBox="0 0 19 19" fill="none" xmlns="http://www.w3.org/2000/svg"> <circle cx="9.5" cy="9.5" r="9" fill="#E5E5E5" stroke="white"/> <path d="M13.5823 5.49257C13.599 5.82378 11.4179 6.35456 9.25776 6.34607C7.13519 6.34183 4.98338 5.81953 5.0001 5.49257C5.02099 5.12314 7.81625 5 9.29118 5C10.7536 5 13.5614 5.12314 13.5823 5.49257Z" stroke="#04263D" stroke-width="0.5" stroke-miterlimit="10"/> <path d="M13.5824 11.017C12.6883 11.3737 11.1883 11.845 9.28297 11.845C7.38604 11.845 5.89439 11.3737 5.00024 11.017" stroke="#04263D" stroke-width="0.5" stroke-miterlimit="10"/> <path d="M13.5824 8.3121C12.6883 8.66879 11.1883 9.14013 9.28297 9.14013C7.38604 9.14013 5.89439 8.66879 5.00024 8.3121" stroke="#04263D" stroke-width="0.5" stroke-miterlimit="10"/> <path d="M13.5824 5.49257V13.7473C12.6883 14.104 11.1883 14.5754 9.28297 14.5754C7.38604 14.5754 5.89439 14.104 5.00024 13.7473V5.49257" stroke="#04263D" stroke-width="0.5" stroke-miterlimit="10"/> </svg>'),t.icon=new c.Bitmap(n),t.icon.regX=9.5,t.icon.regY=9.5,t.addChild(t.icon),t}return Object(i.e)(t,e),t.prototype.destroy=function(){},t.prototype.update=function(e){this.name=e.id;var t=s.ob.onRect({x:{type:"fixed-end",value:3},y:{type:"fixed-end",value:3}},e.defaultBounds,e.transform);this.icon.x=t.x,this.icon.y=t.y,this.icon.rotation=e.transform.angle||0},t}(c.Container),d=n("Wpmq"),u=n("wx9+"),p=n("ZTXN"),h=n("C05f"),g=n("KTx3"),f=n("g6G6"),m=n("P4Xx"),b=n("TLy2"),v=n("YtkY"),y=n("BwBJ"),O=n("8j5Y"),_=n("nsO7"),C=n("flPR"),P=n("0jHB"),x=n("EM62"),S=function(e){function t(t,n,i,r,a){var o=e.call(this,r)||this;return o.viewport=t,o.vtod=n,o.ll=i,o.state=r,o.defLocator=a,o.rolloutDelaytime=100,o._indicators={},o.subs=[],o.indicatorSubs={},o.addSource=new p.a,o.removeSource=new p.a,o.changeSource=new p.a,o.update=new h.a(!0),o}return Object(i.e)(t,e),Object.defineProperty(t.prototype,"indicators",{get:function(){return Object(_.values)(this._indicators)},enumerable:!1,configurable:!0}),t.prototype.initialize=function(){var e=this,t=this.state.changes("InterfaceControlState").pipe(Object(b.a)((function(){return e.removeIndicators(),e.init()})));this.subs.push(t.subscribe(),this.handleVisibility().subscribe())},t.prototype.createAddSource=function(){return this.addSource},t.prototype.createRemoveSource=function(){return this.removeSource},t.prototype.createChangeSource=function(){return this.changeSource},t.prototype.subscribeToMouseEnter=function(e){var t=this;return Object(g.a)(e.icon,"rollover").pipe(Object(v.a)((function(n){t.state.set("ShapeDataViewer",{shapeId:e.name,open:!0,src:"icon"})})))},t.prototype.subscribeToMouseLeave=function(e){var t=this;return Object(g.a)(e.icon,"rollout").pipe(Object(y.a)(this.rolloutDelaytime),Object(v.a)((function(e){var n=t.state.get("ShapeDataViewer");n.open&&"icon"===n.src&&t.state.set("ShapeDataViewer",{open:!1,src:"icon"})})))},t.prototype.removeIndicators=function(){var e=this;Object.keys(this._indicators).forEach((function(t){return e.removeIndicator(t)})),this._indicators={}},t.prototype.init=function(){var e=this;return Object(f.a)(this.ll.forCurrentObserver(!1).pipe(Object(b.a)((function(e){return e.getDiagramModel()})),Object(b.a)((function(t){return e.state.changes("ActiveShapes").pipe(Object(v.a)((function(n){return e.manageIndicators(t,n)})))}))),this.state.changes("ActiveShapes").pipe(Object(b.a)((function(){return e.update})),Object(b.a)((function(){return e.viewport.getShapeModels(Object.keys(e._indicators)).pipe(Object(b.a)((function(t){return e.updateIndicators(t)})))}))))},t.prototype.manageIndicators=function(e,t){var n=this,i=t.map((function(t){return e.shapes[t]})).filter((function(e){return!!e}));if(i.length>0){var r=i.map((function(e){return n.defLocator.getDefinition(e.defId,e.version)}));Object(m.a)(r).subscribe((function(t){var r=i.filter((function(i,r){return n.shouldShowIndicator(e,i,t[r])})).map((function(e){return e.id}));n.manageIndicatorsRemove(r),n.manageIndicatorsAdd(r),n.update.next(!0)}))}else this.manageIndicatorsRemove([]),this.manageIndicatorsAdd([])},t.prototype.manageIndicatorsAdd=function(e){var t=this;e.forEach((function(e){t._indicators[e]||(t._indicators[e]=new l,t.subs[e]=Object(f.a)(t.subscribeToMouseEnter(t._indicators[e]),t.subscribeToMouseLeave(t._indicators[e])).subscribe(),t.addSource.next(t._indicators[e]))}))},t.prototype.manageIndicatorsRemove=function(e){var t=this;Object.keys(this._indicators).forEach((function(n){e.includes(n)||(t.subs[n].unsubscribe(),delete t.subs[n],t.removeIndicator(n))}))},t.prototype.updateIndicators=function(e){var t=this;return this.ll.forCurrentObserver(!0).pipe(Object(b.a)((function(e){return e.getDiagramOnce()})),Object(O.a)((function(n){Object.keys(t._indicators).forEach((function(n){var i=e[n];if(i){var r=t._indicators[n];r.update(i),t.changeSource.next(r)}}))})))},t.prototype.handleVisibility=function(){var e=this;return Object(f.a)(this.duringInteractions(!0,!1)).pipe(Object(O.a)((function(t){e.indicators.forEach((function(t){t.visible=!0,e.changeSource.next(t)}))})))},t.prototype.removeIndicator=function(e){var t=this._indicators[e];this.removeSource.next(t),delete this._indicators[e]},t.prototype.shouldShowIndicator=function(e,t,n){var i=t.getDataItems(e);return i&&i.description&&i.description.value&&"string"==typeof i.description.value?!(!i.description.value.includes("data-item-node")&&!i.description.value.includes('data-type="diagramLinkNode"'))||!!r(i.description.value).trim():!!i&&(!(!i[a.a]||this.isContentEmpty(i[a.a].value))&&(!(!(n&&i[a.a]&&n.data&&n.data[a.a])||Object(_.isEqual)(n.data[a.a].value.ops,i[a.a].value.ops))||(!!t.dataSetId||(i.description&&this.isContentEmpty(i.description.value)?!(n.data&&n.data[a.a]&&Object(_.isEqual)(n.data[a.a].value.ops,i[a.a].value.ops)):n&&n.data&&n.data.description?!Object(_.isEqual)(n.data.description.value.ops,i.description.value.ops):!!i[a.a]))))},t.prototype.isContentEmpty=function(e){return!e||!e.ops||1===e.ops.length&&"\n"===e.ops[0].insert},t.removeForPanZoom=!0,t.\u0275fac=function(e){return new(e||t)(x.pc(u.a),x.pc(d.a),x.pc(o.a),x.pc(s.Ib),x.pc(P.a))},t.\u0275prov=x.bc({token:t,factory:t.\u0275fac}),t=Object(i.d)([Object(C.a)(),Object(i.g)("design:paramtypes",[u.a,d.a,o.a,s.Ib,P.a])],t)}(C.b)},YJWy:function(e,t,n){"use strict";n.d(t,"a",(function(){return F}));var i=n("D57K"),r=n("5xGT"),a=n("d9KY"),o=n("QoSw"),s=n("nsO7"),c=n("8j5Y"),l=n("7SLS"),d=n("EM62"),u=function(e){function t(t){var n=e.call(this)||this;return n.ll=t,n}return Object(i.e)(t,e),Object.defineProperty(t,"implements",{get:function(){return["ICommand"]},enumerable:!1,configurable:!0}),Object.defineProperty(t,"dataDefinition",{get:function(){return{type:!1}},enumerable:!1,configurable:!0}),t.prototype.execute=function(){var e=this;return this.ll.forCurrent(this.eventData.scenario===r.A.PREVIEW).getDiagramOnce().pipe(Object(c.a)((function(t){if(e.data&&e.data.type){var n=[];Object(s.map)(t.shapes,(function(t,i){t instanceof e.data.type&&n.push(i)})),e.resultData={shapeIds:n}}else e.resultData={shapeIds:Object(s.keys)(t.shapes)}})),Object(l.a)(!0))},t.\u0275fac=function(e){return new(e||t)(d.pc(o.a))},t.\u0275prov=d.bc({token:t,factory:t.\u0275fac}),t=Object(i.d)([Object(r.v)(),Object(i.g)("design:paramtypes",[o.a])],t)}(r.b);Object.defineProperty(u,"name",{value:"GetShapeIds"});var p=n("rW6H"),h=n("kXwT"),g=n("19Zn"),f=n("dKf+"),m=n("W0Mc"),b=n("d0OC"),v=function(e){function t(t,n,i){var r=e.call(this,t)||this;return r.ds=t,r.reconnectSvc=n,r.stateSvc=i,r}return Object(i.e)(t,e),Object.defineProperty(t,"dataDefinition",{get:function(){return{changes:!0}},enumerable:!1,configurable:!0}),t.prototype.prepareData=function(){var e=this;return this.resultData={},this.ds.getChangeModel(this.resourceId,this.eventData.eventId,this.eventData.scenario).pipe(Object(c.a)((function(t){var n,r,a=function(n){var i=e.data.changes[n];e.reconnectShape(n,i,t).forEach((function(t){return e.replaceOrPush(i,t)})),e.resultData[n]=i};try{for(var o=Object(i.k)(Object.keys(e.data.changes)),s=o.next();!s.done;s=o.next()){a(s.value)}}catch(c){n={error:c}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}})))},t.prototype.execute=function(){return!0},t.prototype.reconnectShape=function(e,t,n){if(!n.shapes[e])return[];var i=this.getEndpoints(e,t,n),a=this.stateSvc.get("CustomGluePoint");if(!i[0].shapeId){var o=n.shapes[e];o.defId=g.g.defId,o.version=g.g.version}return this.eventData.scenario===r.A.EXECUTE&&(i&&i[0].shapeId&&n.shapes[e].id&&this.createPickedConnection(e,i),a&&a.shapeId&&i.forEach((function(e){1!==i.length&&e.shapeId!==a.shapeId||(e.shapeId=a.shapeId,e.gluepointId=a.gluepoint.id,e.gluepointLocked=!0)}))),this.reconnectSvc.reconnect(e,n,i)},t.prototype.getEndpoints=function(e,t,n){var i=n.shapes[e].getPoints(),r=[i[0].id,Object(s.last)(i).id];return t.filter((function(e){return r.indexOf(e.id)>=0}))},t.prototype.replaceOrPush=function(e,t){var n=e.findIndex((function(e){return e.id===t.id}));-1!==n?e.splice(n,1,t):e.push(t)},t.prototype.createPickedConnection=function(e,t){var n=this.changeModel.shapes[e];if(n.getFromEndpoint(this.changeModel).shape){var i=n.getFromEndpoint(this.changeModel).shape.id,a=t[0].shapeId,o=this.changeModel.getPotentialConnections(i,a).filter((function(e){return"connector"===e.connection.type})),s=this.selectConnection(o,n);if(s){var c=r.sb.connectionId(),l=this.selectDefinition(s.definitions,n),d=s.connection;l&&(n.defId=l.defId,n.version=l.version),d&&(n.connectionId=c,this.changeModel.connections[c]=d)}}},t.prototype.selectConnection=function(e,t){return t&&e.find((function(e){return!!e.definitions.find((function(e){return e.defId===t.defId}))}))||e[0]},t.prototype.selectDefinition=function(e,t){return t&&e.find((function(e){return e.defId===t.defId}))||e[0]},t.\u0275fac=function(e){return new(e||t)(d.pc(f.a),d.pc(m.a),d.pc(r.Ib))},t.\u0275prov=d.bc({token:t,factory:t.\u0275fac}),t=Object(i.d)([Object(r.v)(),Object(i.g)("design:paramtypes",[f.a,m.a,r.Ib])],t)}(b.a);Object.defineProperty(v,"name",{value:"ReconnectConnector"});var y=n("7/v2"),O=n("X0jn"),_=n("5vYS"),C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.e)(t,e),t.prototype.prepareData=function(){var e=this,t=this.getCurrentEntities(this.data.shapeIds),n=t.map((function(e){return e.bounds})),i=this.alignShapes(n,this.data.isVertical,this.data.alignment);t.forEach((function(t,r){var a=i[r];if("shape"===t.type)e.transformShape(t.shapeId,a);else if("group"===t.type){var o=n[r],s={x:o.x-a.x,y:o.y-a.y};t.shapeIds.forEach((function(n,i){var r=t.shapeBounds[i];a.x=r.x-s.x,a.y=r.y-s.y,e.transformShape(n,a)}))}}))},t.prototype.transformShape=function(e,t){var n=this.changeModel.shapes[e];if(n.type===O.r.Connector)this.setConnectorPosition(n,t);else{var i=n.transform,r=t.x-(n.bounds.x-i.x),a=t.y-(n.bounds.y-i.y);this.setShapePosition(n,{x:r,y:a})}},t.prototype.getCurrentEntities=function(e){var t=this,n=[],r=[],a=[];return e.forEach((function(e){if(t.changeModel.isShapeInGroup([e])){if(!a.includes(e)){var i=t.changeModel.getAllShapesInGroupHierarchy([e]);a=a.concat(i);var o=t.getShapeBounds(i),s=t.getGroupedBounds(o);r.push({type:"group",shapeIds:i,shapeBounds:o,bounds:s})}}else n.push({type:"shape",shapeId:e,bounds:t.getShapeBounds([e])[0]})})),Object(i.j)(n,r)},t.prototype.getGroupedBounds=function(e){var t=r.vb.from(e[0]);return e.forEach((function(e,n){if(n>0){var i=r.vb.from(e);t.absorb(i)}})),t},t.prototype.getShapeBounds=function(e){var t,n,r=[];try{for(var a=Object(i.k)(e),o=a.next();!o.done;o=a.next()){var s=o.value,c=this.changeModel.shapes[s];c.type,O.r.Connector,r.push(c.bounds)}}catch(l){t={error:l}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return r},t.prototype.alignShapes=function(e,t,n){return t?Object(r.Ob)(e,n):Object(r.Nb)(e,n)},t.prototype.setShapePosition=function(e,t){e.x=t.x,e.y=t.y},t.prototype.setConnectorPosition=function(e,t){var n,r;if(!e.getFromEndpoint(this.changeModel).shape&&!e.getToEndpoint(this.changeModel).shape){var a=e.bounds,o=t.x-a.x,c=t.y-a.y,l=e.getPoints(),d=Object(s.cloneDeep)(l);try{for(var u=Object(i.k)(d),p=u.next();!p.done;p=u.next()){var h=p.value;h.x+=o,h.y+=c,h.c1&&(h.c1.x+=o,h.c1.y+=c),h.c2&&(h.c2.x+=o,h.c2.y+=c)}}catch(g){n={error:g}}finally{try{p&&!p.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}e.path=_.a.createPathFromPoints(d)}},t.\u0275fac=function(e){return P(e||t)},t.\u0275prov=d.bc({token:t,factory:t.\u0275fac}),t=Object(i.d)([Object(r.v)()],t)}(b.a),P=d.nc(C);Object.defineProperty(C,"name",{value:"AlignShapes"});var x=n("uWBd"),S=function(e){function t(t,n){var i=e.call(this,t)||this;return i.ds=t,i.pathingSvc=n,i}return Object(i.e)(t,e),t.prototype.prepareData=function(){var e,t;try{for(var n=Object(i.k)(this.data.connectorIds),r=n.next();!r.done;r=n.next()){var a=r.value,o=this.changeModel.shapes[a],c=this.pathingSvc.reverse(a,this.changeModel),l=_.a.createPathFromPoints(c);Object(s.isEqual)(o.path,l)||(o.path=l)}}catch(d){e={error:d}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}},t.\u0275fac=function(e){return new(e||t)(d.pc(f.a),d.pc(x.a))},t.\u0275prov=d.bc({token:t,factory:t.\u0275fac}),t=Object(i.d)([Object(r.v)(),Object(i.g)("design:paramtypes",[f.a,x.a])],t)}(b.a);Object.defineProperty(S,"name",{value:"FlipConnector"});var k=n("Cm/l"),D=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.e)(t,e),Object.defineProperty(t,"dataDefinition",{get:function(){return{shapeId:!0,vectorId:!0,points:!0}},enumerable:!1,configurable:!0}),t.prototype.prepareData=function(){var e=this.changeModel.shapes[this.data.shapeId];if(e&&!e.isLocked){var t=e.defaultBounds,n=e.transform,i=e.vectors[this.data.vectorId];i.id=this.data.vectorId,i.movement=i.movement,i.withInBounds=i.withInBounds;var r=this.data.points.map((function(r,a){r=e.diagramToShapeCordinate(r);var o=i.points[a].x.type,s=i.points[a].y.type;return{x:{type:o,value:"relative"===o?r.x/(t.width*n.scaleX):r.x},y:{type:s,value:"relative"===s?r.y/(t.height*n.scaleY):r.y}}}));i.points=r}},t.\u0275fac=function(e){return w(e||t)},t.\u0275prov=d.bc({token:t,factory:t.\u0275fac}),t=Object(i.d)([Object(r.v)()],t)}(b.a),w=d.nc(D);Object.defineProperty(D,"name",{value:"MoveVisualVector"});var T=n("Wpmq"),I=function(e){function t(t){var n=e.call(this)||this;return n.convert=t,n}return Object(i.e)(t,e),t.prototype.prepareData=function(){if(this.resultData={},this.data.shapes)for(var e in this.resultData.shapes={},this.data.shapes){var t=this.data.shapes[e];this.resultData.shapes[e]=this.convert.matrix(t)}if(this.data.connectors)for(var e in this.resultData.connectors={},this.data.connectors){var n=this.data.connectors[e],i=n.prev,r=n.next;this.resultData.connectors[e]={prev:this.convert.matrix(i),next:this.convert.matrix(r)}}},t.prototype.execute=function(){return!0},t.\u0275fac=function(e){return new(e||t)(d.pc(T.a))},t.\u0275prov=d.bc({token:t,factory:t.\u0275fac}),t=Object(i.d)([Object(r.v)(),Object(i.g)("design:paramtypes",[T.a])],t)}(r.b);Object.defineProperty(I,"name",{value:"ConvertViewportForTransform"});var j=n("9KTM"),E=function(e){function t(t,n){var i=e.call(this,t)||this;return i.ds=t,i.restriction=n,i}return Object(i.e)(t,e),t.prototype.prepareData=function(){var e=this,t=["ShapeBounds","GridService"];for(var n in this.data.shapes){var i=this.data.shapes[n].toTransform();i.skewX=0,i.skewY=0;var a=this.changeModel.shapes[n];if(!a||a.isLocked)return;var o=this.restriction.shapeTransform(a,i,t);a.x!==o.x&&(a.x=o.x),a.y!==o.y&&(a.y=o.y),a.transformSettings.hScale&&!this.isEqual(a.scaleX,o.scaleX)&&(a.scaleX=o.scaleX,!1!==a.autoResizeWidth&&(a.autoResizeWidth=!1),a.userSetWidth=a.bounds.width),a.transformSettings.vScale&&!this.isEqual(a.scaleY,o.scaleY)&&(a.scaleY=o.scaleY,!1!==a.autoResizeHeight&&(a.autoResizeHeight=!1),a.userSetHeight=a.bounds.height),a.transformSettings.rotate&&a.angle!==o.angle&&(a.angle=o.angle),0!==a.skewX&&(a.skewX=0),0!==a.skewY&&(a.skewY=0)}var c=function(t){var n=l.changeModel.shapes[t];if(!n)return{value:void 0};if(!l.shouldTransform(n))return"continue";var i=l.data.connectors[t],a=i.prev,o=i.next,c=r.fb.fromMatrix(o.appendMatrix(a.invert())),d=n.getPoints().map((function(t){return e.transformPoint(t,c)})),u=_.a.createPathFromPoints(d);Object(s.isEqual)(n.path,u)||(n.path=u)},l=this;for(var n in this.data.connectors){var d=c(n);if("object"==typeof d)return d.value}},t.prototype.isEqual=function(e,t){return parseFloat(e.toFixed(8))===parseFloat(t.toFixed(8))},t.prototype.shouldTransform=function(e){var t=e.getPoints(),n=t[0],i=t[t.length-1];return!!(!n.shapeId||this.data.shapes&&this.data.shapes[n.shapeId])&&!!(!i.shapeId||this.data.shapes&&this.data.shapes[i.shapeId])},t.prototype.transformPoint=function(e,t){var n=Object(s.cloneDeep)(e);return t.transformPoint(n.x,n.y,n),n.c1&&t.transformPoint(n.c1.x,n.c1.y,n.c1),n.c2&&t.transformPoint(n.c2.x,n.c2.y,n.c2),n.bumps=[],n},t.\u0275fac=function(e){return new(e||t)(d.pc(f.a),d.pc(j.a))},t.\u0275prov=d.bc({token:t,factory:t.\u0275fac}),t=Object(i.d)([Object(r.v)(),Object(i.g)("design:paramtypes",[f.a,j.a])],t)}(b.a);Object.defineProperty(E,"name",{value:"TransformShapes"});var M=function(e){function t(t,n){var i=e.call(this,t)||this;return i.ds=t,i.state=n,i}return Object(i.e)(t,e),t.prototype.prepareData=function(){this.addShapesToGroup(this.getShapeIds())},t.prototype.addShapesToGroup=function(e){var t=this;if(!this.changeModel.isShapeInGroup(e)){var n=[],i=[];e.forEach((function(e){if(t.changeModel.isShapeInGroup([e])){var r=t.changeModel.getGroupHierarchy(e);i.push(r[0])}else n.push(e)})),i=Object(s.uniq)(i);var a=r.sb.groupId();this.changeModel.groups[a]={shapes:n,groups:i}}},t.prototype.getShapeIds=function(){var e=void 0===this.data.shapeIds?[]:this.data.shapeIds;return(void 0===this.data.includeSelected||this.data.includeSelected)&&(e=e.concat(this.state.get("Selected"))),e},t.\u0275fac=function(e){return new(e||t)(d.pc(f.a),d.pc(r.Ib))},t.\u0275prov=d.bc({token:t,factory:t.\u0275fac}),t=Object(i.d)([Object(r.v)(),Object(i.g)("design:paramtypes",[f.a,r.Ib])],t)}(b.a);Object.defineProperty(M,"name",{value:"GroupShapes"});var R=function(e){function t(t,n){var i=e.call(this,t)||this;return i.ds=t,i.state=n,i}return Object(i.e)(t,e),t.prototype.prepareData=function(){var e=this.getShapeIds();if(this.changeModel.isShapeInGroup(e)){var t=this.changeModel.getGroupHierarchy(e[0])[0];delete this.changeModel.groups[t]}},t.prototype.getShapeIds=function(){var e=void 0===this.data.shapeIds?[]:this.data.shapeIds;return(void 0===this.data.includeSelected||this.data.includeSelected)&&(e=e.concat(this.state.get("Selected"))),e},t.\u0275fac=function(e){return new(e||t)(d.pc(f.a),d.pc(r.Ib))},t.\u0275prov=d.bc({token:t,factory:t.\u0275fac}),t=Object(i.d)([Object(r.v)(),Object(i.g)("design:paramtypes",[f.a,r.Ib])],t)}(b.a);Object.defineProperty(R,"name",{value:"UnGroupShapes"});var A=function(e){function t(t,n){var i=e.call(this,t)||this;return i.ds=t,i.stateSvc=n,i}return Object(i.e)(t,e),t.prototype.prepareData=function(){var e,t,n,a,o,s,c,l;if(this.eventData.scenario!==r.A.PREVIEW){var d={};try{for(var u=Object(i.k)(Object.keys(this.changeModel.shapes)),p=u.next();!p.done;p=u.next()){var h=p.value,g=this.changeModel.shapes[h];if(this.isConnectorModel(g))try{for(var f=(n=void 0,Object(i.k)(this.getConnectedGluepoints(g))),m=f.next();!m.done;m=f.next()){d[x=m.value]=!0}}catch(D){n={error:D}}finally{try{m&&!m.done&&(a=f.return)&&a.call(f)}finally{if(n)throw n.error}}else try{for(var b=(o=void 0,Object(i.k)(Object.keys(g.gluepoints))),v=b.next();!v.done;v=b.next()){var y=v.value,O=g.gluepoints[y],_=g.id+"."+y;"custom"!==O.type||d[_]||(d[_]=!1)}}catch(w){o={error:w}}finally{try{v&&!v.done&&(s=b.return)&&s.call(b)}finally{if(o)throw o.error}}}}catch(T){e={error:T}}finally{try{p&&!p.done&&(t=u.return)&&t.call(u)}finally{if(e)throw e.error}}try{for(var C=Object(i.k)(Object.keys(d)),P=C.next();!P.done;P=C.next()){var x;if(!d[x=P.value]){var S=Object(i.h)(x.split("."),2);h=S[0],y=S[1];delete(g=this.changeModel.shapes[h]).gluepoints[y]}}}catch(I){c={error:I}}finally{try{P&&!P.done&&(l=C.return)&&l.call(C)}finally{if(c)throw c.error}}var k=this.stateSvc.get("CustomGluePoint");if(k&&k.shapeId&&k.gluepoint)(g=this.changeModel.shapes[k.shapeId]).gluepoints[k.gluepoint.id]=k.gluepoint}},t.prototype.isConnectorModel=function(e){return e.type===O.r.Connector},t.prototype.getConnectedGluepoints=function(e){var t,n,r=[],a=e.getPoints(),o=[a[0],a[a.length-1]],s=function(t){var n=c.data.changes[e.id];n&&n.find((function(e){return e.id===t.id}))||r.push(t.shapeId+"."+t.gluepointId)},c=this;try{for(var l=Object(i.k)(o),d=l.next();!d.done;d=l.next()){s(d.value)}}catch(u){t={error:u}}finally{try{d&&!d.done&&(n=l.return)&&n.call(l)}finally{if(t)throw t.error}}return r},t.\u0275fac=function(e){return new(e||t)(d.pc(f.a),d.pc(r.Ib))},t.\u0275prov=d.bc({token:t,factory:t.\u0275fac}),t=Object(i.d)([Object(r.v)(),Object(i.g)("design:paramtypes",[f.a,r.Ib])],t)}(b.a);Object.defineProperty(A,"name",{value:"UpdateCustomGluepoints"});var L=n("icO7"),N=n("phng"),U=n("OnFf"),F=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.e)(t,e),t.registerSelectAll=function(e){e.mapSequence(t.selectAll).add(u).add(a.a)},t.registerMoveVector=function(e){e.mapSequence(t.moveVisualVector).add(h.a).add(D).add(L.a,{alter:function(e){return"RunExecutionStep"===e.stepName&&"completed"===e.stepStatus}})},t.registerTransformShapesAndConnectors=function(e){e.mapSequence(t.transformShapesAndConnectors).add(I).add(E).add(U.a,{transform:function(e){return{shapeIds:Object.keys(e.eventData.shapes||{})}}}).add(k.a,{transform:function(e){var t;return e.eventInfo.scenario===r.A.PREVIEW?{changes:{}}:{changes:(t={},t[e.resultData[0].id]={},t)}}}).add(L.a,{alter:function(e){return"RunExecutionStep"===e.stepName&&"completed"===e.stepStatus}})},t.registerMoveConnectorEndPointOnViewport=function(e){e.mapSequence(t.moveConnectorEndPointOnViewport).add(h.a).add(A,{transform:function(e){var t,n=e.resultData[0];return{changes:(t={},t[n.id]=n.points,t)}}}).add(v,{transform:function(e){var t,n=e.resultData[0];return{changes:(t={},t[n.id]=n.points,t)}}}).add(p.a,{transform:function(e){return{changes:e.resultData[2]}}}).add(k.a,{transform:function(e){if(e.eventInfo.scenario===r.A.PREVIEW)return{changes:{}};var t=e.resultData[2],n={};return Object.keys(t).forEach((function(e){return n[e]={}})),{changes:n}}}).add(y.a,{transform:function(e){var t;return{changes:(t={},t[e.resultData[0].id]=null,t),updateConnections:e.eventData.updateConnections,updateDefinitions:e.eventData.updateDefinitions}}}).add(L.a,{alter:function(e){return"RunExecutionStep"===e.stepName&&"completed"===e.stepStatus}})},t.registerMoveConnectorPathPointOnViewport=function(e){e.mapSequence(t.moveConnectorPathPointOnViewport).add(h.a).add(p.a,{transform:function(e){var t,n=e.resultData[0];return{changes:(t={},t[n.id]=n.points,t)}}}).add(k.a,{transform:function(e){var t;return e.eventInfo.scenario===r.A.PREVIEW?{changes:{}}:{changes:(t={},t[e.resultData[0].id]={},t)}}}).add(L.a,{alter:function(e){return"RunExecutionStep"===e.stepName&&"completed"===e.stepStatus}})},t.registerChangeConnectedGluepoint=function(e){e.mapSequence(t.changeConnectedGluepoint).add(v,{transform:function(e){var t,n=e.data[0],i={id:n.endpointId,shapeId:n.shapeId,gluepointId:n.gluepointId,gluepointLocked:!0};return{changes:(t={},t[n.connectorId]=[i],t)}}}).add(p.a,{transform:function(e){return{changes:e.resultData[0]}}}).add(k.a,{transform:function(e){if(e.eventInfo.scenario===r.A.PREVIEW)return{changes:{}};var t=e.resultData[0],n={};return Object.keys(t).forEach((function(e){return n[e]={}})),{changes:n}}}).add(L.a,{alter:function(e){return"RunExecutionStep"===e.stepName&&"completed"===e.stepStatus}})},t.registerFlipConnector=function(e){e.mapSequence(t.flipConnector).add(S).add(L.a,{alter:function(e){return"RunExecutionStep"===e.stepName&&"completed"===e.stepStatus}})},t.registerAlignShapes=function(e){e.mapSequence(this.alignShapes).add(N.a).add(C,{transform:function(e){return{shapeIds:e.resultData[0].shapeIds,isVertical:e.eventData.isVertical,alignment:e.eventData.alignment}}}).add(L.a,{alter:function(e){return"RunExecutionStep"===e.stepName&&"completed"===e.stepStatus}})},t.registerGroupShapes=function(e){e.mapSequence(t.groupShapes).add(N.a).add(M,{transform:function(e){return{shapeIds:e.resultData[0].shapeIds,includeSelected:!1}}}).add(L.a,{alter:function(e){return"RunExecutionStep"===e.stepName&&"completed"===e.stepStatus}})},t.registerUnGroupShapes=function(e){e.mapSequence(t.unGroupShapes).add(N.a).add(R,{transform:function(e){return{shapeIds:e.resultData[0].shapeIds,includeSelected:!1}}}).add(L.a,{alter:function(e){return"RunExecutionStep"===e.stepName&&"completed"===e.stepStatus}})},t.selectAll=new t("SelectAll"),t.moveVisualVector=new t("MoveVisualVector"),t.transformShapesAndConnectors=new t("TransformShapesAndConnectors"),t.moveConnectorEndPointOnViewport=new t("MoveConnectorEndPointOnViewport"),t.moveConnectorPathPointOnViewport=new t("MoveConnectorPathPointOnViewport"),t.changeConnectedGluepoint=new t("ChangeConnectedGluepoint"),t.flipConnector=new t("FlipConnector"),t.alignShapes=new t("AlignShapes"),t.groupShapes=new t("GroupShapes"),t.unGroupShapes=new t("UnGroupShapes"),t}(r.d)},f6YR:function(e,t,n){"use strict";n.d(t,"a",(function(){return I}));var i=n("D57K"),r=n("5xGT"),a=n("hX56"),o=n("nsO7"),s=n("ZTXN"),c=n("g6G6"),l=n("ROBh"),d=n("KTx3"),u=n("6Oco"),p=n("8j5Y"),h=n("TLy2"),g=n("YtkY"),f=n("Ohay"),m=n("5uDM"),b=n("xVbo"),v=n("O6K7"),y=n("yn08"),O=n("w1VY"),_=n("Wpmq"),C=n("QoSw"),P=n("3+4Q"),x=n("flPR"),S=n("h1tj"),k=function(e){function t(t){var n=e.call(this)||this;return n.model=t,n.prepare(),n}return Object(i.e)(t,e),t.prototype.destroy=function(){},t.prototype.prepare=function(){var e=new S.Shape;e.graphics.clear(),e.graphics.beginFill(this.model.resolved?t.RESOLVED_ICON_COLOR:t.ICON_COLOR),e.graphics.beginStroke("#FFFFFF"),e.graphics.setStrokeStyle(2),e.graphics.drawCircle(0,0,15),e.graphics.endStroke(),e.graphics.endFill(),e.shadow=new S.Shadow("rgba(0, 0, 0, 0.25)",0,2,3),this.addChild(e);var n=new S.Bitmap('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="22.84" height="17.07"><path fill="rgb(255, 255, 255)" d="M22.84,7.46C22.84,3.34,17.73,0,11.42,0S0,3.34,0,7.46s5.11,7.46,11.42,7.46a17.57,17.57,0,0,0,3.21-.3l4.3,2.43a.17.17,0,0,0,.25-.15l0-3.95C21.42,11.59,22.84,9.63,22.84,7.46Z" /></svg>');n.scaleX=.8,n.scaleY=.8,n.x=-9,n.y=-6,this.addChild(n)},t.ICON_COLOR="#F39C12",t.RESOLVED_ICON_COLOR="#7e7e7e",t}(S.Container),D=n("4y1S"),w=n("qMyy"),T=n("EM62"),I=function(e){function t(t,n,i,r,a,o,c){var l=e.call(this,n)||this;return l.ll=t,l.state=n,l.datastore=i,l.commandService=r,l.diagToViewport=a,l.viewToDiagram=o,l.userLocator=c,l.addSource=new s.a,l.removeSource=new s.a,l.changeSource=new s.a,l.shapeComments={},l.diagramComments={},l}var n;return Object(i.e)(t,e),n=t,Object.defineProperty(t.prototype,"indicators",{get:function(){return Object(i.j)(Object(o.values)(this.diagramComments),Object(o.flatten)(Object(o.values)(this.shapeComments).map((function(e){return Object(o.values)(e)}))))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locator",{get:function(){return this.ll.forCurrent(!0)},enumerable:!1,configurable:!0}),t.prototype.initialize=function(){var e=this;this.subs.push(this.state.changes("CurrentDiagram").pipe(Object(p.a)((function(){e.hideCommentThreadView(),e.removeAllIndicators()})),Object(h.a)((function(){return Object(c.a)(e.listenToCreateEvents(),e.listenToSingleCommentInsertChanges(),e.listenToCommentUpdateChanges(),e.listenToOpenPanelChanges().pipe(Object(h.a)((function(t){return e.userLocator.getCommentToggleState().pipe(Object(h.a)((function(n){return t||n?Object(c.a)(e.listenToCommentInsertChanges(),e.listenToViewportChanges(),e.listenToDiagramChanges(),e.listenToResolvedCommentChanges()):(e.hideCommentThreadView(),e.removeAllIndicators())})))}))))}))).subscribe())},t.prototype.createAddSource=function(){return this.addSource},t.prototype.createRemoveSource=function(){return this.removeSource},t.prototype.createChangeSource=function(){return this.changeSource},t.prototype.removeResolvedCommentIndicators=function(){var e,t,n,r,a,o;try{for(var s=Object(i.k)(Object.keys(this.diagramComments)),c=s.next();!c.done;c=s.next()){var l=c.value;!(f=this.diagramComments[l]).model.parentId&&f.model.resolved&&(this.removeSource.next(f),delete this.diagramComments[l])}}catch(m){e={error:m}}finally{try{c&&!c.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}try{for(var d=Object(i.k)(Object.keys(this.shapeComments)),u=d.next();!u.done;u=d.next()){var p=u.value;try{for(var h=(a=void 0,Object(i.k)(Object.keys(this.shapeComments[p]))),g=h.next();!g.done;g=h.next()){var f;l=g.value;!(f=this.shapeComments[p][l]).model.parentId&&f.model.resolved&&(this.removeSource.next(f),delete this.shapeComments[p][l])}}catch(b){a={error:b}}finally{try{g&&!g.done&&(o=h.return)&&o.call(h)}finally{if(a)throw a.error}}}}catch(v){n={error:v}}finally{try{u&&!u.done&&(r=d.return)&&r.call(d)}finally{if(n)throw n.error}}},t.prototype.listenToOpenPanelChanges=function(){return this.state.changes(n.SIDEBAR_STATE_KEY).pipe(Object(g.a)((function(e){return e===n.SIDEBAR_STATE_VAL})),Object(f.a)())},t.prototype.listenToCommentInsertChanges=function(){var e=this,t=this.state.get("CurrentDiagram");return Object(c.a)(this.datastore.findLatest(P.a,{diagramId:t}).pipe(Object(g.a)((function(e){return{type:"insert",docs:e}}))),this.datastore.watch(P.a,{diagramId:t}).pipe(Object(m.a)((function(e){return e.docs?r.L.build({docs:P.a},e):Object(l.a)(e)})))).pipe(Object(b.a)((function(e){return"insert"===e.type||"remove"===e.type})),Object(p.a)((function(t){"insert"===t.type?t.docs.filter((function(e){return!e.parentId&&!e.resolved})).forEach((function(t){return e.createCommentIndicator(t)})):"remove"===t.type&&t.docs.forEach((function(t){return e.removeCommentIndicator(t)}))})))},t.prototype.listenToCommentUpdateChanges=function(){var e=this,t=this.state.get("CurrentDiagram");return Object(c.a)(this.datastore.findLatest(P.a,{diagramId:t}).pipe(Object(g.a)((function(e){return{type:"insert",docs:e}}))),this.datastore.watch(P.a,{diagramId:t}).pipe(Object(m.a)((function(e){return e.docs?r.L.build({docs:P.a},e):Object(l.a)(e)})))).pipe(Object(b.a)((function(e){return"update"===e.type})),Object(p.a)((function(t){t.docs.filter((function(e){return e.resolved})).forEach((function(t){e.removeCommentIndicator(t),e.singleComment&&t.id===e.singleComment.id&&(e.singleComment=null)}))})))},t.prototype.listenToViewportChanges=function(){var e=this;return Object(c.a)(this.state.changes("DiagramPan"),this.state.changes("DiagramZoomLevel")).pipe(Object(h.a)((function(){return e.locator.getDiagramOnce()})),Object(p.a)((function(t){return e.updateIndicatorPositions(t)})))},t.prototype.listenToDiagramChanges=function(){var e=this;return this.locator.getDiagramChanges().pipe(Object(p.a)((function(t){var n,r,a,o;if(t.split.shapes)try{for(var s=Object(i.k)(Object.keys(t.split.shapes)),c=s.next();!c.done;c=s.next()){var l=c.value;if(e.shapeComments[l])try{for(var d=(a=void 0,Object(i.k)(Object.keys(e.shapeComments[l]))),u=d.next();!u.done;u=d.next()){var p=u.value,h=e.shapeComments[l][p];e.positionShapeCommentIndicator(h,t.model.shapes[l]),e.changeSource.next(h)}}catch(g){a={error:g}}finally{try{u&&!u.done&&(o=d.return)&&o.call(d)}finally{if(a)throw a.error}}}}catch(f){n={error:f}}finally{try{c&&!c.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}})))},t.prototype.listenToCreateEvents=function(){var e=this;return Object(d.a)(this.indicatorLayer,v.b.CreateComment).pipe(Object(p.a)((function(t){e.showCommentThreadView(t.getShapeId(),t.getPosition()),e.switchToNormalState()})))},t.prototype.listenToResolvedCommentChanges=function(){var e=this;return this.state.changes("CommentThreadData").pipe(Object(p.a)((function(t){e.removeResolvedCommentIndicators(),t.comments&&t.comments.forEach((function(t){!t.parentId&&t.resolved&&e.createCommentIndicator(t)}))})))},t.prototype.removeAllIndicators=function(){var e,t;try{for(var n=Object(i.k)(this.indicators),r=n.next();!r.done;r=n.next()){var a=r.value;this.removeSource.next(a),a.destroy()}}catch(o){e={error:o}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return this.shapeComments={},this.diagramComments={},Object(u.b)()},t.prototype.updateIndicatorPositions=function(e){var t,n,r,a,o,s;try{for(var c=Object(i.k)(Object.keys(this.diagramComments)),l=c.next();!l.done;l=c.next()){var d=l.value,u=this.diagramComments[d];this.positionDiagramCommentIndicator(u),this.changeSource.next(u)}}catch(b){t={error:b}}finally{try{l&&!l.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}try{for(var p=Object(i.k)(Object.keys(this.shapeComments)),h=p.next();!h.done;h=p.next()){var g=h.value;try{for(var f=(o=void 0,Object(i.k)(Object.keys(this.shapeComments[g]))),m=f.next();!m.done;m=f.next()){d=m.value,u=this.shapeComments[g][d];this.positionShapeCommentIndicator(u,e.shapes[g]),this.changeSource.next(u)}}catch(v){o={error:v}}finally{try{m&&!m.done&&(s=f.return)&&s.call(f)}finally{if(o)throw o.error}}}}catch(y){r={error:y}}finally{try{h&&!h.done&&(a=p.return)&&a.call(p)}finally{if(r)throw r.error}}},t.prototype.listenToSingleCommentInsertChanges=function(){var e=this;return this.state.changes("CommentThreadData").pipe(Object(h.a)((function(t){return e.listenToOpenPanelChanges().pipe(Object(b.a)((function(e){return!e})),Object(h.a)((function(){return t&&t.visible&&t.threadId&&t.comments.length?(e.createSingleCommentIndicator(t.comments[0]),Object(u.b)()):t&&!t.visible?e.userLocator.getCommentToggleState().pipe(Object(f.a)(),Object(g.a)((function(t){!t&&e.singleComment&&e.removeSingleCommentIndicator()}))):Object(u.b)()})))})))},t.prototype.createCommentIndicator=function(e){e.shapeId?this.createShapeCommentIndicator(e):this.createDiagramCommentIndicator(e)},t.prototype.createSingleCommentIndicator=function(e){this.singleComment=e,this.createCommentIndicator(e)},t.prototype.createDiagramCommentIndicator=function(e){if(e.locOnDiagram&&(!this.diagramComments[e.id]||this.diagramComments[e.id].model.resolved!==e.resolved)){var t=new k(e);this.positionDiagramCommentIndicator(t),this.setupCommentInteractions(t),this.diagramComments[e.id]=t,this.addSource.next(t)}},t.prototype.positionDiagramCommentIndicator=function(e){e.x=this.diagToViewport.x(e.model.locOnDiagram.x),e.y=this.diagToViewport.y(e.model.locOnDiagram.y)},t.prototype.createShapeCommentIndicator=function(e){var t=this;this.locator.getShapeOnce(e.shapeId).subscribe((function(n){if(t.shapeComments[e.shapeId]||(t.shapeComments[e.shapeId]={}),!t.shapeComments[e.shapeId][e.id]||t.shapeComments[e.shapeId][e.id].model.resolved!==e.resolved){var i=new k(e);t.positionShapeCommentIndicator(i,n),t.setupCommentInteractions(i),t.shapeComments[e.shapeId][e.id]=i,t.addSource.next(i)}}))},t.prototype.positionShapeCommentIndicator=function(e,t){if(!t)return this.positionDiagramCommentIndicator(e);var n=r.ob.onRect(e.model.locOnShape,t.defaultBounds,t.transform);e.x=this.diagToViewport.x(n.x),e.y=this.diagToViewport.y(n.y)},t.prototype.removeCommentIndicator=function(e){var t=this.indicators.find((function(t){return t.model.id===e.id}));this.removeSource.next(t),this.hideCommentThreadView()},t.prototype.removeSingleCommentIndicator=function(){var e,t,n=this,r=this.singleComment.id,a=this.indicators.find((function(e){return e.model.id===n.singleComment.id}));if(this.removeSource.next(a),this.singleComment=null,this.diagramComments[r])delete this.diagramComments[r];else try{for(var o=Object(i.k)(Object.keys(this.shapeComments)),s=o.next();!s.done;s=o.next()){var c=s.value;this.shapeComments[c][r]&&delete this.shapeComments[c][r]}}catch(l){e={error:l}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}},t.prototype.setupCommentInteractions=function(e){var t=this;this.subs.push(Object(d.a)(e,"click").subscribe((function(){r.Kb.track("right.comment.show",{value1Type:"trigger",value1:"canvas"});var n=e.model,i={visible:!0,threadId:n.id,comments:[n]};t.state.set("CommentThreadData",i)})))},t.prototype.showCommentThreadView=function(e,t){var n={visible:!0,shapeId:e,position:{x:this.viewToDiagram.x(t.x),y:this.viewToDiagram.y(t.y)}};this.state.set("CommentThreadData",n)},t.prototype.switchToNormalState=function(){this.commandService.dispatch(w.a.changeMouseControlState,{state:y.b.Normal})},t.prototype.hideCommentThreadView=function(){this.state.set("CommentThreadData",{})},t.SIDEBAR_STATE_KEY="RightSidebarPanel",t.SIDEBAR_STATE_VAL="diagramcomments",t.\u0275fac=function(e){return new(e||t)(T.pc(C.a),T.pc(r.Ib),T.pc(a.b),T.pc(r.B),T.pc(O.a),T.pc(_.a),T.pc(D.y))},t.\u0275prov=T.bc({token:t,factory:t.\u0275fac}),t=n=Object(i.d)([Object(x.a)(),Object(i.g)("design:paramtypes",[C.a,r.Ib,a.b,r.B,O.a,_.a,D.y])],t)}(x.b)},foQ2:function(e,t,n){"use strict";n.d(t,"b",(function(){return ut})),n.d(t,"c",(function(){return pt})),n.d(t,"a",(function(){return ft}));var i,r=n("D57K"),a=n("C5+t"),o=n("5xGT"),s=n("NNJu"),c=n("X0jn"),l=n("Jzy8"),d=n("xnGY"),u=n("4y1S"),p=n("nsO7"),h=n("C05f"),g=n("ZTXN"),f=n("ROBh"),m=n("g6G6"),b=n("6Oco"),v=n("rYDR"),y=n("8j5Y"),O=n("J+dc"),_=n("TLy2"),C=n("xVbo"),P=n("Ohay"),x=n("TaSY"),S=n("YtkY"),k=n("0Woy"),D=n("7SLS"),w=n("jIqt"),T=n("mWib"),I=n("QoSw"),j=n("c7W3"),E=n("Q4Fx"),M=n("S0Xf"),R=n("EM62"),A=n("HM3f"),L=n("qMyy"),N=n("yn08"),U=n("RTAa"),F=n("Wrqg"),B=n("jrEQ"),H=n("m2qP"),z=n("s2Ay");!function(e){e.DIAGRAM="diagram",e.PROJECT="project"}(i||(i={}));var G=function(){function e(e,t,n,i){this.commandService=e,this.state=t,this.modelSubManager=n,this.diagramNavigation=i,this.onDiagramListChange=new R.t,this.onDiagramSearchInProgress=new R.t,this.debounceTime=500,this.subs=[],this.searchText=new h.a(""),this.searchResults$=new g.a}return e.prototype.navToSelectedDiagram=function(e){var t=this,n=this.state.get("CurrentDiagram");this.state.set("SelectedLeftPanel","none"),"start"!==n?n===e?this.state.set("SelectedFloatingPanel","quick-toolbar"):this.modelSubManager.stop(this.state.get("CurrentDiagram"),!0).pipe(Object(O.a)(1),Object(y.a)((function(){t.state.get("InterfaceControlState")===N.a.View?t.diagramNavigation.navigateToDiagram(e,"view"):t.diagramNavigation.navigateToDiagram(e,"edit")}))).subscribe():this.state.get("InterfaceControlState")===N.a.View?this.diagramNavigation.navigateToDiagram(e,"view"):this.diagramNavigation.navigateToDiagram(e,"edit")},e.prototype.onSearchBoxClick=function(){o.Kb.track("left.folder.search.click",{value1Type:"location",value1:""+this.state.get("FolderPanelSelectedTab")})},e.prototype.ngOnInit=function(){var e=this;this.searchResults$.next([]),this.subs.push(this.listenToSearchTextChanges().subscribe((function(t){return e.handleSearchCommandResponse(e.searchText.getValue(),t)})))},e.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},e.prototype.clearSearch=function(){this.searchTextInput.clear()},e.prototype.listenToSearchTextChanges=function(){var e=this;return this.searchText.pipe(Object(T.a)(this.debounceTime),Object(P.a)(),Object(_.a)((function(t){if(e.onDiagramSearchInProgress.emit(!0),""===t){return e.onDiagramListChange.emit({search:!1,searchKey:"",result:{}}),Object(f.a)({})}var n={q:t,type:i.DIAGRAM};return e.dispatchSearchDiagramCommand(n)})))},e.prototype.dispatchSearchDiagramCommand=function(e){return this.commandService.dispatch(L.a.searchDiagram,e).pipe(Object(x.a)())},e.prototype.handleSearchCommandResponse=function(e,t){var n=this;if(!t.resultData||t.resultData.length<=0)this.searchResults$.next([]);else{var i=JSON.parse(t.resultData[0]);this.searchResults$.next(i);var r={};i.forEach((function(e){var t=e.static.project,i=n.state.get("CurrentUser"),a=e.static.collabs.find((function(e){return e.role===B.b.OWNER}));t===H.b.HOME&&a.id!==i&&(t=H.b.SHARED_HOME),r[t]||(r[t]=[]),r[t].push(e.id)})),this.onDiagramListChange.emit({search:!0,searchKey:e,result:r})}},e.\u0275fac=function(t){return new(t||e)(R.fc(o.B),R.fc(o.Ib),R.fc(d.d),R.fc(U.a))},e.\u0275cmp=R.Zb({type:e,selectors:[["search-bar"]],viewQuery:function(e,t){var n;(1&e&&(R.Wc(o.t,!0),R.jd(F.a,!0)),2&e)&&(R.Lc(n=R.uc())&&(t.collapsibleMenu=n.first),R.Lc(n=R.uc())&&(t.searchTextInput=n.first))},outputs:{onDiagramListChange:"onDiagramListChange",onDiagramSearchInProgress:"onDiagramSearchInProgress"},decls:4,vars:5,consts:[["icon","search-thin","data-testid","fp-search-input",1,"folder-panel-search",3,"showClearButton","emitForInputChange","placeholder","updateText","click"]],template:function(e,t){1&e&&(R.jc(0),R.lc(1,"section"),R.lc(2,"text-input",0),R.tc("updateText",(function(e){return t.searchText.next(e)}))("click",(function(){return t.onSearchBoxClick()})),R.yc(3,"translate"),R.kc(),R.kc(),R.ic()),2&e&&(R.Sb(2),R.Dc("placeholder",R.zc(3,3,"PLACEHOLDERS.SEARCH")),R.Cc("showClearButton",!0)("emitForInputChange",!0))},directives:[F.a],pipes:[z.d],styles:[".list-item[_ngcontent-%COMP%]{display:flex;padding:5px;align-items:center;width:202px}.list-item[_ngcontent-%COMP%]   .nu-icon[_ngcontent-%COMP%]{margin-right:5px}"]}),e}(),V=n("2kYt"),Y=n("K0+f");function W(e,t){if(1&e&&(R.lc(0,"div",3),R.ed(1),R.yc(2,"async"),R.kc()),2&e){var n=R.xc(2);R.Sb(1),R.fd(R.zc(2,1,n.searchMatchCount))}}var K=function(e){return{value1Type:"projectId",value1:e}},q=function(e){return{event:"left.folder.folder.click",data:e}};function X(e,t){if(1&e){var n=R.mc();R.lc(0,"div",1),R.tc("click",(function(){return R.Pc(n),R.xc().setAsSelected()})),R.yc(1,"async"),R.lc(2,"a"),R.ed(3),R.kc(),R.cd(4,W,3,3,"div",2),R.yc(5,"async"),R.kc()}if(2&e){var i=R.xc();R.Xb("active",R.zc(1,5,i.isSelected)),R.Cc("trackAction",R.Hc(11,q,R.Hc(9,K,i.id))),R.Sb(3),R.fd(i.name),R.Sb(1),R.Cc("ngIf",R.zc(5,7,i.searchMatchCount))}}var Z=function(){function e(e){this.state=e,this.searchMatchCount=new h.a(0),this.visible=new h.a(!0),this.isSelected=new h.a(!0),this.subs=[]}return e.prototype.setAsSelected=function(){this.state.set("FolderPanelSelectedProject",this.id)},e.prototype.ngOnInit=function(){this.subs.push(this.subscribeToSearchMatches().subscribe(),this.subscribeToFolderPanelChanges().subscribe())},e.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},e.prototype.subscribeToFolderPanelChanges=function(){var e=this;return Object(A.b)([this.state.changes("FolderPanelSelectedTab"),this.state.changes("FolderPanelSelectedProject")]).pipe(Object(y.a)((function(t){var n=Object(r.h)(t,2),i=n[0],a=n[1];return e.isSelected.next("recent"!==i&&a===e.id)})))},e.prototype.subscribeToSearchMatches=function(){var e=this;return this.searchMatches.pipe(Object(y.a)((function(t){if(t.hasOwnProperty("search")&&t.hasOwnProperty("result")){var n=Object.keys(t.result).includes(e.id)?t.result[e.id].length:0;e.searchMatchCount.next(n),t.search&&n>0||!t.search||e.state.get("FolderPanelSelectedProject")===e.id?e.visible.next(!0):e.visible.next(!1)}})))},e.\u0275fac=function(t){return new(t||e)(R.fc(o.Ib))},e.\u0275cmp=R.Zb({type:e,selectors:[["project-list-item"]],inputs:{name:"name",id:"id",searchMatches:"searchMatches"},decls:2,vars:3,consts:[["class","list-item sidebar-item",3,"trackAction","active","click",4,"ngIf"],[1,"list-item","sidebar-item",3,"trackAction","click"],["class","search-count",4,"ngIf"],[1,"search-count"]],template:function(e,t){1&e&&(R.cd(0,X,6,13,"div",0),R.yc(1,"async")),2&e&&R.Cc("ngIf",R.zc(1,1,t.visible))},directives:[V.t,Y.a],pipes:[V.b],styles:[".list-item[_ngcontent-%COMP%]{display:flex;padding:10px 5px 10px 35px;align-items:center;width:100%}.list-item[_ngcontent-%COMP%]   .nu-icon[_ngcontent-%COMP%]{margin-right:5px}.list-item[_ngcontent-%COMP%]   .search-count[_ngcontent-%COMP%]{margin-left:auto;color:#29947f;font-weight:700;font-size:10px;float:right;min-width:14px;padding:2px;border-radius:100%;text-align:center}.list-item.active[_ngcontent-%COMP%], .list-item[_ngcontent-%COMP%]   .search-count[_ngcontent-%COMP%]{background-color:rgba(81,192,170,.2)}"],changeDetection:0}),e}();function J(e,t){if(1&e&&(R.gc(0,"project-list-item",2),R.yc(1,"translate")),2&e){var n=t.$implicit,i=R.xc();R.Cc("id",null==n?null:n.id)("name",R.zc(1,3,null==n?null:n.name))("searchMatches",i.searchMatches)}}var Q=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=R.Zb({type:e,selectors:[["project-list"]],inputs:{projectList:"projectList",searchMatches:"searchMatches"},decls:3,vars:3,consts:[[1,"project-list-container"],[3,"id","name","searchMatches",4,"ngFor","ngForOf"],[3,"id","name","searchMatches"]],template:function(e,t){1&e&&(R.lc(0,"div",0),R.cd(1,J,2,5,"project-list-item",1),R.yc(2,"async"),R.kc()),2&e&&(R.Sb(1),R.Cc("ngForOf",R.zc(2,1,t.projectList)))},directives:[V.s,Z],pipes:[V.b,z.d],styles:[".project-list-container[_ngcontent-%COMP%]{height:-webkit-min-content;height:-moz-min-content;height:min-content}.project-list-container[_ngcontent-%COMP%]  .ps-content{padding:0}"],changeDetection:0}),e}(),$=function(){function e(e){this.translate=e}return e.\u0275fac=function(t){return new(t||e)(R.fc(z.e))},e.\u0275cmp=R.Zb({type:e,selectors:[["project-bar-item"]],inputs:{isUserPaused:"isUserPaused",projectList:"projectList",searchMatches:"searchMatches"},decls:2,vars:2,consts:[[3,"projectList","searchMatches"]],template:function(e,t){1&e&&(R.jc(0),R.gc(1,"project-list",0),R.ic()),2&e&&(R.Sb(1),R.Cc("projectList",t.projectList)("searchMatches",t.searchMatches))},directives:[Q],styles:[".project-bar-item.selected[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.2)}"],changeDetection:0}),e}(),ee=["componentContainer"],te=function(e,t){return{expanded:e,collapsed:t}},ne=function(e,t){return{"light-nv-blue":e,"medium-grey":t}},ie=function(e){function t(t,n,i,r,a,o,s,c,l){var d=e.call(this,t,n,i,r)||this;return d.componentFactoryResolver=t,d.injector=n,d.cdr=i,d.translate=r,d.commandService=a,d.planPermManager=o,d.state=s,d.userLocator=c,d.modalController=l,d.removable=!1,d.hideHeaderButton=!1,d.shareWithTeam=!1,d.visible=new h.a(!0),d.secondaryMenu=!1,d.isUserPaused=new h.a(!1),d.subs=[],d.toggleChild=new R.t,d.removeChild=new R.t,d.subs.push(d.checkUserPauseStatus().subscribe()),d}return Object(r.e)(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this.menuItem.id},enumerable:!1,configurable:!0}),t.prototype.ngOnInit=function(){var e=this;Object(A.b)(this.searchMatches,this.projectList).pipe(Object(S.a)((function(e){var t=Object(r.h)(e,2);return{searchMatches:t[0],projectList:t[1]}}))).subscribe((function(t){return e.filterFolders(t)}))},t.prototype.filterFolders=function(e){var t=this;if(e.searchMatches.search){var n=Object.keys(e.searchMatches.result),i=e.projectList.some((function(e){return n.includes(e.id)||t.state.get("FolderPanelSelectedProject")===e.id}));this.visible.next(i)}else this.visible.next(!0)},t.prototype.createProject=function(){var e,t=this;if(this.planPermManager.check([c.p.PROJECT_CREATE]))e=l.w.createProject;else{if(!this.planPermManager.check([c.p.PROJECT_CREATE_TEAM])){var n={id:c.p.PROJECT_CREATE,iframeType:u.t.CreateFolder,buttons:[{type:"upgrade",clickHandler:function(){}}],integrationContext:{embedded:this.state.get("ApplicationIsEmbedded"),environment:this.state.get("PluginApp")}};return void this.modalController.show(u.u,{inputs:{dialogData:n}})}e=l.w.createProjectTeam}var i=o.sb.projectId();return(this.shareWithTeam?this.commandService.dispatch(l.w.createProjectTeam,{id:i}):this.commandService.dispatch(e,{id:i})).subscribe({error:function(e){t.handleProjectPermissionError(e)},complete:function(){t.state.set("FolderPanelSelectedProject",i)}})},t.prototype.checkUserPauseStatus=function(){var e=this;return this.userLocator.isUserPaused().pipe(Object(P.a)(),Object(y.a)((function(t){return e.isUserPaused.next(t)})))},t.prototype.ngOnDestroy=function(){for(this.toggleChild=null,this.removeChild=null,this.menuItem=null,this._parent=null,this._isOpen=!1;this.subs.length;)this.subs.pop().unsubscribe()},t.prototype.toggle=function(e){this.toggleChild.emit(this)},t.prototype.handleProjectPermissionError=function(e){if(1624===e.code||1608===e.code){var t={id:c.p.PROJECT_CREATE,iframeType:u.t.CreateFolder,buttons:[{type:"upgrade",clickHandler:function(){}}],integrationContext:{embedded:this.state.get("ApplicationIsEmbedded"),environment:this.state.get("PluginApp")}};this.modalController.show(u.u,{inputs:{dialogData:t}})}},t.\u0275fac=function(e){return new(e||t)(R.fc(R.m),R.fc(R.C),R.fc(R.j),R.fc(z.e),R.fc(o.B),R.fc(u.m),R.fc(o.Ib),R.fc(u.y),R.fc(o.gb))},t.\u0275cmp=R.Zb({type:t,selectors:[["project-collapsible-menu-item"]],viewQuery:function(e,t){var n;(1&e&&R.Wc(ee,!0,R.hb),2&e)&&(R.Lc(n=R.uc())&&(t.componentContainer=n.first))},inputs:{removable:"removable",hideHeaderButton:"hideHeaderButton",shareWithTeam:"shareWithTeam",projectList:"projectList",searchMatches:"searchMatches",id:"id"},outputs:{toggleChild:"toggleChild",removeChild:"removeChild"},features:[R.Pb],decls:13,vars:14,consts:[[1,"col-menu-item-container",3,"ngClass","hidden"],[1,"col-menu-item-heading","fx-no-selection"],[1,"col-menu-item-heading-inner",3,"click"],[1,"col-menu-item-icon"],[1,"nu-icon","nu-ic-close-thin",3,"ngClass"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-collapse-thin"],[1,"col-menu-item-heading-title","fx-ellipsis"],[1,"col-menu-item-content"],[1,"fx-invisible-item"],["componentContainer",""]],template:function(e,t){1&e&&(R.lc(0,"div",0),R.yc(1,"async"),R.lc(2,"div",1),R.lc(3,"div",2),R.tc("click",(function(e){return t.toggle(e)})),R.lc(4,"div",3),R.wc(),R.lc(5,"svg",4),R.gc(6,"use",5),R.kc(),R.kc(),R.vc(),R.lc(7,"div",6),R.ed(8),R.yc(9,"async"),R.kc(),R.kc(),R.kc(),R.lc(10,"div",7),R.gc(11,"div",8,9),R.kc(),R.kc()),2&e&&(R.Cc("ngClass",R.Ic(8,te,t.active,!t.active))("hidden",!R.zc(1,4,t.visible)),R.Sb(5),R.Cc("ngClass",R.Ic(11,ne,t.active,!t.active)),R.Sb(3),R.fd(R.zc(9,6,t.translate.get(t.title))))},directives:[V.q],pipes:[V.b],styles:[".col-menu-item-icon[_ngcontent-%COMP%]{width:30px;height:30px;transition:transform .3s ease}.col-menu-item-heading[_ngcontent-%COMP%]{height:30px;line-height:30px;cursor:pointer;color:#7e7e7e}.col-menu-item-heading[_ngcontent-%COMP%]:hover{color:#61a15e}.col-menu-item-container.expanded[_ngcontent-%COMP%]   .col-menu-item-heading[_ngcontent-%COMP%]{color:#04263d}.col-menu-item-heading-inner[_ngcontent-%COMP%]{width:calc(100% - 35px);display:flex;flex-direction:row;float:left}.col-menu-item-heading-title[_ngcontent-%COMP%]{flex:1}.col-menu-item-icon-right[_ngcontent-%COMP%]{width:30px;height:30px;float:right;margin-right:4px}.col-menu-item-container[_ngcontent-%COMP%]{overflow:hidden;min-height:30px}.col-menu-item-container.expanded[_ngcontent-%COMP%]{margin-bottom:30px}.col-menu-item-container.expanded[_ngcontent-%COMP%]   .col-menu-item-content[_ngcontent-%COMP%]{height:auto}.col-menu-item-container.expanded[_ngcontent-%COMP%]   .col-menu-item-icon[_ngcontent-%COMP%]{transform:rotate(90deg);margin-left:5px}.col-menu-item-content[_ngcontent-%COMP%]{height:0;margin-top:10px;padding-left:5px}.col-menu-item-heading-title[_ngcontent-%COMP%]{color:#7e7e7e;margin-left:5px}"],changeDetection:0}),t}(s.a),re=n("crdX"),ae=n("Ownj"),oe=function(e,t){return{searchFolders:e,totalFolders:t}};function se(e,t){if(1&e&&(R.lc(0,"div",9),R.lc(1,"div",10),R.ed(2,"FOLDER_PANEL.SEARCH_RESULTS"),R.kc(),R.lc(3,"div",11),R.ed(4),R.yc(5,"async"),R.kc(),R.kc()),2&e){var n=R.xc();R.Sb(4),R.fd(R.zc(5,1,n.translate.get("FOLDER_PANEL.SEARCH_RESULTS_SHOWING",R.Ic(3,oe,n.searchResultFolders,n.totalFolders))))}}var ce=function(){return{event:"left.folder.createFolder.click"}};function le(e,t){if(1&e){var n=R.mc();R.lc(0,"div",12),R.lc(1,"button",13),R.tc("click",(function(){return R.Pc(n),R.xc().createProject()})),R.yc(2,"async"),R.yc(3,"async"),R.wc(),R.lc(4,"svg",14),R.gc(5,"use",15),R.kc(),R.ed(6),R.yc(7,"async"),R.kc(),R.kc()}if(2&e){var i=R.xc();R.Sb(1),R.Cc("disabled",R.zc(2,3,i.isUserPaused)||0===R.zc(3,5,i.appConnectionStatus))("trackAction",R.Gc(9,ce)),R.Sb(5),R.gd(" ",R.zc(7,7,i.translate.get("TOOLTIPS.CREATE_FOLDER"))," ")}}var de=function(){return{event:"left.folder.recent.click"}};function ue(e,t){if(1&e){var n=R.mc();R.lc(0,"div",16),R.tc("click",(function(){return R.Pc(n),R.xc().showRecentDiagrams()})),R.lc(1,"div",17),R.wc(),R.lc(2,"svg",18),R.gc(3,"use",19),R.kc(),R.kc(),R.vc(),R.lc(4,"a",10),R.ed(5,"FOLDER_PANEL.RECENT"),R.kc(),R.kc()}2&e&&R.Cc("trackAction",R.Gc(1,de))}var pe=function(){function e(e,t,n,i,r,a,o){this.commandService=e,this.planPermManager=t,this.state=n,this.translate=i,this.userLocator=r,this.projectsLocator=a,this.modalController=o,this.onGetSearchResults=new R.t,this.onDiagramSearchInProgress=new R.t,this.onClickCreateDiagram=new R.t,this.isUserPaused=new h.a(!1),this.searchMatches=new h.a({}),this.totalFolders=0,this.searchResultFolders=0,this.shareWithTeam=!1,this.subs=[],this.isDemoUser=new h.a(!1)}return Object.defineProperty(e.prototype,"appConnectionStatus",{get:function(){return this.state.changes(a.c)},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){var e=this;this.subs.push(this.checkUserPauseStatus().subscribe(),this.loadFolderCategories().subscribe(),this.planPermManager.isDemoUser().subscribe((function(t){return e.isDemoUser.next(t)})),this.getTotalFolderCount().subscribe((function(t){return e.totalFolders=t})))},e.prototype.checkUserPauseStatus=function(){var e=this;return this.userLocator.isUserPaused().pipe(Object(P.a)(),Object(y.a)((function(t){t?e.isUserPaused.next(!0):e.isUserPaused.next(!1)})))},e.prototype.showRecentDiagrams=function(){this.state.set("FolderPanelSelectedTab","recent")},e.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},e.prototype.onDiagramSearchResult=function(e){this.onGetSearchResults.emit(e),this.searchMatches.next(e),this.searchResultFolders=Object.keys(e.result).length},e.prototype.clearSearch=function(){this.searchBar.clearSearch()},e.prototype.getTotalFolderCount=function(){return this.getFolderCategories().pipe(Object(_.a)((function(e){return Object(A.b)(e.map((function(e){return e.projectList})))})),Object(_.a)((function(e){var t=0;return e.forEach((function(e){return t+=e.length})),Object(f.a)(t)})))},e.prototype.createProject=function(){var e,t=this;if(this.planPermManager.check([c.p.PROJECT_CREATE]))e=l.w.createProject;else{if(!this.planPermManager.check([c.p.PROJECT_CREATE_TEAM])){var n={id:c.p.PROJECT_CREATE,iframeType:u.t.CreateFolder,buttons:[{type:"upgrade",clickHandler:function(){}}],integrationContext:{embedded:this.state.get("ApplicationIsEmbedded"),environment:this.state.get("PluginApp")}};return void this.modalController.show(u.u,{inputs:{dialogData:n}})}e=l.w.createProjectTeam}var i=o.sb.projectId();return(this.shareWithTeam?this.commandService.dispatch(l.w.createProjectTeam,{id:i}):this.commandService.dispatch(e,{id:i})).pipe(Object(x.a)(),Object(y.a)((function(e){var n=e.resultData[0].model;n.owner=Object(p.find)(n.collabs,{role:l.g.OWNER});var i=t.projectList.value;i.push(n),t.sortProjects(i),t.projectList.next(i)}))).subscribe({error:function(e){t.handleProjectPermissionError(e)},complete:function(){t.state.set("FolderPanelSelectedProject",i)}})},e.prototype.sortProjects=function(e){e.sort((function(e,t){var n,i;return e.id===l.E.HOME?-1:t.id===l.E.HOME||(null===(n=e.name)||void 0===n?void 0:n.toUpperCase())>(null===(i=t.name)||void 0===i?void 0:i.toUpperCase())?1:-1}))},e.prototype.checkTeamShared=function(e,t){return!(!e.team||!t.collabs)&&(t.privacy&&(t.privacy.level===u.n.ANYONE_IN_TEAM||t.privacy.level===u.n.ANYONE_IN_TEAM_WITH_LINK)&&e.team.isInTeam(t.owner.id))},e.prototype.getYourFolders=function(e){var t=this;return this.projectList.pipe(Object(S.a)((function(n){return n.filter((function(n){return!!n.isHomeProject||!t.checkTeamShared(e,n)&&(n.owner&&n.owner.id===e.id)}))})))},e.prototype.getTeamFolders=function(e){var t=this;return this.projectList.pipe(Object(S.a)((function(n){return n.filter((function(n){return t.checkTeamShared(e,n)}))})))},e.prototype.getSharedFolders=function(e){var t=this;return this.projectList.pipe(Object(S.a)((function(n){return n.filter((function(n){return!n.isHomeProject&&(!t.checkTeamShared(e,n)&&(!n.owner||n.owner.id!==e.id))}))})),Object(_.a)((function(e){var t=new l.y(l.E.SHARED_HOME,"LABELS.SHARED_HOME");return e.push(t),Object(f.a)(e)})))},e.prototype.loadFolderCategories=function(){var e=this;return this.getFolderCategories().pipe(Object(y.a)((function(t){t.forEach((function(t){e.collapsibleMenu.has(t.id)||e.subs.push(e.collapsibleMenu.add(ie,$,t,!1,{shareWithTeam:t.shareWithTeam,hideHeaderButton:t.hideHeaderButton,projectList:t.projectList,searchMatches:e.searchMatches}).subscribe())}))})))},e.prototype.getFolderCategories=function(){var e=this;return this.userLocator.getUserDataAfterUserSubscriptionStarted().pipe(Object(C.a)((function(e){return!!e})),Object(S.a)((function(t){var n={id:"your-folders",title:"FOLDER_PANEL.MY_WORKSPACES",projectList:e.getYourFolders(t),shareWithTeam:!1,hideHeaderButton:!1,searchMatches:e.searchMatches},i={id:"shared-folders",title:"FOLDER_PANEL.SHARED_WITH_ME",projectList:e.getSharedFolders(t),shareWithTeam:!1,hideHeaderButton:!0,searchMatches:e.searchMatches},r=[];return r.push(n),t.team&&(t.team.teamSize>0||-1===t.team.teamSize)&&r.push({id:"team-folder",title:t.team.organizationName||"FOLDER_PANEL.SHARED_WITH_TEAM",projectList:e.getTeamFolders(t),shareWithTeam:!0,hideHeaderButton:!0,searchMatches:e.searchMatches}),r.push(i),r})))},e.prototype.handleProjectPermissionError=function(e){if(1624===e.code||1608===e.code){var t={id:c.p.PROJECT_CREATE,iframeType:u.t.CreateFolder,buttons:[{type:"upgrade",clickHandler:function(){}}],integrationContext:{embedded:this.state.get("ApplicationIsEmbedded"),environment:this.state.get("PluginApp")}};this.modalController.show(u.u,{inputs:{dialogData:t}})}},e.\u0275fac=function(t){return new(t||e)(R.fc(o.B),R.fc(u.m),R.fc(o.Ib),R.fc(z.e),R.fc(u.y),R.fc(l.x),R.fc(o.gb))},e.\u0275cmp=R.Zb({type:e,selectors:[["project-bar"]],viewQuery:function(e,t){var n;(1&e&&(R.Wc(o.t,!0),R.jd(G,!0)),2&e)&&(R.Lc(n=R.uc())&&(t.collapsibleMenu=n.first),R.Lc(n=R.uc())&&(t.searchBar=n.first))},inputs:{projectList:"projectList",shareWithTeam:"shareWithTeam"},outputs:{onGetSearchResults:"onGetSearchResults",onDiagramSearchInProgress:"onDiagramSearchInProgress",onClickCreateDiagram:"onClickCreateDiagram"},decls:14,vars:13,consts:[[1,"project-bar-container"],["translate","",1,"fx-margin-bottom-15","panel-main-header","padding-x-10"],[1,"padding-x-10"],[3,"onDiagramListChange","onDiagramSearchInProgress"],["class","search-results-indicator padding-x-10",4,"ngIf"],["class","create-btn-container padding-x-10",4,"ngIf"],["class","list-item project-bar-item",3,"trackAction","click",4,"ngIf"],[1,"col-menu-scrollbar"],[1,"project-collapsible-menu"],[1,"search-results-indicator","padding-x-10"],["translate",""],[1,"count-indicator"],[1,"create-btn-container","padding-x-10"],["data-testid","fp-create-workspace-button","translate","",1,"nu-btn-med","nu-btn-on-grey","fx-no-margin","dashboard-panel-header-button",3,"disabled","trackAction","click"],[1,"nu-icon"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-plus"],[1,"list-item","project-bar-item",3,"trackAction","click"],[1,"project-bar-icon-container"],[1,"nu-icon","nu-ic-time-thin","purple"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-time-thin"]],template:function(e,t){if(1&e&&(R.lc(0,"div",0),R.yc(1,"async"),R.lc(2,"h2",1),R.ed(3,"FOLDER_PANEL.FOLDERS"),R.kc(),R.lc(4,"div",2),R.lc(5,"search-bar",3),R.tc("onDiagramListChange",(function(e){return t.onDiagramSearchResult(e)}))("onDiagramSearchInProgress",(function(e){return t.onDiagramSearchInProgress.emit(e)})),R.kc(),R.kc(),R.cd(6,se,6,6,"div",4),R.yc(7,"async"),R.cd(8,le,8,10,"div",5),R.yc(9,"async"),R.cd(10,ue,6,2,"div",6),R.yc(11,"async"),R.lc(12,"perfect-scrollbar",7),R.gc(13,"collapsible-menu",8),R.kc(),R.kc()),2&e){var n,i,r;R.Xb("not-demo",!R.zc(1,5,t.isDemoUser)),R.Sb(6),R.Cc("ngIf",null==(n=R.zc(7,7,t.searchMatches))?null:n.search),R.Sb(2),R.Cc("ngIf",!(null!=(i=R.zc(9,9,t.searchMatches))&&i.search)),R.Sb(2),R.Cc("ngIf",!(null!=(r=R.zc(11,11,t.searchMatches))&&r.search))}},directives:[z.a,G,V.t,re.b,ae.a,Y.a],pipes:[V.b],styles:[".project-bar-item.selected[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.2)}.project-bar-container[_ngcontent-%COMP%]{height:100vh;padding:30px 0;display:flex;flex-direction:column}.project-bar-container[_ngcontent-%COMP%]   .padding-x-10[_ngcontent-%COMP%]{padding:0 10px}.project-collapsible-menu[_ngcontent-%COMP%]{padding-left:0}.list-item[_ngcontent-%COMP%]{display:flex;padding:5px;align-items:center}.list-item[_ngcontent-%COMP%]   .nu-icon[_ngcontent-%COMP%]{margin-right:5px}.list-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#7e7e7e}.project-bar-section-header[_ngcontent-%COMP%]{display:flex}.project-bar-section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{flex:1}.project-bar-section-add-project[_ngcontent-%COMP%]{padding:0;margin-right:-5px}.search-results-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;font-size:14px;margin:30px 0;font-weight:400;color:#899092}.search-results-indicator[_ngcontent-%COMP%]   .count-indicator[_ngcontent-%COMP%]{font-size:10px;color:#b0b4b5}.create-btn-container[_ngcontent-%COMP%]{margin:30px 0}.create-btn-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-weight:600}.create-btn-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .nu-icon[_ngcontent-%COMP%]{color:#04263d}[_nghost-%COMP%]     .col-menu-scrollbar .ps-content{padding:0!important}"],changeDetection:0}),e}(),he=n("8EYK"),ge=n("sEIs"),fe=n("YsaH"),me=n("jHi0"),be=n("rwb9"),ve=n("pYIu"),ye=n("TdEb"),Oe=n("pVzg");function _e(e,t){if(1&e&&(R.lc(0,"p"),R.lc(1,"span",12),R.ed(2),R.kc(),R.lc(3,"span",12),R.ed(4),R.lc(5,"label",13),R.ed(6),R.kc(),R.kc(),R.kc()),2&e){var n=R.xc(2).$implicit;R.Sb(2),R.fd(n.collab.email),R.Sb(2),R.gd(" "," - "," "),R.Sb(2),R.fd(n.collab.roleTitle)}}function Ce(e,t){if(1&e&&(R.lc(0,"p",14),R.ed(1),R.yc(2,"translate"),R.kc()),2&e){var n=R.xc(2).$implicit;R.Sb(1),R.fd(R.zc(2,1,n.collab.lastSeenMoment))}}function Pe(e,t){if(1&e&&(R.lc(0,"p",15),R.lc(1,"label",16),R.ed(2),R.kc(),R.kc()),2&e){var n=R.xc(2).$implicit,i=R.xc();R.Sb(2),R.fd(i.getFollowMessageTemplate(n.currentUser,n.spotlightState,n.followState))}}var xe=function(){return{event:"header.right.avatar.click"}};function Se(e,t){if(1&e){var n=R.mc();R.lc(0,"div",5),R.lc(1,"user-image",6),R.tc("click",(function(){R.Pc(n);var e=R.xc().$implicit;return R.xc().selected.next(e.collab.id)})),R.kc(),R.lc(2,"div",7),R.lc(3,"p",8),R.ed(4),R.kc(),R.cd(5,_e,7,3,"p",9),R.cd(6,Ce,3,3,"p",10),R.cd(7,Pe,3,1,"p",11),R.yc(8,"async"),R.kc(),R.kc()}if(2&e){var i=R.xc().$implicit,r=R.xc(),a=null;R.Xb("disable",!r.shouldShowToolTip),R.Sb(1),R.Cc("isUserStripMode",!0)("realtimeUserColor",i.realtimeUserColor)("hasImage",i.collab.hasImage)("imagePath",i.collab.image)("userColor",i.collab.displayColor)("userInitials",i.collab.initial)("userRegistered",i.collab.isRegistered)("trackAction",R.Gc(19,xe))("userOnlineStatus",i.collab.online)("spotlightState",i.spotlightState)("spotlightRequestingState",i.spotlightRequestingState),R.Sb(3),R.fd(i.collab.fullName),R.Sb(1),R.Cc("ngIf",r.userHasEditPermission),R.Sb(1),R.Cc("ngIf",r.userHasEditPermission),R.Sb(1),R.Cc("ngIf",r.showActiveOnly&&(null==(a=R.zc(8,17,r.collabs))?null:a.length)>1)}}function ke(e,t){if(1&e){var n=R.mc();R.lc(0,"simple-dropdown-item",24),R.lc(1,"div",25),R.lc(2,"a",26),R.tc("click",(function(){R.Pc(n);var e=t.$implicit;return R.xc(3).selected.next(e.id)})),R.gc(3,"user-image",27),R.ed(4),R.kc(),R.kc(),R.kc()}if(2&e){var i=t.$implicit;R.Cc("item",i),R.Sb(3),R.Cc("hasImage",i.hasImage)("imagePath",i.image)("userColor",i.displayColor)("userInitials",i.initial)("userRegistered",i.isRegistered)("userOnlineStatus",!0)("inline",1),R.Sb(1),R.gd(" \xa0",i.fullName," ")}}var De=function(){return{closeOnItemClicked:!0,openOnHover:!0,closeOnBlur:!0,multiselectable:!1}},we=function(e,t){return{active:e,inactive:t}};function Te(e,t){if(1&e&&(R.lc(0,"div",17),R.lc(1,"abs-dropdown",18,19),R.lc(3,"simple-dropdown-button",20),R.lc(4,"div",21),R.lc(5,"span",22),R.ed(6),R.kc(),R.kc(),R.kc(),R.cd(7,ke,5,9,"simple-dropdown-item",23),R.kc(),R.kc()),2&e){var n=R.xc().$implicit;R.Sb(1),R.Cc("settings",R.Gc(5,De)),R.Sb(2),R.Cc("items",n.removed),R.Sb(2),R.Cc("ngClass",R.Ic(6,we,n.onlineStatus,!n.onlineStatus)),R.Sb(1),R.gd("+",n.remainingCount,""),R.Sb(1),R.Cc("ngForOf",n.truncated)}}var Ie=function(e,t){return{"margin-left":e,"z-index":t}};function je(e,t){if(1&e&&(R.lc(0,"div",2),R.cd(1,Se,9,20,"div",3),R.cd(2,Te,8,9,"div",4),R.kc()),2&e){var n=t.$implicit;R.Cc("ngStyle",R.Ic(4,Ie,n.position+"px",n.index))("ngClass",R.Ic(7,we,n.collab&&n.collab.online,n.collab&&!n.collab.online)),R.Sb(1),R.Cc("ngIf",!!n.collab),R.Sb(1),R.Cc("ngIf",!n.collab)}}var Ee=function(e){function t(t,n,i){var a=e.call(this)||this;return a.collabLocator=t,a.state=i,a.limitCount=0,a.collabs=n.getUserData().pipe(Object(C.a)((function(e){return!!e})),Object(_.a)((function(){return Object(A.b)([i.changes("FolderPanelSelectedProject").pipe(Object(_.a)((function(e){return e===l.E.HOME||e===l.E.SHARED_HOME?Object(f.a)([]):t.getCollabs(e).pipe(Object(C.a)((function(e){return!!e})),Object(S.a)((function(e){return e.filter((function(e){return e.id!==a.state.get("CurrentUser")}))})))}))),a.collabHover]).pipe(Object(S.a)((function(e){var t=Object(r.h)(e,2),n=t[0],i=t[1];return a.getCollabViews(n,i)})))}))),a}return Object(r.e)(t,e),t.\u0275fac=function(e){return new(e||t)(R.fc(l.u),R.fc(u.y),R.fc(o.Ib))},t.\u0275cmp=R.Zb({type:t,selectors:[["project-user-strip"]],inputs:{limitCount:"limitCount"},features:[R.Pb],decls:3,vars:4,consts:[[1,"user-strip-container"],["class","user-strip-img-wrapper",3,"ngStyle","ngClass",4,"ngFor","ngForOf","ngForTrackBy"],[1,"user-strip-img-wrapper",3,"ngStyle","ngClass"],["tooltip","","placement","bottom","style","display: inline-block;",3,"disable",4,"ngIf"],["style","display: inline-block;",4,"ngIf"],["tooltip","","placement","bottom",2,"display","inline-block"],["imageSize","small",3,"isUserStripMode","realtimeUserColor","hasImage","imagePath","userColor","userInitials","userRegistered","trackAction","userOnlineStatus","spotlightState","spotlightRequestingState","click"],[1,"tooltip-content","user-info-bubble"],[1,"nu-text-bold",2,"text-transform","capitalize"],[4,"ngIf"],["class","nu-text-small grey","style","text-transform:capitalize;",4,"ngIf"],["class","nu-text-small grey",4,"ngIf"],[1,"nu-text-small","white"],["translate","",2,"text-transform","capitalize"],[1,"nu-text-small","grey",2,"text-transform","capitalize"],[1,"nu-text-small","grey"],["translate",""],[2,"display","inline-block"],[1,"export-drop-down",3,"settings"],["dropdownMenu",""],["ddbutton","",3,"items"],[1,"user-count-inner","fx-round"],[3,"ngClass"],["dditem","",3,"item",4,"ngFor","ngForOf"],["dditem","",3,"item"],[1,"header-dropdown-item"],[1,"menu-dropdown-item",2,"display","flex","align-items","center","padding","2px 0px 2px",3,"click"],["imageSize","tiny",3,"hasImage","imagePath","userColor","userInitials","userRegistered","userOnlineStatus","inline"]],template:function(e,t){1&e&&(R.lc(0,"div",0),R.cd(1,je,3,10,"div",1),R.yc(2,"async"),R.kc()),2&e&&(R.Sb(1),R.Cc("ngForOf",R.zc(2,2,t.collabs))("ngForTrackBy",t.getCollabTrackingId))},directives:[V.s,V.w,V.q,V.t,me.a,be.a,Y.a,z.a,ve.a,ye.a,Oe.a],pipes:[V.b,z.d],styles:['.user-strip-container[_ngcontent-%COMP%]{display:flex}.user-info-bubble[_ngcontent-%COMP%]{padding:10px}.user-count-inner[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column;width:30px;background-size:cover;background-position:50%;background-repeat:no-repeat;background-color:#fff;overflow:hidden;text-align:center;border:#fff}.user-count-inner[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;align-items:center;height:28px}.user-count-inner[_ngcontent-%COMP%]:after{content:"";display:block;height:inherit;width:inherit;top:0;background:hsla(0,0%,100%,.7)}.user-count-inner[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{color:#26373b}.user-count-inner[_ngcontent-%COMP%]   .inactive[_ngcontent-%COMP%]{color:grey}.user-strip-img-wrapper[_ngcontent-%COMP%]{max-width:100px;transition:all .2s linear;transition-delay:0s}.user-strip-img-wrapper[_ngcontent-%COMP%]   user-image[_ngcontent-%COMP%]{transform:scale(1);transition:all .2s linear;transition-delay:.3s}.user-strip-container[_ngcontent-%COMP%]     .user-img-inner{box-shadow:2px 0 #fff;border:1px solid #fff}.user-strip-container[_ngcontent-%COMP%]     .user-img-container.active .user-img-inner{box-shadow:none}.disable[_ngcontent-%COMP%]{pointer-events:none}'],changeDetection:0}),t}(fe.a),Me=n("uIWG"),Re=n("62De"),Ae=n("xEGh"),Le=["dropdownItem"],Ne=["diagramArea"],Ue=["contentContainer"];function Fe(e,t){1&e&&(R.lc(0,"div",46),R.lc(1,"div",47),R.lc(2,"label",48),R.ed(3,"FOLDER_PANEL.RECENT"),R.kc(),R.kc(),R.kc())}function Be(e,t){if(1&e){var n=R.mc();R.lc(0,"editable-label",54),R.tc("changedText",(function(e){R.Pc(n);var t=R.xc(2).ngIf;return R.xc(2).renameProject(null==t?null:t.id,e)})),R.kc()}if(2&e){var i=R.xc(2).ngIf;R.Dc("value",null==i?null:i.name)}}function He(e,t){if(1&e){var n=R.mc();R.lc(0,"editable-label",55),R.tc("changedText",(function(e){R.Pc(n);var t=R.xc(2).ngIf;return R.xc(2).renameProject(null==t?null:t.id,e)})),R.kc()}if(2&e){var i=R.xc(2).ngIf;R.Dc("value",null==i?null:i.name),R.Cc("focus",!0)("selectAll",!0)}}function ze(e,t){if(1&e&&(R.lc(0,"div"),R.cd(1,Be,1,1,"editable-label",52),R.yc(2,"async"),R.cd(3,He,1,3,"editable-label",53),R.yc(4,"async"),R.kc()),2&e){var n=R.xc(3);R.Sb(1),R.Cc("ngIf","inactive"===R.zc(2,2,n.renameMode)),R.Sb(2),R.Cc("ngIf","active"===R.zc(4,4,n.renameMode))}}function Ge(e,t){1&e&&(R.lc(0,"div"),R.lc(1,"label",48),R.ed(2,"LABELS.HOME"),R.kc(),R.kc())}function Ve(e,t){1&e&&(R.lc(0,"div"),R.lc(1,"label",48),R.ed(2,"LABELS.SHARED_HOME"),R.kc(),R.kc())}function Ye(e,t){if(1&e){var n=R.mc();R.lc(0,"button",62),R.tc("mouseenter",(function(){return R.Pc(n),R.xc(4).showOptDropdown()})),R.wc(),R.lc(1,"svg",30),R.gc(2,"use",22),R.kc(),R.kc()}}function We(e,t){if(1&e){var n=R.mc();R.lc(0,"a",63),R.tc("click",(function(){return R.Pc(n),R.xc(4).enableRenameMode()})),R.ed(1,"PROJECT_FEATURE.RENAME"),R.kc()}}function Ke(e,t){if(1&e){var n=R.mc();R.lc(0,"a",63),R.tc("click",(function(){return R.Pc(n),R.xc(4).deleteProject()})),R.yc(1,"async"),R.ed(2,"PROJECT_FEATURE.DELETE"),R.kc()}if(2&e){var i=R.xc(4);R.Xb("disabled",0===R.zc(1,2,i.appConnectionStatus))}}var qe=function(e){return{id:e,role:"EDITOR"}},Xe=function(e){return{id:e,role:"OWNER"}};function Ze(e,t){if(1&e){var n=R.mc();R.lc(0,"div",56),R.cd(1,Ye,3,0,"button",57),R.lc(2,"div",58,59),R.tc("mouseleave",(function(){return R.Pc(n),R.xc(3).hideOptDropdown()})),R.cd(4,We,2,0,"a",60),R.cd(5,Ke,3,4,"a",61),R.kc(),R.kc()}if(2&e){var i=R.xc().ngIf;R.Sb(1),R.Cc("projectRole",R.Hc(3,qe,null==i?null:i.id)),R.Sb(3),R.Cc("projectRole",R.Hc(5,qe,null==i?null:i.id)),R.Sb(1),R.Cc("projectRole",R.Hc(7,Xe,null==i?null:i.id))}}function Je(e,t){if(1&e&&(R.lc(0,"div",47),R.cd(1,ze,5,6,"div",50),R.cd(2,Ge,3,0,"div",50),R.cd(3,Ve,3,0,"div",50),R.cd(4,Ze,6,9,"div",51),R.kc()),2&e){var n=t.ngIf;R.Sb(1),R.Cc("ngIf","home"!=(null==n?null:n.id)&&"shared-home"!=(null==n?null:n.id)),R.Sb(1),R.Cc("ngIf","home"===(null==n?null:n.id)),R.Sb(1),R.Cc("ngIf","shared-home"===(null==n?null:n.id)),R.Sb(1),R.Cc("ngIf","home"!=(null==n?null:n.id)&&"shared-home"!=(null==n?null:n.id))}}function Qe(e,t){if(1&e&&(R.lc(0,"div",46),R.cd(1,Je,5,4,"div",49),R.yc(2,"async"),R.kc()),2&e){var n=R.xc();R.Sb(1),R.Cc("ngIf",R.zc(2,1,n.projectMdl))}}function $e(e,t){if(1&e){var n=R.mc();R.lc(0,"button",64),R.tc("click",(function(){return R.Pc(n),R.xc().openShareWindow()})),R.yc(1,"async"),R.wc(),R.lc(2,"svg",30),R.gc(3,"use",65),R.kc(),R.ed(4," LABELS.SHARE "),R.kc()}if(2&e){var i=R.xc();R.Cc("disabled",0===R.zc(1,1,i.appConnectionStatus))}}var et=function(e,t,n){return{id:e,name:t,type:n,location:"left.dashboard.featuredTemplate"}};function tt(e,t){if(1&e){var n=R.mc();R.lc(0,"template-thumbnail",66),R.tc("onButtonClick",(function(e){R.Pc(n);var t=R.xc();return t.navigateToTemplate(t.getDashboardTemplates[0].id,e)})),R.yc(1,"async"),R.kc()}if(2&e){var i=R.xc();R.Cc("name",i.getDashboardTemplates[0].name)("thumbImg",i.getDashboardTemplates[0].thumbUrl)("isUserPaused",R.zc(1,4,i.isUserPaused))("trackingInfo",R.Jc(6,et,i.getDashboardTemplates[0].id,i.getDashboardTemplates[0].name,i.getDashboardTemplates[0].type))}}function nt(e,t){if(1&e){var n=R.mc();R.lc(0,"template-thumbnail",66),R.tc("onButtonClick",(function(e){R.Pc(n);var t=R.xc();return t.navigateToTemplate(t.getDashboardTemplates[1].id,e)})),R.yc(1,"async"),R.kc()}if(2&e){var i=R.xc();R.Cc("name",i.getDashboardTemplates[1].name)("thumbImg",i.getDashboardTemplates[1].thumbUrl)("isUserPaused",R.zc(1,4,i.isUserPaused))("trackingInfo",R.Jc(6,et,i.getDashboardTemplates[1].id,i.getDashboardTemplates[1].name,i.getDashboardTemplates[1].type))}}function it(e,t){if(1&e){var n=R.mc();R.lc(0,"template-thumbnail",66),R.tc("onButtonClick",(function(e){R.Pc(n);var t=R.xc();return t.navigateToTemplate(t.getDashboardTemplates[2].id,e)})),R.yc(1,"async"),R.kc()}if(2&e){var i=R.xc();R.Cc("name",i.getDashboardTemplates[2].name)("thumbImg",i.getDashboardTemplates[2].thumbUrl)("isUserPaused",R.zc(1,4,i.isUserPaused))("trackingInfo",R.Jc(6,et,i.getDashboardTemplates[2].id,i.getDashboardTemplates[2].name,i.getDashboardTemplates[2].type))}}function rt(e,t){if(1&e){var n=R.mc();R.lc(0,"template-thumbnail",66),R.tc("onButtonClick",(function(e){R.Pc(n);var t=R.xc();return t.navigateToTemplate(t.getDashboardTemplates[3].id,e)})),R.yc(1,"async"),R.kc()}if(2&e){var i=R.xc();R.Cc("name",i.getDashboardTemplates[3].name)("thumbImg",i.getDashboardTemplates[3].thumbUrl)("isUserPaused",R.zc(1,4,i.isUserPaused))("trackingInfo",R.Jc(6,et,i.getDashboardTemplates[3].id,i.getDashboardTemplates[3].name,i.getDashboardTemplates[3].type))}}function at(e,t){if(1&e){var n=R.mc();R.lc(0,"div",67),R.ed(1),R.yc(2,"async"),R.wc(),R.lc(3,"svg",68),R.tc("click",(function(){return R.Pc(n),R.xc().projectBar.clearSearch()})),R.gc(4,"use",69),R.kc(),R.kc()}if(2&e){var i=R.xc();R.Sb(1),R.gd(" ",R.zc(2,1,i.searchText)," ")}}function ot(e,t){if(1&e){var n=R.mc();R.lc(0,"simple-dropdown-item",70),R.lc(1,"a",71),R.tc("click",(function(){R.Pc(n);var e=t.$implicit;return R.xc().updateSortOrder(e)})),R.ed(2),R.kc(),R.kc()}if(2&e){var i=t.$implicit;R.Cc("item",i),R.Sb(2),R.fd(i.label)}}function st(e,t){if(1&e){var n=R.mc();R.lc(0,"simple-dropdown-item",70),R.lc(1,"a",71),R.tc("click",(function(){R.Pc(n);var e=t.$implicit;return R.xc().updatePermissionFilter(e)})),R.ed(2),R.kc(),R.kc()}if(2&e){var i=t.$implicit;R.Cc("item",i),R.Sb(2),R.fd(i.label)}}function ct(e,t){1&e&&R.gc(0,"loading-bubbles",72)}function lt(e,t){1&e&&(R.lc(0,"div",73),R.lc(1,"p",74),R.ed(2,"FOLDER_PANEL.EMPTY_FOLDER"),R.gc(3,"br"),R.ed(4,"FOLDER_PANEL.EMPTY_FOLDER_SLUG"),R.kc(),R.kc())}function dt(e,t){1&e&&(R.lc(0,"div",75),R.lc(1,"label",76),R.ed(2,"FOLDER_PANEL.EMPTY_SEARCH_RESULTS"),R.kc(),R.lc(3,"ul"),R.lc(4,"li",32),R.ed(5,"FOLDER_PANEL.EMPTY_SEARCH_RESULTS_SLUG.CHECK_WORDS"),R.kc(),R.lc(6,"li",32),R.ed(7,"FOLDER_PANEL.EMPTY_SEARCH_RESULTS_SLUG.SEARCH_TERMS"),R.kc(),R.kc(),R.kc())}var ut,pt,ht=function(){return{event:"left.dashboard.createDiagram.click"}},gt=function(){return{closeOnItemClicked:!0,openOnHover:!0,closeOnBlur:!0,multiselectable:!1}};!function(e){e[e.ANY=1]="ANY",e[e.CREATED_BY_ME=2]="CREATED_BY_ME",e[e.SHARED_BY_ME=3]="SHARED_BY_ME",e[e.SHARED_BY_OTHERS=4]="SHARED_BY_OTHERS",e[e.NOT_SHARED=5]="NOT_SHARED",e[e.PRIVATE=6]="PRIVATE",e[e.PUBLIC=7]="PUBLIC"}(ut||(ut={})),function(e){e[e.LAST_UPDATED=1]="LAST_UPDATED",e[e.LAST_CREATED=2]="LAST_CREATED"}(pt||(pt={}));var ft=function(){function e(e,t,n,i,r,a,o,s,c,l,d,u,p,f,m){this.projectLocator=e,this.userLocator=t,this.diagramInfoLocator=n,this.commandService=i,this.planPermManager=r,this.router=a,this.state=o,this.modelSubManager=s,this.logger=c,this.ll=l,this.changeDetectorRef=d,this.translate=u,this.documentManage=p,this.mdlCtrl=f,this.templateLoader=m,this.id="folders",this.debounce=200,this.isFolderEmpty=new h.a(!1),this.isUserPaused=new h.a(!1),this.isFreeOrDemoUser=new h.a(!1),this.showLoadingIndicator=new h.a(!0),this.selectedTab=new h.a("diagrams"),this.columns=3,this.projectCount=new h.a(0),this.renameMode=new h.a("inactive"),this.diagramSearchResult={},this.diagramSearch=!1,this.projectDiagramNavigation=new g.a,this.searchText=new h.a(""),this.permissionFilter=new h.a(ut.ANY),this.sortOrder=new h.a(pt.LAST_UPDATED),this.isExpandable=!0,this.subs=[],this.projectDiagramNavigation=new g.a,this.projectModels=new h.a([])}return Object.defineProperty(e.prototype,"filterOptions",{get:function(){return[{label:this.translate.instant("PERMISSION_STATES.NONE"),value:ut.ANY,select:this.permissionFilter.value===ut.ANY},{label:this.translate.instant("PERMISSION_STATES.CREATED_BY_ME"),value:ut.CREATED_BY_ME,select:this.permissionFilter.value===ut.CREATED_BY_ME},{label:this.translate.instant("PERMISSION_STATES.SHARED_BY_ME"),value:ut.SHARED_BY_ME,select:this.permissionFilter.value===ut.SHARED_BY_ME},{label:this.translate.instant("PERMISSION_STATES.SHARED_BY_OTHERS"),value:ut.SHARED_BY_OTHERS,select:this.permissionFilter.value===ut.SHARED_BY_OTHERS},{label:this.translate.instant("PERMISSION_STATES.NOT_SHARED"),value:ut.NOT_SHARED,select:this.permissionFilter.value===ut.NOT_SHARED},{label:this.translate.instant("PERMISSION_STATES.PRIVATE"),value:ut.PRIVATE,select:this.permissionFilter.value===ut.PRIVATE},{label:this.translate.instant("PERMISSION_STATES.PUBLIC"),value:ut.PUBLIC,select:this.permissionFilter.value===ut.PUBLIC}]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sortOptions",{get:function(){return[{label:this.translate.instant("SORT_ORDERS.LAST_UPDATED"),value:pt.LAST_UPDATED,select:this.sortOrder.value===pt.LAST_UPDATED},{label:this.translate.instant("SORT_ORDERS.LAST_CREATED"),value:pt.LAST_CREATED,select:this.sortOrder.value===pt.LAST_CREATED}]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"appConnectionStatus",{get:function(){var e=this;return this.state.changes(a.c).pipe(Object(y.a)((function(t){t===a.c.ONLINE&&"folders"===e.state.get("SelectedLeftPanel")&&e.state.get("LeftSidebarState")===E.b.Opened&&e.onOpen()})))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"getDashboardTemplates",{get:function(){return this.templateLoader.dashboardTemplates},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canCreateDiagram",{get:function(){return this.planPermManager.check([c.p.DIAGRAM_CREATE])||this.planPermManager.check([c.p.DIAGRAM_CREATE_PRIVATE])||this.planPermManager.check([c.p.DIAGRAM_CREATE_TEAM])||this.planPermManager.check([c.p.DIAGRAM_CREATE_PUBLIC])},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){var e=this;this.subs.push(this.dispatchGetUserProjects().subscribe(),this.listenToSelectedProjectChange().subscribe(),this.listenToTabChanges().subscribe(),this.projectDiagramNavigation.pipe(Object(O.a)(1),Object(_.a)((function(){return e.ll.forCurrentObserver(!1).pipe(Object(O.a)(1),Object(_.a)((function(t){return t.getDiagramModel().pipe(Object(O.a)(1),Object(y.a)((function(t){var n=l.E.HOME;"string"==typeof t.project?n=t.project:t.project&&t.project.id&&(n=t.project.id),e.navigateToProjectDiagrams(n)})))})))}))).subscribe(),this.listenToSidebarStateChanges().subscribe(),this.checkUserPauseStatus().subscribe(),this.listenToDocumentStatusChange().subscribe((function(t){return e.onDocumentStatusChange(t)})),this.planPermManager.isFreeOrDemoUser().subscribe((function(t){return e.isFreeOrDemoUser.next(t)}))),this.listenToDiagramListChanges()},e.prototype.ngAfterViewInit=function(){var e=this;this.subs.push(this.panelChangedEvent.pipe(Object(C.a)((function(e){return"folders"!==e})),Object(y.a)((function(){e.projectBar.clearSearch()}))).subscribe())},e.prototype.onOpen=function(){this.state.get("FolderPanelSelectedProject")||this.projectDiagramNavigation.next(),this.dispatchGetUserProjects().subscribe()},e.prototype.checkUserPauseStatus=function(){var e=this;return this.userLocator.isUserPaused().pipe(Object(P.a)(),Object(y.a)((function(t){t?e.isUserPaused.next(!0):e.isUserPaused.next(!1)})))},e.prototype.createDiagram=function(e,t){void 0===e&&(e=""),void 0===t&&(t=!0),!this.isFreeOrDemoUser.value||this.canCreateDiagram?this.createDiagramProcess(e,t):this.showUpgradeDialog(e,t)},e.prototype.navigateToTemplate=function(e,t){"use"===t&&this.createDiagramByTemplate(e)},e.prototype.createDiagramByTemplate=function(e,t){void 0===e&&(e=""),void 0===t&&(t=!0),this.isFreeOrDemoUser.value&&!this.canCreateDiagram?this.showUpgradeDialog():this.createDiagramByTemplateProcess(e,t)},e.prototype.createFolder=function(){var e,t=this;if(o.Kb.track("left.folder.createFolder.click"),this.planPermManager.check([c.p.PROJECT_CREATE]))e=l.w.createProject;else{if(!this.planPermManager.check([c.p.PROJECT_CREATE_TEAM]))return void this.showCreateFolderUpgradeDialog();e=l.w.createProjectTeam}var n=o.sb.projectId(),i=this.commandService.dispatch(e,{id:n}).pipe(Object(x.a)(),Object(y.a)((function(e){t.navigateToProjectDiagrams(e.eventData.id)}))).subscribe({error:function(e){t.handleProjectPermissionError(e)}});this.subs.push(i)},e.prototype.setSelectedTab=function(e){this.state.set("FolderPanelSelectedTab",e)},e.prototype.onSearchInputClick=function(){o.Kb.track("left.folder.search",{value1Type:"location",value1:""+this.state.get("FolderPanelSelectedTab")})},e.prototype.navigateToProjectList=function(){this.setSelectedTab("diagrams"),this.setSelectedProject(l.E.HOME),this.projectMdl=null},e.prototype.renameProject=function(e,t){this.renameMode.next("inactive"),this.commandService.dispatch(l.w.renameProject,e,{name:t}),this.updateProjectList(e,{action:"rename",name:t})},e.prototype.enableRenameMode=function(){o.Kb.track("left.folder.rename.change",{value1Type:"location",value1:this.state.get("FolderPanelSelectedTab")}),this.hideOptDropdown(),this.renameMode.next("active")},e.prototype.showOptDropdown=function(){this.dropdownItem&&(this.dropdownItem.nativeElement.style.display="block")},e.prototype.hideOptDropdown=function(){this.dropdownItem&&(this.dropdownItem.nativeElement.style.display="none")},e.prototype.updateSortOrder=function(e){o.Kb.track("left.folder.panel.sort.click",{value1Type:"selectedValue",value1:e.value,value2Type:"selectedLabel",value2:e.label}),this.sortOrder.next(e.value)},e.prototype.updatePermissionFilter=function(e){o.Kb.track("left.folder.panel.filter.click",{value1Type:"selectedValue",value1:e.value,value2Type:"selectedLabel",value2:e.label}),this.permissionFilter.next(e.value)},e.prototype.deleteProject=function(){var e=this;o.Kb.track("left.folder.delete.click"),this.hideOptDropdown();var t=this.state.get("FolderPanelSelectedProject");this.documentManage.deleteProject(t,!0).subscribe((function(){e.updateProjectList(t,{action:"delete"})}))},e.prototype.openShareWindow=function(){var e=this.state.get("FolderPanelSelectedProject");this.state.set("HighlightedProject",e),o.Kb.track("left.folder.share.click"),this.mdlCtrl.show(l.M)},e.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},e.prototype.setSearchResultData=function(e){this.diagramSearch=e.search,this.diagramSearchResult=e.result,this.searchText.next(e.searchKey)},e.prototype.showTemplatesPanel=function(){this.state.set("TemplateOriginLocation","dashboard"),this.state.set("ToggleTemplatesModal",!0)},e.prototype.dispatchGetUserProjects=function(){var e=this;return this.commandService.dispatch(l.w.getUserProjectsInfo).pipe(Object(x.a)(),Object(y.a)((function(t){var n=t.resultData[0].projects;n.sort((function(e,t){var n,i;return e.id===l.E.HOME?-1:t.id===l.E.HOME||(null===(n=e.name)||void 0===n?void 0:n.toUpperCase())>(null===(i=t.name)||void 0===i?void 0:i.toUpperCase())?1:-1})),n.forEach((function(e){e.owner=Object(p.find)(e.collabs,{role:l.g.OWNER})})),e.projectCount.next(n.length),e.projectModels.next(n)})))},e.prototype.dispatchGetProjectDiagrams=function(e){return this.diagramInfoLocator.hasProjectDiagrams(e)?(this.commandService.dispatch(l.w.getProjectDiagrams,e,null),Object(f.a)(void 0)):this.commandService.dispatch(l.w.getProjectDiagrams,e,null).pipe(Object(x.a)())},e.prototype.dispatchGetRecentDiagrams=function(){return this.diagramInfoLocator.hasRecentDiagrams()?(this.commandService.dispatch(j.a.getRecentDiagrams),Object(f.a)([])):this.commandService.dispatch(j.a.getRecentDiagrams).pipe(Object(x.a)())},e.prototype.startSubscriptions=function(e){var t=this;if(e&&e.length){var n=e.filter((function(e){return e!==l.E.HOME})).map((function(e){return t.modelSubManager.start(l.D,e).pipe(Object(_.a)((function(e){return e.status})),Object(C.a)((function(e){return e.subStatus!==d.f.created})),Object(y.a)((function(e){e.subStatus===d.f.errored&&t.logger.error("Error occurred when starting project subscription: ",e.error)})),Object(O.a)(1))}));return n.length>0?m.a.apply(void 0,Object(r.j)(n)):Object(f.a)({})}throw new Error("No ids were received by the GetUserProjects command.")},e.prototype.handlePermError=function(e){e.data&&setTimeout((function(){throw new u.j("diagram create failed",e.data)}))},e.prototype.handleProjectPermissionError=function(e){1624!==e.code&&1608!==e.code||this.showCreateFolderUpgradeDialog()},e.prototype.listenToTabChanges=function(){var e=this;return this.state.changes("FolderPanelSelectedTab").pipe(Object(C.a)((function(e){return!!e})),Object(y.a)((function(t){e.selectedTab.next(t)})),Object(C.a)((function(e){return"recent"!==e})))},e.prototype.showUpgradeDialog=function(e,t){var n=this;void 0===e&&(e=""),void 0===t&&(t=!1);var i={id:c.p.DIAGRAM_CREATE_PUBLIC,iframeType:u.t.CreateWorkspace,buttons:[{type:"action",clickHandler:function(){n.createDiagramProcess(e,t)},visibility:this.canCreateDiagram?"enable":"disabled"}]};this.mdlCtrl.show(u.u,{inputs:{dialogData:i}})},e.prototype.showCreateFolderUpgradeDialog=function(){var e={id:c.p.PROJECT_CREATE,iframeType:u.t.CreateFolder};this.mdlCtrl.show(u.u,{inputs:{dialogData:e}})},e.prototype.createDiagramByTemplateProcess=function(e,t){var n=this,i={};e&&e.length>0&&(i={templateId:e}),t?this.state.set("ShowTemplateSkip",!0):this.state.set("ShowTemplateSkip",!1),this.router.navigate(["start/new/project",this.state.get("FolderPanelSelectedProject")],{queryParams:i}).catch((function(e){return n.handlePermError(e)})),this.state.set("SelectedLeftPanel","none")},e.prototype.createDiagramProcess=function(e,t){var n=this;if(o.Kb.track("left.folder.createDocument.click",{value1Type:"location",value1:""+this.selectedTab.getValue()}),this.canCreateDiagram){var i=this.state.get("CurrentDiagram");this.state.set("TemplateOriginLocation","dashboard"),this.state.set("ShowTemplateSkip",t);var r={templateId:e};return"start"===i?this.router.navigate(["start/new","project",this.state.get("FolderPanelSelectedProject")],{queryParams:r}).catch((function(e){return n.handlePermError(e)})):this.modelSubManager.stop(i,!0).pipe(Object(O.a)(1),Object(y.a)((function(){n.router.navigate(["start/new","project",n.state.get("FolderPanelSelectedProject")],{queryParams:r}).catch((function(e){return n.handlePermError(e)}))}))).subscribe(),void this.state.set("SelectedLeftPanel","none")}},e.prototype.onDocumentStatusChange=function(e){var t=this.state.get("FolderPanelSelectedTab");if("recent"===t){var n=this.state.get("RecentDiagrams");-1!==(i=n.findIndex((function(t){return t.id===e.id})))&&(n[i].status=e.status,this.state.set("RecentDiagrams",Object(r.j)(n)))}else if(t){var i,a=this.state.get("FolderPanelSelectedProject")||l.E.HOME,o=this.state.get("ProjectDiagrams"),s=o[a];-1!==(i=s.findIndex((function(t){return t.id===e.id})))&&(s[i].status=e.status,o[a]=Object(r.j)(s),this.state.set("ProjectDiagrams",o))}},e.prototype.listenToDocumentStatusChange=function(){var e=this;return this.state.changes("CurrentDiagram").pipe(Object(_.a)((function(){return e.ll.forCurrentObserver(!1).pipe(Object(_.a)((function(e){return e.getDiagramChanges()})),Object(S.a)((function(e){return{id:e.model.id,status:e.model.status}})),Object(k.a)(),Object(C.a)((function(e){var t=Object(r.h)(e,2),n=t[0],i=t[1];return n.status!==i.status})),Object(S.a)((function(e){var t=Object(r.h)(e,2);t[0];return t[1]})))})))},e.prototype.listenToDiagramListChanges=function(){var e=this;this.diagramList=this.state.changes("FolderPanelSelectedTab").pipe(Object(_.a)((function(t){if(e.isFolderEmpty.next(!1),e.showLoadingIndicator.next(!0),"recent"===t)return e.dispatchGetRecentDiagrams().pipe(Object(_.a)((function(){return e.diagramInfoLocator.getRecentDiagrams()})));var n=e.state.get("FolderPanelSelectedProject")||l.E.HOME;return e.getDiagrams(n)})),Object(_.a)((function(t){return e.searchList(t)})),Object(_.a)((function(t){return e.filterList(t)})),Object(_.a)((function(t){return e.sortList(t)})),Object(y.a)((function(t){var n=t.length<=0;e.isFolderEmpty.next(n),e.showLoadingIndicator.next(!1)})))},e.prototype.getDiagrams=function(e){var t=this.state.get("CurrentUser");return e===l.E.HOME||e===l.E.SHARED_HOME?this.diagramInfoLocator.getDiagrams(l.E.HOME).pipe(Object(S.a)((function(n){return n.filter((function(n){var i=Object(p.find)(n.collabs,{role:l.g.OWNER});return e===l.E.SHARED_HOME?i&&i.id!==t:i&&i.id===t}))}))):this.diagramInfoLocator.getDiagrams(e)},e.prototype.listenToSidebarStateChanges=function(){var e=this;return this.state.changes("LeftSidebarState").pipe(Object(_.a)((function(t){switch(e.sidebarState=t,e.changeDetectorRef.markForCheck(),t){case E.b.Expanding:return e.fadeContent(!1).start().pipe(Object(y.a)({complete:function(){return e.columns=3}}));case E.b.Shrinking:case E.b.Collapsing:return e.fadeContent(!1).start().pipe(Object(y.a)({complete:function(){e.columns=3,e.permissionFilter.next(ut.ANY),e.sortOrder.next(pt.LAST_UPDATED)}}));case E.b.Expanded:case E.b.Opened:return e.fadeContent().start();case E.b.Closed:return e.fadeContent(!1).start();default:return b.a}})))},e.prototype.fadeContent=function(e){void 0===e&&(e=!0);var t={opacity:1},n={opacity:0},i=n,r=t;e||(i=t,r=n);var a=new s.e({from:i,to:r,transitionProperty:"opacity",duration:50,easing:"linear"});return a.element=this.contentContainer.nativeElement,a},e.prototype.listenToSelectedProjectChange=function(){var e=this;return this.state.changes("FolderPanelSelectedProject").pipe(Object(C.a)((function(e){return e&&""!==e})),Object(_.a)((function(t){var n=t===l.E.SHARED_HOME?l.E.HOME:t;return e.projectModels.value.find((function(e){return e.id===n}))?(e.isFolderEmpty.next(!1),e.startSubscriptions([n]).pipe(Object(D.a)(t))):v.a})),Object(S.a)((function(t){var n=t===l.E.SHARED_HOME?l.E.HOME:t;return e.projectMdl=e.projectModels.pipe(Object(S.a)((function(e){return t===l.E.SHARED_HOME?new l.y(l.E.SHARED_HOME,"LABELS.SHARED_HOME"):e.find((function(e){return e.id===t}))}))),n})),Object(_.a)((function(t){return e.state.set("CurrentProject",t),e.dispatchGetProjectDiagrams(t).pipe(Object(x.a)(),Object(y.a)((function(){e.state.set("FolderPanelSelectedTab","diagrams")})))})))},e.prototype.searchList=function(e){var t=this;return this.searchText.pipe(Object(w.a)(""),Object(T.a)(this.debounce),Object(S.a)((function(n){if(t.diagramSearch){var i=t.state.get("FolderPanelSelectedProject"),r=t.state.get("FolderPanelSelectedTab");return e.filter((function(e){var n="recent"===r?[].concat.apply([],Object.values(t.diagramSearchResult)):t.diagramSearchResult[i];return!!n&&n.includes(e.id)}))}return e})))},e.prototype.filterList=function(e){var t=this;return this.permissionFilter.pipe(Object(S.a)((function(n){var i=t.state.get("CurrentUser");switch(n){case ut.ANY:return e;case ut.CREATED_BY_ME:return e.filter((function(e){return!!e.collabs&&e.collabs.filter((function(e){return e.id===i&&e.role===l.g.OWNER})).length>0}));case ut.SHARED_BY_ME:return e.filter((function(e){return!!e.collabs&&e.collabs.length>1&&e.collabs.filter((function(e){return e.id===i&&e.role===l.g.OWNER})).length>0}));case ut.SHARED_BY_OTHERS:return e.filter((function(e){return!!e.collabs&&e.collabs.length>1&&e.collabs.filter((function(e){return e.id===i&&(e.role===l.g.EDITOR||e.role===l.g.REVIEWER)})).length>0}));case ut.NOT_SHARED:return e.filter((function(e){return!!e.collabs&&1===e.collabs.length&&e.collabs.filter((function(e){return e.id===i&&e.role===l.g.OWNER})).length>0}));case ut.PRIVATE:return e.filter((function(e){return!!e.privacy&&e.privacy.level===u.n.SPECIFIC&&!!e.collabs&&1===e.collabs.length}));case ut.PUBLIC:return e.filter((function(e){return!!e.privacy&&e.privacy.level===u.n.PUBLIC}));default:return e}})))},e.prototype.sortList=function(e){return this.sortOrder.pipe(Object(S.a)((function(t){switch(t){case pt.LAST_UPDATED:return Object(p.orderBy)(e,["lastUpdated"],["desc"]);case pt.LAST_CREATED:return Object(p.orderBy)(e,["createdTime"],["desc"]);default:return e}})))},e.prototype.navigateToProjectDiagrams=function(e){this.setSelectedProject(e),this.setSelectedTab("diagrams")},e.prototype.setSelectedProject=function(e){this.state.set("FolderPanelSelectedProject",e)},e.prototype.updateProjectList=function(e,t){var n=this.projectModels.value,i=n.findIndex((function(t){return t.id===e})),r=n[i];r&&"rename"===t.action?r.name=t.name:r&&"delete"===t.action&&i>-1&&n.splice(i,1),this.projectModels.next(n)},e.\u0275fac=function(t){return new(t||e)(R.fc(l.x),R.fc(u.y),R.fc(l.i),R.fc(o.B),R.fc(u.m),R.fc(ge.d),R.fc(o.Ib),R.fc(d.d),R.fc(o.db),R.fc(I.a),R.fc(R.j),R.fc(z.e),R.fc(l.n),R.fc(o.gb),R.fc(he.a))},e.\u0275cmp=R.Zb({type:e,selectors:[["folder-panel"]],viewQuery:function(e,t){var n;(1&e&&(R.jd(Le,!0),R.jd(Ne,!0,M.a),R.jd(pe,!0),R.Wc(Ue,!0)),2&e)&&(R.Lc(n=R.uc())&&(t.dropdownItem=n.first),R.Lc(n=R.uc())&&(t.diagramArea=n.first),R.Lc(n=R.uc())&&(t.projectBar=n.first),R.Lc(n=R.uc())&&(t.contentContainer=n.first))},inputs:{panelChangedEvent:"panelChangedEvent"},decls:79,vars:65,consts:[[1,"folder-panel","left-sidebar-panel",3,"ngClass"],["contentContainer",""],[1,"folder-panel-project-bar"],[3,"projectList","onGetSearchResults","onDiagramSearchInProgress","onClickCreateDiagram"],[1,"folder-panel-container"],[1,"folder-panel-header","folder-panel-padding"],["class","folder-panel-arrow-header",4,"ngIf"],["icon","search-thin","data-testid","fp-search-input",1,"folder-panel-search",3,"showClearButton","emitForInputChange","placeholder","updateText"],[1,"folder-panel-header-buttons"],[1,"project-collabs"],[3,"limitCount"],["class","nu-btn-med nu-btn-icon-text primary folder-panel-header-button","translate","",3,"disabled","click",4,"ngIf"],[1,"folder-panel-expanded-search-container","folder-panel-padding","fx-margin-bottom-10"],[1,"dashboard-buttons"],["data-testid","create-workspace-button",1,"template-buttom",3,"trackAction","disabled","click"],[1,"dashboard-panel-header-button"],[1,"nu-icon","nu-icon-custom"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-plus"],["translate","",1,"dashboard-panel-header-button-label"],["class","dashboard-panel-header-button",3,"name","thumbImg","isUserPaused","trackingInfo","onButtonClick",4,"ngIf"],[1,"template-buttom",3,"disabled","click"],[1,"nu-icon","nu-icon-medium"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-more-horizontal"],[1,"folder-panel-search-section-wrapper"],[1,"tag-list"],["class","tag-list-item",4,"ngIf"],[1,"folder-panel-filter-container"],["data-testid","fp-sort-by","direction","down",1,"sort-drop-down",3,"settings"],["sortDropDown",""],["ddbutton","",1,"nu-btn-on-grey",3,"items"],[1,"nu-icon"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-sort"],["translate",""],["dditem","",1,"simple-dd-item"],["translate","",1,"grey","dt-dropdown-item-label"],["dditem","","class","simple-dd-item",3,"item",4,"ngFor","ngForOf"],["data-testid","fp-filter","direction","down",1,"filter-drop-down",3,"settings"],["filterDropDown",""],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-filter"],[1,"folder-panel-content"],["class","fx-margin-top-10","color","grey",4,"ngIf"],["class","folder-panel-default-msg fx-margin-top-20",4,"ngIf"],["class","folder-panel-default-msg fx-margin-top-20 search-message",4,"ngIf"],[1,"project-diagrams-scrollbar",3,"psScrollY"],[3,"diagramList","columnCount","projectCount","isUserPaused"],["diagramArea",""],[1,"folder-panel-arrow-header"],[1,"folder-panel-folder-name-heading"],["translate","",1,"nu-text-medium"],["class","folder-panel-folder-name-heading",4,"ngIf"],[4,"ngIf"],["class","option-dd",4,"ngIf"],[3,"value","changedText",4,"ngIf"],[3,"value","focus","selectAll","changedText",4,"ngIf"],[3,"value","changedText"],[3,"value","focus","selectAll","changedText"],[1,"option-dd"],["class","option-dd-button nu-btn-med",3,"mouseenter",4,"projectRole"],[1,"option-dd-item",3,"mouseleave"],["dropdownItem",""],["translate","",3,"click",4,"projectRole"],["translate","",3,"disabled","click",4,"projectRole"],[1,"option-dd-button","nu-btn-med",3,"mouseenter"],["translate","",3,"click"],["translate","",1,"nu-btn-med","nu-btn-icon-text","primary","folder-panel-header-button",3,"disabled","click"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-share"],[1,"dashboard-panel-header-button",3,"name","thumbImg","isUserPaused","trackingInfo","onButtonClick"],[1,"tag-list-item"],[1,"nu-icon","nu-icon-small","grey",3,"click"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-close"],["dditem","",1,"simple-dd-item",3,"item"],[1,"dt-dropdown-item",3,"click"],["color","grey",1,"fx-margin-top-10"],[1,"folder-panel-default-msg","fx-margin-top-20"],["translate","",1,"grey","fx-center"],[1,"folder-panel-default-msg","fx-margin-top-20","search-message"],["translate","",1,""]],template:function(e,t){if(1&e){var n=R.mc();R.lc(0,"div",0,1),R.lc(2,"div",2),R.lc(3,"project-bar",3),R.tc("onGetSearchResults",(function(e){return t.setSearchResultData(e)}))("onDiagramSearchInProgress",(function(e){return t.showLoadingIndicator.next(e)}))("onClickCreateDiagram",(function(){return t.createDiagram()})),R.kc(),R.kc(),R.lc(4,"div",4),R.lc(5,"div",5),R.cd(6,Fe,4,0,"div",6),R.yc(7,"async"),R.cd(8,Qe,3,3,"div",6),R.yc(9,"async"),R.lc(10,"text-input",7),R.tc("updateText",(function(e){return t.searchText.next(e)})),R.yc(11,"translate"),R.kc(),R.lc(12,"div",8),R.lc(13,"div",9),R.gc(14,"project-user-strip",10),R.kc(),R.cd(15,$e,5,3,"button",11),R.yc(16,"async"),R.yc(17,"async"),R.yc(18,"async"),R.kc(),R.kc(),R.lc(19,"div",12),R.lc(20,"div",13),R.lc(21,"button",14),R.tc("click",(function(){return t.createDiagram()})),R.yc(22,"async"),R.yc(23,"async"),R.lc(24,"div",15),R.wc(),R.lc(25,"svg",16),R.gc(26,"use",17),R.kc(),R.kc(),R.vc(),R.lc(27,"div",18),R.ed(28,"DASHBOARD_PANEL.BLANK"),R.kc(),R.kc(),R.cd(29,tt,2,10,"template-thumbnail",19),R.cd(30,nt,2,10,"template-thumbnail",19),R.cd(31,it,2,10,"template-thumbnail",19),R.cd(32,rt,2,10,"template-thumbnail",19),R.lc(33,"button",20),R.tc("click",(function(){return t.showTemplatesPanel()})),R.yc(34,"async"),R.yc(35,"async"),R.lc(36,"div",15),R.wc(),R.lc(37,"svg",21),R.gc(38,"use",22),R.kc(),R.kc(),R.vc(),R.lc(39,"div",18),R.ed(40,"DASHBOARD_PANEL.MORE_TEMPLATES"),R.kc(),R.kc(),R.kc(),R.lc(41,"div",23),R.lc(42,"div",24),R.cd(43,at,5,3,"div",25),R.kc(),R.lc(44,"div",26),R.lc(45,"abs-dropdown",27,28),R.lc(47,"simple-dropdown-button",29),R.wc(),R.lc(48,"svg",30),R.gc(49,"use",31),R.kc(),R.vc(),R.lc(50,"label",32),R.ed(51,"LABELS.SORT"),R.kc(),R.kc(),R.lc(52,"simple-dropdown-item",33),R.lc(53,"label",34),R.ed(54,"LABELS.SORT_BY"),R.kc(),R.kc(),R.cd(55,ot,3,2,"simple-dropdown-item",35),R.kc(),R.lc(56,"abs-dropdown",36,37),R.lc(58,"simple-dropdown-button",29),R.wc(),R.lc(59,"svg",30),R.gc(60,"use",38),R.kc(),R.vc(),R.lc(61,"label",32),R.ed(62,"LABELS.FILTER"),R.kc(),R.kc(),R.lc(63,"simple-dropdown-item",33),R.lc(64,"label",34),R.ed(65,"LABELS.FILTER_BY"),R.kc(),R.kc(),R.cd(66,st,3,2,"simple-dropdown-item",35),R.kc(),R.kc(),R.kc(),R.kc(),R.lc(67,"div",39),R.yc(68,"async"),R.yc(69,"async"),R.cd(70,ct,1,0,"loading-bubbles",40),R.yc(71,"async"),R.cd(72,lt,5,0,"div",41),R.yc(73,"async"),R.cd(74,dt,8,0,"div",42),R.yc(75,"async"),R.lc(76,"perfect-scrollbar",43),R.tc("psScrollY",(function(e){R.Pc(n);var t=R.Mc(78);return null==t?null:t.onScroll(e)})),R.gc(77,"diagram-list-area",44,45),R.kc(),R.kc(),R.kc(),R.kc()}if(2&e){var i=null;R.Cc("ngClass",t.sidebarState),R.Sb(3),R.Cc("projectList",t.projectModels),R.Sb(3),R.Cc("ngIf","recent"===R.zc(7,32,t.selectedTab)),R.Sb(2),R.Cc("ngIf","recent"!==R.zc(9,34,t.selectedTab)),R.Sb(2),R.Dc("placeholder",R.zc(11,36,"PLACEHOLDERS.SEARCH")),R.Cc("showClearButton",!0)("emitForInputChange",!0),R.Sb(4),R.Cc("limitCount",5),R.Sb(1),R.Cc("ngIf","home"!==(null==(i=R.zc(16,38,t.projectMdl))?null:i.id)&&"shared-home"!==(null==(i=R.zc(17,40,t.projectMdl))?null:i.id)&&"recent"!==R.zc(18,42,t.selectedTab)),R.Sb(6),R.Cc("trackAction",R.Gc(62,ht))("disabled",R.zc(22,44,t.isUserPaused)||0===R.zc(23,46,t.appConnectionStatus)),R.Sb(8),R.Cc("ngIf",t.getDashboardTemplates[0]),R.Sb(1),R.Cc("ngIf",t.getDashboardTemplates[1]),R.Sb(1),R.Cc("ngIf",t.getDashboardTemplates[2]),R.Sb(1),R.Cc("ngIf",t.getDashboardTemplates[3]),R.Sb(1),R.Cc("disabled",R.zc(34,48,t.isUserPaused)||0===R.zc(35,50,t.appConnectionStatus)),R.Sb(10),R.Cc("ngIf",t.diagramSearch),R.Sb(2),R.Cc("settings",R.Gc(63,gt)),R.Sb(2),R.Cc("items",t.sortOptions),R.Sb(8),R.Cc("ngForOf",t.sortOptions),R.Sb(1),R.Cc("settings",R.Gc(64,gt)),R.Sb(2),R.Cc("items",t.filterOptions),R.Sb(8),R.Cc("ngForOf",t.filterOptions),R.Sb(1),R.Xb("folder-panel-content-recent","recent"===R.zc(68,52,t.selectedTab)||"diagrams"===R.zc(69,54,t.selectedTab)),R.Sb(3),R.Cc("ngIf",R.zc(71,56,t.showLoadingIndicator)),R.Sb(2),R.Cc("ngIf",R.zc(73,58,t.isFolderEmpty)&&!t.diagramSearch),R.Sb(2),R.Cc("ngIf",R.zc(75,60,t.isFolderEmpty)&&t.diagramSearch),R.Sb(3),R.Cc("diagramList",t.diagramList)("columnCount",t.columns)("projectCount",t.projectCount)("isUserPaused",t.isUserPaused)}},directives:[V.q,pe,V.t,F.a,Ee,Y.a,z.a,ve.a,ye.a,Oe.a,V.s,re.b,M.a,Me.a,l.B,Re.a,Ae.a],pipes:[V.b,z.d],styles:[".left-sidebar-panel[_ngcontent-%COMP%]{width:264px}.left-sidebar-panel.collapsing[_ngcontent-%COMP%], .left-sidebar-panel.expanded[_ngcontent-%COMP%], .left-sidebar-panel.shrinking[_ngcontent-%COMP%]{width:890px}.left-sidebar-panel.closed[_ngcontent-%COMP%]{transform:translateX(-215px);width:0}.left-sidebar-panel-padding[_ngcontent-%COMP%]{padding-left:10px;padding-right:10px}.folder-panel[_ngcontent-%COMP%]{display:flex;will-change:opacity;background-color:#fff;border-right:1px solid #d3d3e7}.folder-panel.collapsing[_ngcontent-%COMP%], .folder-panel.expanded[_ngcontent-%COMP%], .folder-panel.shrinking[_ngcontent-%COMP%]{width:calc(890px + 216px)}.folder-panel.collapsing[_ngcontent-%COMP%]   .folder-panel-header[_ngcontent-%COMP%], .folder-panel.expanded[_ngcontent-%COMP%]   .folder-panel-header[_ngcontent-%COMP%], .folder-panel.shrinking[_ngcontent-%COMP%]   .folder-panel-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.folder-panel.collapsing[_ngcontent-%COMP%]   .folder-panel-header[_ngcontent-%COMP%]   .folder-panel-header-button[_ngcontent-%COMP%], .folder-panel.expanded[_ngcontent-%COMP%]   .folder-panel-header[_ngcontent-%COMP%]   .folder-panel-header-button[_ngcontent-%COMP%], .folder-panel.shrinking[_ngcontent-%COMP%]   .folder-panel-header[_ngcontent-%COMP%]   .folder-panel-header-button[_ngcontent-%COMP%]{margin-top:0;width:-webkit-max-content;width:-moz-max-content;width:max-content;margin-left:10px}.folder-panel.collapsing[_ngcontent-%COMP%]   .folder-panel-header[_ngcontent-%COMP%]   .folder-panel-default-msg[_ngcontent-%COMP%], .folder-panel.collapsing[_ngcontent-%COMP%]   .folder-panel-header[_ngcontent-%COMP%]   .folder-panel-loading-bubbles[_ngcontent-%COMP%], .folder-panel.collapsing[_ngcontent-%COMP%]   .folder-panel-header[_ngcontent-%COMP%]   .folder-panel-search[_ngcontent-%COMP%], .folder-panel.expanded[_ngcontent-%COMP%]   .folder-panel-header[_ngcontent-%COMP%]   .folder-panel-default-msg[_ngcontent-%COMP%], .folder-panel.expanded[_ngcontent-%COMP%]   .folder-panel-header[_ngcontent-%COMP%]   .folder-panel-loading-bubbles[_ngcontent-%COMP%], .folder-panel.expanded[_ngcontent-%COMP%]   .folder-panel-header[_ngcontent-%COMP%]   .folder-panel-search[_ngcontent-%COMP%], .folder-panel.shrinking[_ngcontent-%COMP%]   .folder-panel-header[_ngcontent-%COMP%]   .folder-panel-default-msg[_ngcontent-%COMP%], .folder-panel.shrinking[_ngcontent-%COMP%]   .folder-panel-header[_ngcontent-%COMP%]   .folder-panel-loading-bubbles[_ngcontent-%COMP%], .folder-panel.shrinking[_ngcontent-%COMP%]   .folder-panel-header[_ngcontent-%COMP%]   .folder-panel-search[_ngcontent-%COMP%]{display:none}.folder-panel.collapsing[_ngcontent-%COMP%]   .folder-panel-expanded-search-container[_ngcontent-%COMP%], .folder-panel.expanded[_ngcontent-%COMP%]   .folder-panel-expanded-search-container[_ngcontent-%COMP%], .folder-panel.shrinking[_ngcontent-%COMP%]   .folder-panel-expanded-search-container[_ngcontent-%COMP%]{display:block}.folder-panel.collapsing[_ngcontent-%COMP%]   .folder-panel-expanded-search-container[_ngcontent-%COMP%]   .folder-panel-search[_ngcontent-%COMP%], .folder-panel.expanded[_ngcontent-%COMP%]   .folder-panel-expanded-search-container[_ngcontent-%COMP%]   .folder-panel-search[_ngcontent-%COMP%], .folder-panel.shrinking[_ngcontent-%COMP%]   .folder-panel-expanded-search-container[_ngcontent-%COMP%]   .folder-panel-search[_ngcontent-%COMP%]{display:block;width:100%}.folder-panel.collapsing[_ngcontent-%COMP%]   .folder-panel-expanded-search-container[_ngcontent-%COMP%]   .filter-drop-down[_ngcontent-%COMP%], .folder-panel.expanded[_ngcontent-%COMP%]   .folder-panel-expanded-search-container[_ngcontent-%COMP%]   .filter-drop-down[_ngcontent-%COMP%], .folder-panel.shrinking[_ngcontent-%COMP%]   .folder-panel-expanded-search-container[_ngcontent-%COMP%]   .filter-drop-down[_ngcontent-%COMP%]{margin-left:10px}.folder-panel.collapsing[_ngcontent-%COMP%]   .folder-panel-expanded-search-container[_ngcontent-%COMP%]   .filter-drop-down[_ngcontent-%COMP%]   .nu-icon[_ngcontent-%COMP%], .folder-panel.collapsing[_ngcontent-%COMP%]   .folder-panel-expanded-search-container[_ngcontent-%COMP%]   .sort-drop-down[_ngcontent-%COMP%]   .nu-icon[_ngcontent-%COMP%], .folder-panel.expanded[_ngcontent-%COMP%]   .folder-panel-expanded-search-container[_ngcontent-%COMP%]   .filter-drop-down[_ngcontent-%COMP%]   .nu-icon[_ngcontent-%COMP%], .folder-panel.expanded[_ngcontent-%COMP%]   .folder-panel-expanded-search-container[_ngcontent-%COMP%]   .sort-drop-down[_ngcontent-%COMP%]   .nu-icon[_ngcontent-%COMP%], .folder-panel.shrinking[_ngcontent-%COMP%]   .folder-panel-expanded-search-container[_ngcontent-%COMP%]   .filter-drop-down[_ngcontent-%COMP%]   .nu-icon[_ngcontent-%COMP%], .folder-panel.shrinking[_ngcontent-%COMP%]   .folder-panel-expanded-search-container[_ngcontent-%COMP%]   .sort-drop-down[_ngcontent-%COMP%]   .nu-icon[_ngcontent-%COMP%]{width:25px;height:25px}.project-collabs[_ngcontent-%COMP%]{margin-right:10px}.option-dd[_ngcontent-%COMP%]{position:relative}.option-dd[_ngcontent-%COMP%]   .nu-icon[_ngcontent-%COMP%]{transform:rotate(90deg)}.option-dd-item[_ngcontent-%COMP%]{width:100px;padding:10px;background:#fff;border:1px solid #dcdcdc;border-radius:4px;display:none;position:absolute;z-index:1;right:0}.option-dd-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin-bottom:10px;display:block}.option-dd-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:last-of-type{margin-bottom:0}.folder-panel-container[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;height:100vh;padding:30px 0}.folder-panel-project-bar[_ngcontent-%COMP%]{background-color:#fff;border-right:1px solid #d3d3e7;height:100vh;width:300px}.folder-panel-header[_ngcontent-%COMP%]{padding-bottom:25px}.folder-panel-header[_ngcontent-%COMP%]   .folder-panel-header-button[_ngcontent-%COMP%]{margin-top:10px;margin-right:0;width:100%}.folder-panel-expanded-search-container[_ngcontent-%COMP%]{display:none}.folder-panel-search-section-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding-top:25px;padding-bottom:25px;border-top:1px solid rgba(202,204,206,.5)}.folder-panel-search-container[_ngcontent-%COMP%]{flex-grow:1}.folder-panel-filter-container[_ngcontent-%COMP%]{flex-grow:1;justify-content:flex-end;display:flex;align-items:center}.folder-panel-filter-container[_ngcontent-%COMP%]   abs-dropdown[_ngcontent-%COMP%]{margin-left:10px}.folder-panel-filter-container[_ngcontent-%COMP%]   abs-dropdown[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#04263d}.folder-panel-filter-container[_ngcontent-%COMP%]  .dt-dropdown-item{display:block}.folder-panel-filter-container[_ngcontent-%COMP%]  .dt-dropdown-item-label{display:block;margin-bottom:10px}.folder-panel-filter-container[_ngcontent-%COMP%]  .abs-dropdown-inner-wrapper simple-dropdown-item:not(:last-child) .dt-dropdown-item{margin-bottom:10px}.folder-panel-btn-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-left:10px}.folder-panel-content[_ngcontent-%COMP%], .folder-panel-content-recent[_ngcontent-%COMP%]{display:flex;height:100%;flex-direction:column;overflow:hidden}.folder-panel-tabs[_ngcontent-%COMP%]{display:flex;font-size:14px;padding-right:10px}.folder-panel-arrow-header[_ngcontent-%COMP%]{display:flex}.folder-panel-arrow-header[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{cursor:pointer;width:30px}.folder-panel-arrow-header[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]:hover{color:#61a15e}.folder-panel-arrow-header[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{flex:1;padding-left:10px;padding-top:2px}.folder-panel-heading[_ngcontent-%COMP%]{width:100px}.folder-panel-heading[_ngcontent-%COMP%]:hover{color:#61a15e}.folder-panel-heading[_ngcontent-%COMP%]   a.selected[_ngcontent-%COMP%]{border-bottom:2px solid #ffc648}.folder-panel-heading[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:16px;padding-bottom:5px}.folder-panel-default-msg[_ngcontent-%COMP%]{line-height:20px;padding-left:15px}.folder-panel-folder-name-heading[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;padding-left:5px;font-weight:700}.folder-panel-folder-name-heading[_ngcontent-%COMP%]  .editable-label-container{white-space:normal;height:auto;word-break:break-all}.folder-panel-folder-name-heading[_ngcontent-%COMP%]  .editable-label{font-size:16px}.folder-panel-folder-name-heading[_ngcontent-%COMP%]  .option-dd .option-dd-button{background-color:transparent}.folder-panel-folder-name-heading[_ngcontent-%COMP%]  .option-dd .option-dd-button .nu-icon{height:16px}.folder-panel-header-buttons[_ngcontent-%COMP%]{display:flex;align-items:center}.folder-panel-header-buttons[_ngcontent-%COMP%]   abs-dropdown[_ngcontent-%COMP%]{margin-left:10px}.folder-panel-header-buttons[_ngcontent-%COMP%]  .dt-dropdown-item{display:block}.folder-panel-header-buttons[_ngcontent-%COMP%]  .dt-dropdown-item-label{display:block;margin-bottom:10px}.folder-panel-header-buttons[_ngcontent-%COMP%]  .abs-dropdown-inner-wrapper simple-dropdown-item:not(:last-child) .dt-dropdown-item{margin-bottom:5px}.tag-list[_ngcontent-%COMP%]{display:flex}.tag-list[_ngcontent-%COMP%]   .tag-list-item[_ngcontent-%COMP%]{border:none;display:flex;align-items:center;background-color:#f1f4fa;padding-left:10px;border-radius:5px}.tag-list[_ngcontent-%COMP%]   .tag-list-item[_ngcontent-%COMP%]   .nu-icon[_ngcontent-%COMP%]{margin:3px 0 0 3px;width:25px;height:25px;cursor:pointer}.search-message[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:16px}.search-message[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin-top:16px;list-style-position:inside}.search-message[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:13px;color:#7e7e7e}.dashboard-buttons[_ngcontent-%COMP%]{padding-bottom:25px;display:flex}.dashboard-buttons[_ngcontent-%COMP%]   .nu-icon[_ngcontent-%COMP%]{margin-left:-8px}.dashboard-panel-header-button[_ngcontent-%COMP%], .dashboard-panel-header-button[_ngcontent-%COMP%]  .template-thumbnail-container{width:123px}.show-template-icon[_ngcontent-%COMP%]{margin-bottom:12px}.dashboard-panel-header-button-label[_ngcontent-%COMP%]{margin-right:12px;text-align:center;color:#14282e;font-size:12px;height:20px;padding-top:5px}.template-buttom[_ngcontent-%COMP%]{cursor:pointer;background:none}.template-buttom[_ngcontent-%COMP%]:hover   .dashboard-panel-header-button-label[_ngcontent-%COMP%]{color:#195249}.nu-icon-custom[_ngcontent-%COMP%]{width:60px;height:60px}.dashboard-panel-header-button[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;position:static;width:125.5px;height:112px;left:0;top:0;background:#fff;border:1px solid rgba(202,204,206,.5);box-sizing:border-box;border-radius:4px;margin-right:12px;flex:none;order:0;flex-grow:1}.dashboard-panel-header-button[_ngcontent-%COMP%]  .template-thumbnail-container{width:125.5px;height:112px;box-shadow:none;border:none}.dashboard-panel-header-button[_ngcontent-%COMP%]:hover{border-color:#51c0aa;background:linear-gradient(0deg,rgba(81,192,170,.05),rgba(81,192,170,.05)),hsla(0,0%,100%,.65)}.dashboard-panel-header-button[_ngcontent-%COMP%]:hover   .nu-icon[_ngcontent-%COMP%]{color:#29947f}.dashboard-panel-header-button[_ngcontent-%COMP%]   .dashboard-buttons[_ngcontent-%COMP%]{margin-right:0}.dashboard-panel-header-button[_ngcontent-%COMP%]   .nu-icon[_ngcontent-%COMP%]{margin-left:0}"],changeDetection:0}),e}()},jDMA:function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));var i=n("D57K"),r=n("5xGT"),a=n("nsO7"),o=n("ZTXN"),s=n("g6G6"),c=n("ROBh"),l=n("6Oco"),d=n("3p4X"),u=n("xVbo"),p=n("TLy2"),h=n("8j5Y"),g=n("J+dc"),f=n("cJ9h"),m=n("YtkY"),b=n("w1VY"),v=n("7zx0"),y=n("flPR"),O=n("h1tj"),_=function(e){function t(t,n){var i=e.call(this)||this;return i.peerId=t,i.user=n,i.onChange=function(){return null},i.prepare(),i}return Object(i.e)(t,e),t.prototype.destroy=function(){},t.prototype.animate=function(e,n,i){void 0===i&&(i=t.ANIMATION_DURATION),O.Tween.get(this,{override:!0,onChange:this.onChange}).to({x:e,y:n},i,O.Ease.linear)},t.prototype.prepare=function(){var e=new O.Shape;e.graphics.clear(),e.graphics.beginFill(this.user.displayColor),e.graphics.moveTo(0,0),e.graphics.lineTo(3,12),e.graphics.lineTo(4,4),e.graphics.lineTo(12,3),e.graphics.lineTo(0,0),e.graphics.endFill();var t=new O.Text(this.user.fullName,"12px Arial","#fff");t.x=12,t.y=12;var n=new O.Shape,i=t.getMeasuredWidth()+12,r=t.getMeasuredHeight()+12;n.graphics.beginFill(this.user.displayColor),n.graphics.drawRect(6,6,i,r),n.graphics.endFill(),this.addChild(e),this.addChild(n),this.addChild(t)},t.ANIMATION_DURATION=100,t}(O.Container),C=n("wkcE"),P=n("EM62"),x=function(e){function t(t,n,i,r,a){var s=e.call(this,t)||this;return s.state=t,s.diagToViewport=n,s.realtimeStates=i,s.commandService=r,s.collabLocator=a,s.addSource=new o.a,s.removeSource=new o.a,s.changeSource=new o.a,s.pointers={},s.pointerData={},s}var n;return Object(i.e)(t,e),n=t,Object.defineProperty(t.prototype,"indicators",{get:function(){return Object(a.values)(this.pointers)},enumerable:!1,configurable:!0}),t.prototype.initialize=function(){var e=this;this.subs.push(this.state.changes("RealtimeConnectionStatus").pipe(Object(u.a)((function(e){return e===v.a.ONLINE})),Object(p.a)((function(){return e.state.changes("CurrentDiagram").pipe(Object(h.a)((function(){e.removeAllIndicators()})),Object(p.a)((function(){return Object(s.a)(e.listenToViewportChanges(),e.listenToRealtimePointerStates(),e.listenToRealtimeSelectedStates(),e.listenToAddedPeers(),e.listenToCleanupInterval(),e.listenToRemovedPeers())})))}))).subscribe())},t.prototype.createAddSource=function(){return this.addSource},t.prototype.createRemoveSource=function(){return this.removeSource},t.prototype.createChangeSource=function(){return this.changeSource},t.prototype.listenToRealtimeSelectedStates=function(){var e=this;return this.realtimeStates.get(n.KEY_SELECTED).pipe(Object(h.a)((function(t){var n=JSON.parse(t.value);e.updateSelectionBlockState(t.userId,n)})))},t.prototype.listenToAddedPeers=function(){var e=this;return this.realtimeStates.addedPeers().pipe(Object(p.a)((function(t){return e.realtimeStates.get(n.KEY_POINTERS).pipe(Object(u.a)((function(e){return e.peerId===t})),Object(g.a)(1))})),Object(h.a)((function(){e.realtimeStates.set("selected",JSON.stringify(e.state.get("Selected")))})))},t.prototype.updateSelectionBlockState=function(e,t){var n=this.state.get("SelectionBlocked"),i=n&&n.length?n.find((function(t){return t.userId===e})):void 0;i?(i.selected=t,this.state.set("SelectionBlocked",n)):(n.push({userId:e,selected:t}),this.state.set("SelectionBlocked",n))},t.prototype.listenToRealtimePointerStates=function(){var e=this;return this.realtimeStates.get(n.KEY_POINTERS).pipe(Object(f.a)((function(t){var n=Boolean(e.pointerData[t.peerId]);return e.pointerData[t.peerId]=JSON.parse(t.value),e.pointerTime[t.peerId]=Date.now(),e.pointers[t.peerId]?Object(c.a)(e.pointers[t.peerId]):n?Object(l.b)():e.collabLocator.getCollab(t.userId).pipe(Object(u.a)((function(e){return!!e})),Object(g.a)(1),Object(m.a)((function(n){return e.createRealtimePointerIndicator(n,t.peerId)})))})),Object(u.a)((function(e){return!!e})),Object(h.a)((function(t){e.updateRealtimePointerIndicator(t)})))},t.prototype.listenToViewportChanges=function(){var e=this;return Object(s.a)(this.state.changes("DiagramPan"),this.state.changes("DiagramZoomLevel")).pipe(Object(h.a)((function(){return e.updateIndicatorPositions()})))},t.prototype.listenToCleanupInterval=function(){var e=this;return Object(d.a)(n.TIME_INACTIVE).pipe(Object(h.a)((function(){return e.removeOldIndicators()})))},t.prototype.listenToRemovedPeers=function(){var e=this;return this.realtimeStates.removedPeers().pipe(Object(h.a)((function(t){return e.removeIndicator(t)})))},t.prototype.removeIndicator=function(e){var t=this.pointers[e];t&&this.updateSelectionBlockState(t.user.id,[]);var n=this.indicators.findIndex((function(e){return e===t}));return this.indicators.splice(n,1),this.removeSource.next(t),delete this.pointers[e],delete this.pointerData[e],delete this.pointerTime[e],Object(l.b)()},t.prototype.removeAllIndicators=function(){var e,t;try{for(var n=Object(i.k)(this.indicators),r=n.next();!r.done;r=n.next()){var a=r.value;this.removeSource.next(a),a.destroy()}}catch(o){e={error:o}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return this.pointers={},this.pointerData={},this.pointerTime={},Object(l.b)()},t.prototype.removeOldIndicators=function(){var e,t,r=Date.now()-n.TIME_INACTIVE;try{for(var a=Object(i.k)(Object.entries(this.pointerTime)),o=a.next();!o.done;o=a.next()){var s=Object(i.h)(o.value,2),c=s[0];s[1]<r&&this.removeIndicator(c)}}catch(d){e={error:d}}finally{try{o&&!o.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return Object(l.b)()},t.prototype.updateIndicatorPositions=function(){var e,t;try{for(var n=Object(i.k)(Object.keys(this.pointers)),r=n.next();!r.done;r=n.next()){var a=r.value,o=this.pointers[a];this.updateRealtimePointerIndicator(o)}}catch(s){e={error:s}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}},t.prototype.createRealtimePointerIndicator=function(e,t){var n=this,i=new _(t,e);return this.pointers[t]=i,this.addSource.next(i),i.onChange=function(){return n.changeSource.next(i)},this.updateRealtimePointerIndicator(i,!1),i},t.prototype.updateRealtimePointerIndicator=function(e,t){void 0===t&&(t=!0);var n=this.pointerData[e.peerId],i=this.diagToViewport.x(n[0]),r=this.diagToViewport.y(n[1]);t?e.animate(i,r):(e.x=i,e.y=r)},t.KEY_POINTERS="pointer",t.KEY_SELECTED="selected",t.TIME_INACTIVE=6e4,t.\u0275fac=function(e){return new(e||t)(P.pc(r.Ib),P.pc(b.a),P.pc(v.b),P.pc(r.B),P.pc(C.a))},t.\u0275prov=P.bc({token:t,factory:t.\u0275fac}),t=n=Object(i.d)([Object(y.a)(),Object(i.g)("design:paramtypes",[r.Ib,b.a,v.b,r.B,C.a])],t)}(y.b)},"oqI+":function(e,t,n){"use strict";n.d(t,"a",(function(){return _e})),n.d(t,"b",(function(){return ge})),n.d(t,"c",(function(){return Pe})),n.d(t,"d",(function(){return X}));var i=n("zygG"),r=n("fGyu"),a=n("9fIP"),o=n("MMYH"),s=n("EM62"),c=n("2kYt"),l=n("qvOF"),d=n("cZZj"),u=n("5XID"),p=n("ZTXN"),h=n("bwdy"),g=n("3p4X"),f=n("VvXq"),m=n("IdLP"),b=n("g6G6"),v=n("kuMc"),y=n("jIqt"),O=n("YtkY"),_=n("J+dc"),C=n("8j5Y"),P=n("TLy2"),x=n("E5oP");function S(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function k(e,t){var n=t?"":"none";S(e.style,{touchAction:t?"":"none",webkitUserDrag:t?"":"none",webkitTapHighlightColor:t?"":"transparent",userSelect:n,msUserSelect:n,webkitUserSelect:n,MozUserSelect:n})}function D(e,t){var n=e.style;n.position=t?"":"fixed",n.top=n.opacity=t?"":"0",n.left=t?"":"-999em"}function w(e){var t=e.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(e)*t}function T(e,t){return e.getPropertyValue(t).split(",").map((function(e){return e.trim()}))}function I(e){var t=e.getBoundingClientRect();return{top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height}}function j(e,t,n){var i=e.top,r=e.bottom,a=e.left,o=e.right;return n>=i&&n<=r&&t>=a&&t<=o}function E(e,t,n){e.top+=t,e.bottom=e.top+e.height,e.left+=n,e.right=e.left+e.width}function M(e,t,n,i){var r=e.top,a=e.right,o=e.bottom,s=e.left,c=e.width*t,l=e.height*t;return i>r-l&&i<o+l&&n>s-c&&n<a+c}var R=function(){function e(t,n){Object(a.a)(this,e),this._document=t,this._viewportRuler=n,this.positions=new Map}return Object(o.a)(e,[{key:"clear",value:function(){this.positions.clear()}},{key:"cache",value:function(e){var t=this;this.clear(),this.positions.set(this._document,{scrollPosition:this._viewportRuler.getViewportScrollPosition()}),e.forEach((function(e){t.positions.set(e,{scrollPosition:{top:e.scrollTop,left:e.scrollLeft},clientRect:I(e)})}))}},{key:"handleScroll",value:function(e){var t=e.target,n=this.positions.get(t);if(!n)return null;var i,r,a=t===this._document?t.documentElement:t,o=n.scrollPosition;if(t===this._document){var s=this._viewportRuler.getViewportScrollPosition();i=s.top,r=s.left}else i=t.scrollTop,r=t.scrollLeft;var c=o.top-i,l=o.left-r;return this.positions.forEach((function(e,n){e.clientRect&&t!==n&&a.contains(n)&&E(e.clientRect,c,l)})),o.top=i,o.left=r,{top:c,left:l}}}]),e}();function A(e){var t=e.cloneNode(!0),n=t.querySelectorAll("[id]"),i=e.nodeName.toLowerCase();t.removeAttribute("id");for(var r=0;r<n.length;r++)n[r].removeAttribute("id");return"canvas"===i?F(e,t):"input"!==i&&"select"!==i&&"textarea"!==i||U(e,t),L("canvas",e,t,F),L("input, textarea, select",e,t,U),t}function L(e,t,n,i){var r=t.querySelectorAll(e);if(r.length)for(var a=n.querySelectorAll(e),o=0;o<r.length;o++)i(r[o],a[o])}var N=0;function U(e,t){"file"!==t.type&&(t.value=e.value),"radio"===t.type&&t.name&&(t.name="mat-clone-".concat(t.name,"-").concat(N++))}function F(e,t){var n=t.getContext("2d");if(n)try{n.drawImage(e,0,0)}catch(i){}}var B=Object(d.f)({passive:!0}),H=Object(d.f)({passive:!1}),z=function(){function e(t,n,i,r,o,s){var c=this;Object(a.a)(this,e),this._config=n,this._document=i,this._ngZone=r,this._viewportRuler=o,this._dragDropRegistry=s,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._moveEvents=new p.a,this._pointerMoveSubscription=h.a.EMPTY,this._pointerUpSubscription=h.a.EMPTY,this._scrollSubscription=h.a.EMPTY,this._resizeSubscription=h.a.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new p.a,this.started=new p.a,this.released=new p.a,this.ended=new p.a,this.entered=new p.a,this.exited=new p.a,this.dropped=new p.a,this.moved=this._moveEvents,this._pointerDown=function(e){if(c.beforeStarted.next(),c._handles.length){var t=c._handles.find((function(t){var n=e.target;return!!n&&(n===t||t.contains(n))}));!t||c._disabledHandles.has(t)||c.disabled||c._initializeDragSequence(t,e)}else c.disabled||c._initializeDragSequence(c._rootElement,e)},this._pointerMove=function(e){e.preventDefault();var t=c._getPointerPositionOnPage(e);if(c._hasStartedDragging){c._boundaryElement&&(c._previewRect&&(c._previewRect.width||c._previewRect.height)||(c._previewRect=(c._preview||c._rootElement).getBoundingClientRect()));var n=c._getConstrainedPointerPosition(t);if(c._hasMoved=!0,c._lastKnownPointerPosition=t,c._updatePointerDirectionDelta(n),c._dropContainer)c._updateActiveDropContainer(n,t);else{var i=c._activeTransform;if(i.x=n.x-c._pickupPositionOnPage.x+c._passiveTransform.x,i.y=n.y-c._pickupPositionOnPage.y+c._passiveTransform.y,c._applyRootElementTransform(i.x,i.y),"undefined"!=typeof SVGElement&&c._rootElement instanceof SVGElement){var r="translate(".concat(i.x," ").concat(i.y,")");c._rootElement.setAttribute("transform",r)}}c._moveEvents.observers.length&&c._ngZone.run((function(){c._moveEvents.next({source:c,pointerPosition:n,event:e,distance:c._getDragDistance(n),delta:c._pointerDirectionDelta})}))}else{if(Math.abs(t.x-c._pickupPositionOnPage.x)+Math.abs(t.y-c._pickupPositionOnPage.y)>=c._config.dragStartThreshold){var a=Date.now()>=c._dragStartTime+c._getDragStartDelay(e),o=c._dropContainer;if(!a)return void c._endDragSequence(e);o&&(o.isDragging()||o.isReceiving())||(c._hasStartedDragging=!0,c._ngZone.run((function(){return c._startDragSequence(e)})))}}},this._pointerUp=function(e){c._endDragSequence(e)},this.withRootElement(t),this._parentPositions=new R(i,o),s.registerDragItem(this)}return Object(o.a)(e,[{key:"disabled",get:function(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)},set:function(e){var t=Object(u.b)(e);t!==this._disabled&&(this._disabled=t,this._toggleNativeDragInteractions())}},{key:"getPlaceholderElement",value:function(){return this._placeholder}},{key:"getRootElement",value:function(){return this._rootElement}},{key:"getVisibleElement",value:function(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}},{key:"withHandles",value:function(e){return this._handles=e.map((function(e){return Object(u.d)(e)})),this._handles.forEach((function(e){return k(e,!1)})),this._toggleNativeDragInteractions(),this}},{key:"withPreviewTemplate",value:function(e){return this._previewTemplate=e,this}},{key:"withPlaceholderTemplate",value:function(e){return this._placeholderTemplate=e,this}},{key:"withRootElement",value:function(e){var t=this,n=Object(u.d)(e);return n!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular((function(){n.addEventListener("mousedown",t._pointerDown,H),n.addEventListener("touchstart",t._pointerDown,B)})),this._initialTransform=void 0,this._rootElement=n),"undefined"!=typeof SVGElement&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}},{key:"withBoundaryElement",value:function(e){var t=this;return this._boundaryElement=e?Object(u.d)(e):null,this._resizeSubscription.unsubscribe(),e&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe((function(){return t._containInsideBoundaryOnResize()}))),this}},{key:"dispose",value:function(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&Y(this._rootElement),Y(this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=null}},{key:"isDragging",value:function(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}},{key:"reset",value:function(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}},{key:"disableHandle",value:function(e){this._handles.indexOf(e)>-1&&this._disabledHandles.add(e)}},{key:"enableHandle",value:function(e){this._disabledHandles.delete(e)}},{key:"withDirection",value:function(e){return this._direction=e,this}},{key:"_withDropContainer",value:function(e){this._dropContainer=e}},{key:"getFreeDragPosition",value:function(){var e=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:e.x,y:e.y}}},{key:"setFreeDragPosition",value:function(e){return this._activeTransform={x:0,y:0},this._passiveTransform.x=e.x,this._passiveTransform.y=e.y,this._dropContainer||this._applyRootElementTransform(e.x,e.y),this}},{key:"_sortFromLastPointerPosition",value:function(){var e=this._lastKnownPointerPosition;e&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(e),e)}},{key:"_removeSubscriptions",value:function(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}},{key:"_destroyPreview",value:function(){this._preview&&Y(this._preview),this._previewRef&&this._previewRef.destroy(),this._preview=this._previewRef=null}},{key:"_destroyPlaceholder",value:function(){this._placeholder&&Y(this._placeholder),this._placeholderRef&&this._placeholderRef.destroy(),this._placeholder=this._placeholderRef=null}},{key:"_endDragSequence",value:function(e){var t=this;this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging&&(this.released.next({source:this}),this._dropContainer?(this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then((function(){t._cleanupDragArtifacts(e),t._cleanupCachedDimensions(),t._dragDropRegistry.stopDragging(t)}))):(this._passiveTransform.x=this._activeTransform.x,this._passiveTransform.y=this._activeTransform.y,this._ngZone.run((function(){t.ended.next({source:t,distance:t._getDragDistance(t._getPointerPositionOnPage(e))})})),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this))))}},{key:"_startDragSequence",value:function(e){W(e)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();var t,n=this._dropContainer;if(n){var i=this._rootElement,r=i.parentNode,a=this._preview=this._createPreviewElement(),o=this._placeholder=this._createPlaceholderElement(),s=this._anchor=this._anchor||this._document.createComment("");r.insertBefore(s,i),D(i,!1),this._document.body.appendChild(r.replaceChild(o,i)),(t=this._document,t.fullscreenElement||t.webkitFullscreenElement||t.mozFullScreenElement||t.msFullscreenElement||t.body).appendChild(a),this.started.next({source:this}),n.start(),this._initialContainer=n,this._initialIndex=n.getItemIndex(this)}else this.started.next({source:this}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(n?n.getScrollableParents():[])}},{key:"_initializeDragSequence",value:function(e,t){var n=this;t.stopPropagation();var i=this.isDragging(),r=W(t),a=!r&&0!==t.button,o=this._rootElement,s=!r&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now();if(t.target&&t.target.draggable&&"mousedown"===t.type&&t.preventDefault(),!(i||a||s)){this._handles.length&&(this._rootElementTapHighlight=o.style.webkitTapHighlightColor||"",o.style.webkitTapHighlightColor="transparent"),this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scroll.subscribe((function(e){n._updateOnScroll(e)})),this._boundaryElement&&(this._boundaryRect=I(this._boundaryElement));var c=this._previewTemplate;this._pickupPositionInElement=c&&c.template&&!c.matchSize?{x:0,y:0}:this._getPointerPositionInElement(e,t);var l=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(t);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:l.x,y:l.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,t)}}},{key:"_cleanupDragArtifacts",value:function(e){var t=this;D(this._rootElement,!0),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._boundaryRect=this._previewRect=void 0,this._ngZone.run((function(){var n=t._dropContainer,i=n.getItemIndex(t),r=t._getPointerPositionOnPage(e),a=t._getDragDistance(t._getPointerPositionOnPage(e)),o=n._isOverContainer(r.x,r.y);t.ended.next({source:t,distance:a}),t.dropped.next({item:t,currentIndex:i,previousIndex:t._initialIndex,container:n,previousContainer:t._initialContainer,isPointerOverContainer:o,distance:a}),n.drop(t,i,t._initialContainer,o,a,t._initialIndex),t._dropContainer=t._initialContainer}))}},{key:"_updateActiveDropContainer",value:function(e,t){var n=this,i=e.x,r=e.y,a=t.x,o=t.y,s=this._initialContainer._getSiblingContainerFromPosition(this,i,r);!s&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(i,r)&&(s=this._initialContainer),s&&s!==this._dropContainer&&this._ngZone.run((function(){n.exited.next({item:n,container:n._dropContainer}),n._dropContainer.exit(n),n._dropContainer=s,n._dropContainer.enter(n,i,r,s===n._initialContainer&&s.sortingDisabled?n._initialIndex:void 0),n.entered.next({item:n,container:s,currentIndex:s.getItemIndex(n)})})),this._dropContainer._startScrollingIfNecessary(a,o),this._dropContainer._sortItem(this,i,r,this._pointerDirectionDelta),this._preview.style.transform=G(i-this._pickupPositionInElement.x,r-this._pickupPositionInElement.y)}},{key:"_createPreviewElement",value:function(){var e,t=this._previewTemplate,n=this.previewClass,i=t?t.template:null;if(i&&t){var r=t.matchSize?this._rootElement.getBoundingClientRect():null,a=t.viewContainer.createEmbeddedView(i,t.context);a.detectChanges(),e=K(a,this._document),this._previewRef=a,t.matchSize?q(e,r):e.style.transform=G(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else{var o=this._rootElement;q(e=A(o),o.getBoundingClientRect())}return S(e.style,{pointerEvents:"none",margin:"0",position:"fixed",top:"0",left:"0",zIndex:"".concat(this._config.zIndex||1e3)}),k(e,!1),e.classList.add("cdk-drag-preview"),e.setAttribute("dir",this._direction),n&&(Array.isArray(n)?n.forEach((function(t){return e.classList.add(t)})):e.classList.add(n)),e}},{key:"_animatePreviewToPlaceholder",value:function(){var e=this;if(!this._hasMoved)return Promise.resolve();var t=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._preview.style.transform=G(t.left,t.top);var n=function(e){var t=getComputedStyle(e),n=T(t,"transition-property"),i=n.find((function(e){return"transform"===e||"all"===e}));if(!i)return 0;var r=n.indexOf(i),a=T(t,"transition-duration"),o=T(t,"transition-delay");return w(a[r])+w(o[r])}(this._preview);return 0===n?Promise.resolve():this._ngZone.runOutsideAngular((function(){return new Promise((function(t){var i=function n(i){(!i||i.target===e._preview&&"transform"===i.propertyName)&&(e._preview.removeEventListener("transitionend",n),t(),clearTimeout(r))},r=setTimeout(i,1.5*n);e._preview.addEventListener("transitionend",i)}))}))}},{key:"_createPlaceholderElement",value:function(){var e,t=this._placeholderTemplate,n=t?t.template:null;return n?(this._placeholderRef=t.viewContainer.createEmbeddedView(n,t.context),this._placeholderRef.detectChanges(),e=K(this._placeholderRef,this._document)):e=A(this._rootElement),e.classList.add("cdk-drag-placeholder"),e}},{key:"_getPointerPositionInElement",value:function(e,t){var n=this._rootElement.getBoundingClientRect(),i=e===this._rootElement?null:e,r=i?i.getBoundingClientRect():n,a=W(t)?t.targetTouches[0]:t,o=this._getViewportScrollPosition(),s=a.pageX-r.left-o.left,c=a.pageY-r.top-o.top;return{x:r.left-n.left+s,y:r.top-n.top+c}}},{key:"_getPointerPositionOnPage",value:function(e){var t=this._getViewportScrollPosition(),n=W(e)?e.touches[0]||e.changedTouches[0]||{pageX:0,pageY:0}:e,i=n.pageX-t.left,r=n.pageY-t.top;if(this._ownerSVGElement){var a=this._ownerSVGElement.getScreenCTM();if(a){var o=this._ownerSVGElement.createSVGPoint();return o.x=i,o.y=r,o.matrixTransform(a.inverse())}}return{x:i,y:r}}},{key:"_getConstrainedPointerPosition",value:function(e){var t=this._dropContainer?this._dropContainer.lockAxis:null,n=this.constrainPosition?this.constrainPosition(e,this):e,i=n.x,r=n.y;if("x"===this.lockAxis||"x"===t?r=this._pickupPositionOnPage.y:"y"!==this.lockAxis&&"y"!==t||(i=this._pickupPositionOnPage.x),this._boundaryRect){var a=this._pickupPositionInElement,o=a.x,s=a.y,c=this._boundaryRect,l=this._previewRect,d=c.top+s,u=c.bottom-(l.height-s);i=V(i,c.left+o,c.right-(l.width-o)),r=V(r,d,u)}return{x:i,y:r}}},{key:"_updatePointerDirectionDelta",value:function(e){var t=e.x,n=e.y,i=this._pointerDirectionDelta,r=this._pointerPositionAtLastDirectionChange,a=Math.abs(t-r.x),o=Math.abs(n-r.y);return a>this._config.pointerDirectionChangeThreshold&&(i.x=t>r.x?1:-1,r.x=t),o>this._config.pointerDirectionChangeThreshold&&(i.y=n>r.y?1:-1,r.y=n),i}},{key:"_toggleNativeDragInteractions",value:function(){if(this._rootElement&&this._handles){var e=this._handles.length>0||!this.isDragging();e!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=e,k(this._rootElement,e))}}},{key:"_removeRootElementListeners",value:function(e){e.removeEventListener("mousedown",this._pointerDown,H),e.removeEventListener("touchstart",this._pointerDown,B)}},{key:"_applyRootElementTransform",value:function(e,t){var n=G(e,t);null==this._initialTransform&&(this._initialTransform=this._rootElement.style.transform||""),this._rootElement.style.transform=this._initialTransform?n+" "+this._initialTransform:n}},{key:"_getDragDistance",value:function(e){var t=this._pickupPositionOnPage;return t?{x:e.x-t.x,y:e.y-t.y}:{x:0,y:0}}},{key:"_cleanupCachedDimensions",value:function(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}},{key:"_containInsideBoundaryOnResize",value:function(){var e=this._passiveTransform,t=e.x,n=e.y;if(!(0===t&&0===n||this.isDragging())&&this._boundaryElement){var i=this._boundaryElement.getBoundingClientRect(),r=this._rootElement.getBoundingClientRect();if(!(0===i.width&&0===i.height||0===r.width&&0===r.height)){var a=i.left-r.left,o=r.right-i.right,s=i.top-r.top,c=r.bottom-i.bottom;i.width>r.width?(a>0&&(t+=a),o>0&&(t-=o)):t=0,i.height>r.height?(s>0&&(n+=s),c>0&&(n-=c)):n=0,t===this._passiveTransform.x&&n===this._passiveTransform.y||this.setFreeDragPosition({y:n,x:t})}}}},{key:"_getDragStartDelay",value:function(e){var t=this.dragStartDelay;return"number"==typeof t?t:W(e)?t.touch:t?t.mouse:0}},{key:"_updateOnScroll",value:function(e){var t=this._parentPositions.handleScroll(e);if(t){var n=e.target;this._boundaryRect&&(n===this._document||n!==this._boundaryElement&&n.contains(this._boundaryElement))&&E(this._boundaryRect,t.top,t.left),this._pickupPositionOnPage.x+=t.left,this._pickupPositionOnPage.y+=t.top,this._dropContainer||(this._activeTransform.x-=t.left,this._activeTransform.y-=t.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}},{key:"_getViewportScrollPosition",value:function(){var e=this._parentPositions.positions.get(this._document);return e?e.scrollPosition:this._viewportRuler.getViewportScrollPosition()}}]),e}();function G(e,t){return"translate3d(".concat(Math.round(e),"px, ").concat(Math.round(t),"px, 0)")}function V(e,t,n){return Math.max(t,Math.min(n,e))}function Y(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function W(e){return"t"===e.type[0]}function K(e,t){var n=e.rootNodes;if(1===n.length&&n[0].nodeType===t.ELEMENT_NODE)return n[0];var i=t.createElement("div");return n.forEach((function(e){return i.appendChild(e)})),i}function q(e,t){e.style.width="".concat(t.width,"px"),e.style.height="".concat(t.height,"px"),e.style.transform=G(t.left,t.top)}function X(e,t,n){var i=Z(t,e.length-1),r=Z(n,e.length-1);if(i!==r){for(var a=e[i],o=r<i?-1:1,s=i;s!==r;s+=o)e[s]=e[s+o];e[r]=a}}function Z(e,t){return Math.max(0,Math.min(t,e))}var J=function(){function e(t,n,i,r,o){var s=this;Object(a.a)(this,e),this._dragDropRegistry=n,this._ngZone=r,this._viewportRuler=o,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.enterPredicate=function(){return!0},this.beforeStarted=new p.a,this.entered=new p.a,this.exited=new p.a,this.dropped=new p.a,this.sorted=new p.a,this._isDragging=!1,this._itemPositions=[],this._previousSwap={drag:null,delta:0,overlaps:!1},this._siblings=[],this._orientation="vertical",this._activeSiblings=new Set,this._direction="ltr",this._viewportScrollSubscription=h.a.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new p.a,this._cachedShadowRoot=null,this._startScrollInterval=function(){s._stopScrolling(),Object(g.a)(0,f.a).pipe(Object(v.a)(s._stopScrollTimers)).subscribe((function(){var e=s._scrollNode;1===s._verticalScrollDirection?$(e,-2):2===s._verticalScrollDirection&&$(e,2),1===s._horizontalScrollDirection?ee(e,-2):2===s._horizontalScrollDirection&&ee(e,2)}))},this.element=Object(u.d)(t),this._document=i,this.withScrollableParents([this.element]),n.registerDropContainer(this),this._parentPositions=new R(i,o)}return Object(o.a)(e,[{key:"dispose",value:function(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}},{key:"isDragging",value:function(){return this._isDragging}},{key:"start",value:function(){var e=this,t=Object(u.d)(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=t.msScrollSnapType||t.scrollSnapType||"",t.scrollSnapType=t.msScrollSnapType="none",this._cacheItems(),this._siblings.forEach((function(t){return t._startReceiving(e)})),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}},{key:"enter",value:function(e,t,n,i){var r;this.start(),null==i?-1===(r=this.sortingDisabled?this._draggables.indexOf(e):-1)&&(r=this._getItemIndexFromPointerPosition(e,t,n)):r=i;var a=this._activeDraggables,o=a.indexOf(e),s=e.getPlaceholderElement(),c=a[r];if(c===e&&(c=a[r+1]),o>-1&&a.splice(o,1),c&&!this._dragDropRegistry.isDragging(c)){var l=c.getRootElement();l.parentElement.insertBefore(s,l),a.splice(r,0,e)}else if(this._shouldEnterAsFirstChild(t,n)){var d=a[0].getRootElement();d.parentNode.insertBefore(s,d),a.unshift(e)}else Object(u.d)(this.element).appendChild(s),a.push(e);s.style.transform="",this._cacheItemPositions(),this._cacheParentPositions(),this.entered.next({item:e,container:this,currentIndex:this.getItemIndex(e)})}},{key:"exit",value:function(e){this._reset(),this.exited.next({item:e,container:this})}},{key:"drop",value:function(e,t,n,i,r,a){this._reset(),null==a&&(a=n.getItemIndex(e)),this.dropped.next({item:e,currentIndex:t,previousIndex:a,container:this,previousContainer:n,isPointerOverContainer:i,distance:r})}},{key:"withItems",value:function(e){var t=this,n=this._draggables;(this._draggables=e,e.forEach((function(e){return e._withDropContainer(t)})),this.isDragging())&&(n.filter((function(e){return e.isDragging()})).every((function(t){return-1===e.indexOf(t)}))?this._reset():this._cacheItems());return this}},{key:"withDirection",value:function(e){return this._direction=e,this}},{key:"connectedTo",value:function(e){return this._siblings=e.slice(),this}},{key:"withOrientation",value:function(e){return this._orientation=e,this}},{key:"withScrollableParents",value:function(e){var t=Object(u.d)(this.element);return this._scrollableElements=-1===e.indexOf(t)?[t].concat(Object(r.a)(e)):e.slice(),this}},{key:"getScrollableParents",value:function(){return this._scrollableElements}},{key:"getItemIndex",value:function(e){return this._isDragging?Q("horizontal"===this._orientation&&"rtl"===this._direction?this._itemPositions.slice().reverse():this._itemPositions,(function(t){return t.drag===e})):this._draggables.indexOf(e)}},{key:"isReceiving",value:function(){return this._activeSiblings.size>0}},{key:"_sortItem",value:function(e,t,n,i){if(!this.sortingDisabled&&M(this._clientRect,.05,t,n)){var r=this._itemPositions,a=this._getItemIndexFromPointerPosition(e,t,n,i);if(!(-1===a&&r.length>0)){var o="horizontal"===this._orientation,s=Q(r,(function(t){return t.drag===e})),c=r[a],l=r[s].clientRect,d=c.clientRect,u=s>a?1:-1,p=this._getItemOffsetPx(l,d,u),h=this._getSiblingOffsetPx(s,r,u),g=r.slice();X(r,s,a),this.sorted.next({previousIndex:s,currentIndex:a,container:this,item:e}),r.forEach((function(t,n){if(g[n]!==t){var i=t.drag===e,r=i?p:h,a=i?e.getPlaceholderElement():t.drag.getRootElement();t.offset+=r,o?(a.style.transform="translate3d(".concat(Math.round(t.offset),"px, 0, 0)"),E(t.clientRect,0,r)):(a.style.transform="translate3d(0, ".concat(Math.round(t.offset),"px, 0)"),E(t.clientRect,r,0))}})),this._previousSwap.overlaps=j(d,t,n),this._previousSwap.drag=c.drag,this._previousSwap.delta=o?i.x:i.y}}}},{key:"_startScrollingIfNecessary",value:function(e,t){var n=this;if(!this.autoScrollDisabled){var r,a=0,o=0;if(this._parentPositions.positions.forEach((function(s,c){if(c!==n._document&&s.clientRect&&!r&&M(s.clientRect,.05,e,t)){var l=function(e,t,n,i){var r=te(t,i),a=ne(t,n),o=0,s=0;if(r){var c=e.scrollTop;1===r?c>0&&(o=1):e.scrollHeight-c>e.clientHeight&&(o=2)}if(a){var l=e.scrollLeft;1===a?l>0&&(s=1):e.scrollWidth-l>e.clientWidth&&(s=2)}return[o,s]}(c,s.clientRect,e,t),d=Object(i.a)(l,2);a=d[0],o=d[1],(a||o)&&(r=c)}})),!a&&!o){var s=this._viewportRuler.getViewportSize(),c=s.width,l=s.height,d={width:c,height:l,top:0,right:c,bottom:l,left:0};a=te(d,t),o=ne(d,e),r=window}!r||a===this._verticalScrollDirection&&o===this._horizontalScrollDirection&&r===this._scrollNode||(this._verticalScrollDirection=a,this._horizontalScrollDirection=o,this._scrollNode=r,(a||o)&&r?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}}},{key:"_stopScrolling",value:function(){this._stopScrollTimers.next()}},{key:"_cacheParentPositions",value:function(){var e=Object(u.d)(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(e).clientRect}},{key:"_cacheItemPositions",value:function(){var e="horizontal"===this._orientation;this._itemPositions=this._activeDraggables.map((function(e){var t=e.getVisibleElement();return{drag:e,offset:0,clientRect:I(t)}})).sort((function(t,n){return e?t.clientRect.left-n.clientRect.left:t.clientRect.top-n.clientRect.top}))}},{key:"_reset",value:function(){var e=this;this._isDragging=!1;var t=Object(u.d)(this.element).style;t.scrollSnapType=t.msScrollSnapType=this._initialScrollSnap,this._activeDraggables.forEach((function(e){var t=e.getRootElement();t&&(t.style.transform="")})),this._siblings.forEach((function(t){return t._stopReceiving(e)})),this._activeDraggables=[],this._itemPositions=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1,this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}},{key:"_getSiblingOffsetPx",value:function(e,t,n){var i="horizontal"===this._orientation,r=t[e].clientRect,a=t[e+-1*n],o=r[i?"width":"height"]*n;if(a){var s=i?"left":"top",c=i?"right":"bottom";-1===n?o-=a.clientRect[s]-r[c]:o+=r[s]-a.clientRect[c]}return o}},{key:"_getItemOffsetPx",value:function(e,t,n){var i="horizontal"===this._orientation,r=i?t.left-e.left:t.top-e.top;return-1===n&&(r+=i?t.width-e.width:t.height-e.height),r}},{key:"_shouldEnterAsFirstChild",value:function(e,t){if(!this._activeDraggables.length)return!1;var n=this._itemPositions,i="horizontal"===this._orientation;if(n[0].drag!==this._activeDraggables[0]){var r=n[n.length-1].clientRect;return i?e>=r.right:t>=r.bottom}var a=n[0].clientRect;return i?e<=a.left:t<=a.top}},{key:"_getItemIndexFromPointerPosition",value:function(e,t,n,i){var r=this,a="horizontal"===this._orientation;return Q(this._itemPositions,(function(o,s,c){var l=o.drag,d=o.clientRect;if(l===e)return c.length<2;if(i){var u=a?i.x:i.y;if(l===r._previousSwap.drag&&r._previousSwap.overlaps&&u===r._previousSwap.delta)return!1}return a?t>=Math.floor(d.left)&&t<Math.floor(d.right):n>=Math.floor(d.top)&&n<Math.floor(d.bottom)}))}},{key:"_cacheItems",value:function(){this._activeDraggables=this._draggables.slice(),this._cacheItemPositions(),this._cacheParentPositions()}},{key:"_isOverContainer",value:function(e,t){return j(this._clientRect,e,t)}},{key:"_getSiblingContainerFromPosition",value:function(e,t,n){return this._siblings.find((function(i){return i._canReceive(e,t,n)}))}},{key:"_canReceive",value:function(e,t,n){if(!j(this._clientRect,t,n)||!this.enterPredicate(e,this))return!1;var i=this._getShadowRoot().elementFromPoint(t,n);if(!i)return!1;var r=Object(u.d)(this.element);return i===r||r.contains(i)}},{key:"_startReceiving",value:function(e){var t=this._activeSiblings;t.has(e)||(t.add(e),this._cacheParentPositions(),this._listenToScrollEvents())}},{key:"_stopReceiving",value:function(e){this._activeSiblings.delete(e),this._viewportScrollSubscription.unsubscribe()}},{key:"_listenToScrollEvents",value:function(){var e=this;this._viewportScrollSubscription=this._dragDropRegistry.scroll.subscribe((function(t){if(e.isDragging()){var n=e._parentPositions.handleScroll(t);n&&(e._itemPositions.forEach((function(e){E(e.clientRect,n.top,n.left)})),e._itemPositions.forEach((function(t){var n=t.drag;e._dragDropRegistry.isDragging(n)&&n._sortFromLastPointerPosition()})))}else e.isReceiving()&&e._cacheParentPositions()}))}},{key:"_getShadowRoot",value:function(){if(!this._cachedShadowRoot){var e=Object(d.c)(Object(u.d)(this.element));this._cachedShadowRoot=e||this._document}return this._cachedShadowRoot}}]),e}();function Q(e,t){for(var n=0;n<e.length;n++)if(t(e[n],n,e))return n;return-1}function $(e,t){e===window?e.scrollBy(0,t):e.scrollTop+=t}function ee(e,t){e===window?e.scrollBy(t,0):e.scrollLeft+=t}function te(e,t){var n=e.top,i=e.bottom,r=.05*e.height;return t>=n-r&&t<=n+r?1:t>=i-r&&t<=i+r?2:0}function ne(e,t){var n=e.left,i=e.right,r=.05*e.width;return t>=n-r&&t<=n+r?1:t>=i-r&&t<=i+r?2:0}var ie=Object(d.f)({passive:!1,capture:!0}),re=function(){function e(t,n){var i=this;Object(a.a)(this,e),this._ngZone=t,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=new Set,this._globalListeners=new Map,this.pointerMove=new p.a,this.pointerUp=new p.a,this.scroll=new p.a,this._preventDefaultWhileDragging=function(e){i._activeDragInstances.size&&e.preventDefault()},this._persistentTouchmoveListener=function(e){i._activeDragInstances.size&&(e.preventDefault(),i.pointerMove.next(e))},this._document=n}return Object(o.a)(e,[{key:"registerDropContainer",value:function(e){this._dropInstances.has(e)||this._dropInstances.add(e)}},{key:"registerDragItem",value:function(e){var t=this;this._dragInstances.add(e),1===this._dragInstances.size&&this._ngZone.runOutsideAngular((function(){t._document.addEventListener("touchmove",t._persistentTouchmoveListener,ie)}))}},{key:"removeDropContainer",value:function(e){this._dropInstances.delete(e)}},{key:"removeDragItem",value:function(e){this._dragInstances.delete(e),this.stopDragging(e),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,ie)}},{key:"startDragging",value:function(e,t){var n=this;if(!this._activeDragInstances.has(e)&&(this._activeDragInstances.add(e),1===this._activeDragInstances.size)){var i=t.type.startsWith("touch");this._globalListeners.set(i?"touchend":"mouseup",{handler:function(e){return n.pointerUp.next(e)},options:!0}).set("scroll",{handler:function(e){return n.scroll.next(e)},options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:ie}),i||this._globalListeners.set("mousemove",{handler:function(e){return n.pointerMove.next(e)},options:ie}),this._ngZone.runOutsideAngular((function(){n._globalListeners.forEach((function(e,t){n._document.addEventListener(t,e.handler,e.options)}))}))}}},{key:"stopDragging",value:function(e){this._activeDragInstances.delete(e),0===this._activeDragInstances.size&&this._clearGlobalListeners()}},{key:"isDragging",value:function(e){return this._activeDragInstances.has(e)}},{key:"ngOnDestroy",value:function(){var e=this;this._dragInstances.forEach((function(t){return e.removeDragItem(t)})),this._dropInstances.forEach((function(t){return e.removeDropContainer(t)})),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}},{key:"_clearGlobalListeners",value:function(){var e=this;this._globalListeners.forEach((function(t,n){e._document.removeEventListener(n,t.handler,t.options)})),this._globalListeners.clear()}}]),e}();re.\u0275fac=function(e){return new(e||re)(s.pc(s.M),s.pc(c.e))},re.\u0275prov=Object(s.bc)({factory:function(){return new re(Object(s.pc)(s.M),Object(s.pc)(c.e))},token:re,providedIn:"root"}),re.ctorParameters=function(){return[{type:s.M},{type:void 0,decorators:[{type:s.y,args:[c.e]}]}]};var ae={dragStartThreshold:5,pointerDirectionChangeThreshold:5},oe=function(){function e(t,n,i,r){Object(a.a)(this,e),this._document=t,this._ngZone=n,this._viewportRuler=i,this._dragDropRegistry=r}return Object(o.a)(e,[{key:"createDrag",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ae;return new z(e,t,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}},{key:"createDropList",value:function(e){return new J(e,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}}]),e}();oe.\u0275fac=function(e){return new(e||oe)(s.pc(c.e),s.pc(s.M),s.pc(l.e),s.pc(re))},oe.\u0275prov=Object(s.bc)({factory:function(){return new oe(Object(s.pc)(c.e),Object(s.pc)(s.M),Object(s.pc)(l.e),Object(s.pc)(re))},token:oe,providedIn:"root"}),oe.ctorParameters=function(){return[{type:void 0,decorators:[{type:s.y,args:[c.e]}]},{type:s.M},{type:l.e},{type:re}]};var se=new s.B("CDK_DRAG_PARENT"),ce=new s.B("CdkDropListGroup"),le=function(){function e(){Object(a.a)(this,e),this._items=new Set,this._disabled=!1}return Object(o.a)(e,[{key:"disabled",get:function(){return this._disabled},set:function(e){this._disabled=Object(u.b)(e)}},{key:"ngOnDestroy",value:function(){this._items.clear()}}]),e}();le.\u0275fac=function(e){return new(e||le)},le.\u0275dir=s.ac({type:le,selectors:[["","cdkDropListGroup",""]],inputs:{disabled:["cdkDropListGroupDisabled","disabled"]},exportAs:["cdkDropListGroup"],features:[s.Rb([{provide:ce,useExisting:le}])]}),le.propDecorators={disabled:[{type:s.D,args:["cdkDropListGroupDisabled"]}]};var de=new s.B("CDK_DRAG_CONFIG"),ue=0,pe=new s.B("CdkDropList"),he=void 0,ge=function(){function e(t,n,i,r,o,c,l){var d=this;Object(a.a)(this,e),this.element=t,this._changeDetectorRef=i,this._dir=r,this._group=o,this._scrollDispatcher=c,this._destroyed=new p.a,this.connectedTo=[],this.id="cdk-drop-list-".concat(ue++),this.enterPredicate=function(){return!0},this.dropped=new s.t,this.entered=new s.t,this.exited=new s.t,this.sorted=new s.t,this._unsortedItems=new Set,this._dropListRef=n.createDropList(t),this._dropListRef.data=this,l&&this._assignDefaults(l),this._dropListRef.enterPredicate=function(e,t){return d.enterPredicate(e.data,t.data)},this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),e._dropLists.push(this),o&&o._items.add(this)}return Object(o.a)(e,[{key:"disabled",get:function(){return this._disabled||!!this._group&&this._group.disabled},set:function(e){this._dropListRef.disabled=this._disabled=Object(u.b)(e)}},{key:"addItem",value:function(e){this._unsortedItems.add(e),this._dropListRef.isDragging()&&this._syncItemsWithRef()}},{key:"removeItem",value:function(e){this._unsortedItems.delete(e),this._dropListRef.isDragging()&&this._syncItemsWithRef()}},{key:"getSortedItems",value:function(){return Array.from(this._unsortedItems).sort((function(e,t){return e._dragRef.getVisibleElement().compareDocumentPosition(t._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1}))}},{key:"ngOnDestroy",value:function(){var t=e._dropLists.indexOf(this);t>-1&&e._dropLists.splice(t,1),this._group&&this._group._items.delete(this),this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}},{key:"_setupInputSyncSubscription",value:function(t){var n=this;this._dir&&this._dir.change.pipe(Object(y.a)(this._dir.value),Object(v.a)(this._destroyed)).subscribe((function(e){return t.withDirection(e)})),t.beforeStarted.subscribe((function(){var i=Object(u.a)(n.connectedTo).map((function(t){if("string"==typeof t){var n=e._dropLists.find((function(e){return e.id===t}));return n}return t}));if(n._group&&n._group._items.forEach((function(e){-1===i.indexOf(e)&&i.push(e)})),!n._scrollableParentsResolved&&n._scrollDispatcher){var r=n._scrollDispatcher.getAncestorScrollContainers(n.element).map((function(e){return e.getElementRef().nativeElement}));n._dropListRef.withScrollableParents(r),n._scrollableParentsResolved=!0}t.disabled=n.disabled,t.lockAxis=n.lockAxis,t.sortingDisabled=Object(u.b)(n.sortingDisabled),t.autoScrollDisabled=Object(u.b)(n.autoScrollDisabled),t.connectedTo(i.filter((function(e){return e&&e!==n})).map((function(e){return e._dropListRef}))).withOrientation(n.orientation)}))}},{key:"_handleEvents",value:function(e){var t=this;e.beforeStarted.subscribe((function(){t._syncItemsWithRef(),t._changeDetectorRef.markForCheck()})),e.entered.subscribe((function(e){t.entered.emit({container:t,item:e.item.data,currentIndex:e.currentIndex})})),e.exited.subscribe((function(e){t.exited.emit({container:t,item:e.item.data}),t._changeDetectorRef.markForCheck()})),e.sorted.subscribe((function(e){t.sorted.emit({previousIndex:e.previousIndex,currentIndex:e.currentIndex,container:t,item:e.item.data})})),e.dropped.subscribe((function(e){t.dropped.emit({previousIndex:e.previousIndex,currentIndex:e.currentIndex,previousContainer:e.previousContainer.data,container:e.container.data,item:e.item.data,isPointerOverContainer:e.isPointerOverContainer,distance:e.distance}),t._changeDetectorRef.markForCheck()}))}},{key:"_assignDefaults",value:function(e){var t=e.lockAxis,n=e.draggingDisabled,i=e.sortingDisabled,r=e.listAutoScrollDisabled,a=e.listOrientation;this.disabled=null!=n&&n,this.sortingDisabled=null!=i&&i,this.autoScrollDisabled=null!=r&&r,this.orientation=a||"vertical",t&&(this.lockAxis=t)}},{key:"_syncItemsWithRef",value:function(){this._dropListRef.withItems(this.getSortedItems().map((function(e){return e._dragRef})))}}]),e}();ge.\u0275fac=function(e){return new(e||ge)(s.fc(s.r),s.fc(oe),s.fc(s.j),s.fc(x.c,8),s.fc(ce,12),s.fc(l.c),s.fc(de,8))},ge.\u0275dir=s.ac({type:ge,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(e,t){2&e&&(s.oc("id",t.id),s.Xb("cdk-drop-list-disabled",t.disabled)("cdk-drop-list-dragging",t._dropListRef.isDragging())("cdk-drop-list-receiving",t._dropListRef.isReceiving()))},inputs:{connectedTo:["cdkDropListConnectedTo","connectedTo"],id:"id",enterPredicate:["cdkDropListEnterPredicate","enterPredicate"],disabled:["cdkDropListDisabled","disabled"],sortingDisabled:["cdkDropListSortingDisabled","sortingDisabled"],autoScrollDisabled:["cdkDropListAutoScrollDisabled","autoScrollDisabled"],orientation:["cdkDropListOrientation","orientation"],lockAxis:["cdkDropListLockAxis","lockAxis"],data:["cdkDropListData","data"]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],features:[s.Rb([{provide:ce,useValue:he},{provide:pe,useExisting:ge}])]}),ge._dropLists=[],ge.ctorParameters=function(){return[{type:s.r},{type:oe},{type:s.j},{type:x.c,decorators:[{type:s.N}]},{type:le,decorators:[{type:s.N},{type:s.y,args:[ce]},{type:s.ab}]},{type:l.c},{type:void 0,decorators:[{type:s.N},{type:s.y,args:[de]}]}]},ge.propDecorators={connectedTo:[{type:s.D,args:["cdkDropListConnectedTo"]}],data:[{type:s.D,args:["cdkDropListData"]}],orientation:[{type:s.D,args:["cdkDropListOrientation"]}],id:[{type:s.D}],lockAxis:[{type:s.D,args:["cdkDropListLockAxis"]}],disabled:[{type:s.D,args:["cdkDropListDisabled"]}],sortingDisabled:[{type:s.D,args:["cdkDropListSortingDisabled"]}],enterPredicate:[{type:s.D,args:["cdkDropListEnterPredicate"]}],autoScrollDisabled:[{type:s.D,args:["cdkDropListAutoScrollDisabled"]}],dropped:[{type:s.O,args:["cdkDropListDropped"]}],entered:[{type:s.O,args:["cdkDropListEntered"]}],exited:[{type:s.O,args:["cdkDropListExited"]}],sorted:[{type:s.O,args:["cdkDropListSorted"]}]};var fe=new s.B("CdkDragHandle"),me=function(){function e(t,n){Object(a.a)(this,e),this.element=t,this._stateChanges=new p.a,this._disabled=!1,this._parentDrag=n}return Object(o.a)(e,[{key:"disabled",get:function(){return this._disabled},set:function(e){this._disabled=Object(u.b)(e),this._stateChanges.next(this)}},{key:"ngOnDestroy",value:function(){this._stateChanges.complete()}}]),e}();me.\u0275fac=function(e){return new(e||me)(s.fc(s.r),s.fc(se,12))},me.\u0275dir=s.ac({type:me,selectors:[["","cdkDragHandle",""]],hostAttrs:[1,"cdk-drag-handle"],inputs:{disabled:["cdkDragHandleDisabled","disabled"]},features:[s.Rb([{provide:fe,useExisting:me}])]}),me.ctorParameters=function(){return[{type:s.r},{type:void 0,decorators:[{type:s.y,args:[se]},{type:s.N},{type:s.ab}]}]},me.propDecorators={disabled:[{type:s.D,args:["cdkDragHandleDisabled"]}]};var be=new s.B("CdkDragPlaceholder"),ve=function e(t){Object(a.a)(this,e),this.templateRef=t};ve.\u0275fac=function(e){return new(e||ve)(s.fc(s.cb))},ve.\u0275dir=s.ac({type:ve,selectors:[["ng-template","cdkDragPlaceholder",""]],inputs:{data:"data"},features:[s.Rb([{provide:be,useExisting:ve}])]}),ve.ctorParameters=function(){return[{type:s.cb}]},ve.propDecorators={data:[{type:s.D}]};var ye=new s.B("CdkDragPreview"),Oe=function(){function e(t){Object(a.a)(this,e),this.templateRef=t,this._matchSize=!1}return Object(o.a)(e,[{key:"matchSize",get:function(){return this._matchSize},set:function(e){this._matchSize=Object(u.b)(e)}}]),e}();Oe.\u0275fac=function(e){return new(e||Oe)(s.fc(s.cb))},Oe.\u0275dir=s.ac({type:Oe,selectors:[["ng-template","cdkDragPreview",""]],inputs:{matchSize:"matchSize",data:"data"},features:[s.Rb([{provide:ye,useExisting:Oe}])]}),Oe.ctorParameters=function(){return[{type:s.cb}]},Oe.propDecorators={data:[{type:s.D}],matchSize:[{type:s.D}]};var _e=function(){function e(t,n,i,r,o,c,l,d,u,h){var g=this;Object(a.a)(this,e),this.element=t,this.dropContainer=n,this._document=i,this._ngZone=r,this._viewContainerRef=o,this._dir=l,this._changeDetectorRef=u,this._selfHandle=h,this._destroyed=new p.a,this.started=new s.t,this.released=new s.t,this.ended=new s.t,this.entered=new s.t,this.exited=new s.t,this.dropped=new s.t,this.moved=new m.a((function(e){var t=g._dragRef.moved.pipe(Object(O.a)((function(e){return{source:g,pointerPosition:e.pointerPosition,event:e.event,delta:e.delta,distance:e.distance}}))).subscribe(e);return function(){t.unsubscribe()}})),this._dragRef=d.createDrag(t,{dragStartThreshold:c&&null!=c.dragStartThreshold?c.dragStartThreshold:5,pointerDirectionChangeThreshold:c&&null!=c.pointerDirectionChangeThreshold?c.pointerDirectionChangeThreshold:5,zIndex:null==c?void 0:c.zIndex}),this._dragRef.data=this,c&&this._assignDefaults(c),n&&(this._dragRef._withDropContainer(n._dropListRef),n.addItem(this)),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}return Object(o.a)(e,[{key:"disabled",get:function(){return this._disabled||this.dropContainer&&this.dropContainer.disabled},set:function(e){this._disabled=Object(u.b)(e),this._dragRef.disabled=this._disabled}},{key:"getPlaceholderElement",value:function(){return this._dragRef.getPlaceholderElement()}},{key:"getRootElement",value:function(){return this._dragRef.getRootElement()}},{key:"reset",value:function(){this._dragRef.reset()}},{key:"getFreeDragPosition",value:function(){return this._dragRef.getFreeDragPosition()}},{key:"ngAfterViewInit",value:function(){var e=this;this._ngZone.onStable.pipe(Object(_.a)(1),Object(v.a)(this._destroyed)).subscribe((function(){e._updateRootElement(),e._handles.changes.pipe(Object(y.a)(e._handles),Object(C.a)((function(t){var n=t.filter((function(t){return t._parentDrag===e})).map((function(e){return e.element}));e._selfHandle&&e.rootElementSelector&&n.push(e.element),e._dragRef.withHandles(n)})),Object(P.a)((function(e){return b.a.apply(void 0,Object(r.a)(e.map((function(e){return e._stateChanges.pipe(Object(y.a)(e))}))))})),Object(v.a)(e._destroyed)).subscribe((function(t){var n=e._dragRef,i=t.element.nativeElement;t.disabled?n.disableHandle(i):n.enableHandle(i)})),e.freeDragPosition&&e._dragRef.setFreeDragPosition(e.freeDragPosition)}))}},{key:"ngOnChanges",value:function(e){var t=e.rootElementSelector,n=e.freeDragPosition;t&&!t.firstChange&&this._updateRootElement(),n&&!n.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}},{key:"ngOnDestroy",value:function(){this.dropContainer&&this.dropContainer.removeItem(this),this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()}},{key:"_updateRootElement",value:function(){var e=this.element.nativeElement,t=this.rootElementSelector?Ce(e,this.rootElementSelector):e;t&&(t.nodeType,this._document.ELEMENT_NODE),this._dragRef.withRootElement(t||e)}},{key:"_getBoundaryElement",value:function(){var e=this.boundaryElement;if(!e)return null;if("string"==typeof e)return Ce(this.element.nativeElement,e);var t=Object(u.d)(e);return t}},{key:"_syncInputs",value:function(e){var t=this;e.beforeStarted.subscribe((function(){if(!e.isDragging()){var n=t._dir,i=t.dragStartDelay,r=t._placeholderTemplate?{template:t._placeholderTemplate.templateRef,context:t._placeholderTemplate.data,viewContainer:t._viewContainerRef}:null,a=t._previewTemplate?{template:t._previewTemplate.templateRef,context:t._previewTemplate.data,matchSize:t._previewTemplate.matchSize,viewContainer:t._viewContainerRef}:null;e.disabled=t.disabled,e.lockAxis=t.lockAxis,e.dragStartDelay="object"==typeof i&&i?i:Object(u.e)(i),e.constrainPosition=t.constrainPosition,e.previewClass=t.previewClass,e.withBoundaryElement(t._getBoundaryElement()).withPlaceholderTemplate(r).withPreviewTemplate(a),n&&e.withDirection(n.value)}}))}},{key:"_handleEvents",value:function(e){var t=this;e.started.subscribe((function(){t.started.emit({source:t}),t._changeDetectorRef.markForCheck()})),e.released.subscribe((function(){t.released.emit({source:t})})),e.ended.subscribe((function(e){t.ended.emit({source:t,distance:e.distance}),t._changeDetectorRef.markForCheck()})),e.entered.subscribe((function(e){t.entered.emit({container:e.container.data,item:t,currentIndex:e.currentIndex})})),e.exited.subscribe((function(e){t.exited.emit({container:e.container.data,item:t})})),e.dropped.subscribe((function(e){t.dropped.emit({previousIndex:e.previousIndex,currentIndex:e.currentIndex,previousContainer:e.previousContainer.data,container:e.container.data,isPointerOverContainer:e.isPointerOverContainer,item:t,distance:e.distance})}))}},{key:"_assignDefaults",value:function(e){var t=e.lockAxis,n=e.dragStartDelay,i=e.constrainPosition,r=e.previewClass,a=e.boundaryElement,o=e.draggingDisabled,s=e.rootElementSelector;this.disabled=null!=o&&o,this.dragStartDelay=n||0,t&&(this.lockAxis=t),i&&(this.constrainPosition=i),r&&(this.previewClass=r),a&&(this.boundaryElement=a),s&&(this.rootElementSelector=s)}}]),e}();function Ce(e,t){for(var n=e.parentElement;n;){if(n.matches?n.matches(t):n.msMatchesSelector(t))return n;n=n.parentElement}return null}_e.\u0275fac=function(e){return new(e||_e)(s.fc(s.r),s.fc(pe,12),s.fc(c.e),s.fc(s.M),s.fc(s.hb),s.fc(de,8),s.fc(x.c,8),s.fc(oe),s.fc(s.j),s.fc(fe,10))},_e.\u0275dir=s.ac({type:_e,selectors:[["","cdkDrag",""]],contentQueries:function(e,t,n){var i;(1&e&&(s.Yb(n,ye,!0),s.Yb(n,be,!0),s.Yb(n,fe,!0)),2&e)&&(s.Lc(i=s.uc())&&(t._previewTemplate=i.first),s.Lc(i=s.uc())&&(t._placeholderTemplate=i.first),s.Lc(i=s.uc())&&(t._handles=i))},hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(e,t){2&e&&s.Xb("cdk-drag-disabled",t.disabled)("cdk-drag-dragging",t._dragRef.isDragging())},inputs:{disabled:["cdkDragDisabled","disabled"],dragStartDelay:["cdkDragStartDelay","dragStartDelay"],lockAxis:["cdkDragLockAxis","lockAxis"],constrainPosition:["cdkDragConstrainPosition","constrainPosition"],previewClass:["cdkDragPreviewClass","previewClass"],boundaryElement:["cdkDragBoundary","boundaryElement"],rootElementSelector:["cdkDragRootElement","rootElementSelector"],data:["cdkDragData","data"],freeDragPosition:["cdkDragFreeDragPosition","freeDragPosition"]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[s.Rb([{provide:se,useExisting:_e}]),s.Qb]}),_e.ctorParameters=function(){return[{type:s.r},{type:void 0,decorators:[{type:s.y,args:[pe]},{type:s.N},{type:s.ab}]},{type:void 0,decorators:[{type:s.y,args:[c.e]}]},{type:s.M},{type:s.hb},{type:void 0,decorators:[{type:s.N},{type:s.y,args:[de]}]},{type:x.c,decorators:[{type:s.N}]},{type:oe},{type:s.j},{type:me,decorators:[{type:s.N},{type:s.Z},{type:s.y,args:[fe]}]}]},_e.propDecorators={_handles:[{type:s.o,args:[fe,{descendants:!0}]}],_previewTemplate:[{type:s.n,args:[ye]}],_placeholderTemplate:[{type:s.n,args:[be]}],data:[{type:s.D,args:["cdkDragData"]}],lockAxis:[{type:s.D,args:["cdkDragLockAxis"]}],rootElementSelector:[{type:s.D,args:["cdkDragRootElement"]}],boundaryElement:[{type:s.D,args:["cdkDragBoundary"]}],dragStartDelay:[{type:s.D,args:["cdkDragStartDelay"]}],freeDragPosition:[{type:s.D,args:["cdkDragFreeDragPosition"]}],disabled:[{type:s.D,args:["cdkDragDisabled"]}],constrainPosition:[{type:s.D,args:["cdkDragConstrainPosition"]}],previewClass:[{type:s.D,args:["cdkDragPreviewClass"]}],started:[{type:s.O,args:["cdkDragStarted"]}],released:[{type:s.O,args:["cdkDragReleased"]}],ended:[{type:s.O,args:["cdkDragEnded"]}],entered:[{type:s.O,args:["cdkDragEntered"]}],exited:[{type:s.O,args:["cdkDragExited"]}],dropped:[{type:s.O,args:["cdkDragDropped"]}],moved:[{type:s.O,args:["cdkDragMoved"]}]};var Pe=function e(){Object(a.a)(this,e)};Pe.\u0275mod=s.dc({type:Pe}),Pe.\u0275inj=s.cc({factory:function(e){return new(e||Pe)},providers:[oe],imports:[l.b]})},seVz:function(e,t,n){"use strict";n.d(t,"a",(function(){return S})),n.d(t,"b",(function(){return j})),n.d(t,"c",(function(){return k})),n.d(t,"d",(function(){return x})),n.d(t,"e",(function(){return T})),n.d(t,"f",(function(){return I})),n.d(t,"g",(function(){return O}));var i=n("PRnZ"),r=n("sRHE"),a=(n("2h71"),n("8K1b")),o=n("AqVP"),s=n("fGyu"),c=n("9fIP"),l=n("MMYH"),d=n("cqs0"),u=n("9bRT"),p=n("ZTXN"),h=n("C05f"),g=n("ROBh"),f=(n("J+dc"),n("xVbo"),n("kuMc")),m=n("EM62"),b=n("E5oP"),v=n("5XID"),y=function(){function e(){Object(c.a)(this,e),this.expansionModel=new d.b(!0)}return Object(l.a)(e,[{key:"toggle",value:function(e){this.expansionModel.toggle(this._trackByValue(e))}},{key:"expand",value:function(e){this.expansionModel.select(this._trackByValue(e))}},{key:"collapse",value:function(e){this.expansionModel.deselect(this._trackByValue(e))}},{key:"isExpanded",value:function(e){return this.expansionModel.isSelected(this._trackByValue(e))}},{key:"toggleDescendants",value:function(e){this.expansionModel.isSelected(this._trackByValue(e))?this.collapseDescendants(e):this.expandDescendants(e)}},{key:"collapseAll",value:function(){this.expansionModel.clear()}},{key:"expandDescendants",value:function(e){var t,n=this,i=[e];i.push.apply(i,Object(s.a)(this.getDescendants(e))),(t=this.expansionModel).select.apply(t,Object(s.a)(i.map((function(e){return n._trackByValue(e)}))))}},{key:"collapseDescendants",value:function(e){var t,n=this,i=[e];i.push.apply(i,Object(s.a)(this.getDescendants(e))),(t=this.expansionModel).deselect.apply(t,Object(s.a)(i.map((function(e){return n._trackByValue(e)}))))}},{key:"_trackByValue",value:function(e){return this.trackBy?this.trackBy(e):e}}]),e}(),O=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e,i,r){var a;return Object(c.a)(this,n),(a=t.call(this)).getLevel=e,a.isExpandable=i,a.options=r,a.options&&(a.trackBy=a.options.trackBy),a}return Object(l.a)(n,[{key:"getDescendants",value:function(e){for(var t=[],n=this.dataNodes.indexOf(e)+1;n<this.dataNodes.length&&this.getLevel(e)<this.getLevel(this.dataNodes[n]);n++)t.push(this.dataNodes[n]);return t}},{key:"expandAll",value:function(){var e,t=this;(e=this.expansionModel).select.apply(e,Object(s.a)(this.dataNodes.map((function(e){return t._trackByValue(e)}))))}}]),n}(y),_=new m.B("CDK_TREE_NODE_OUTLET_NODE"),C=function e(t,n){Object(c.a)(this,e),this.viewContainer=t,this._node=n};C.\u0275fac=function(e){return new(e||C)(m.fc(m.hb),m.fc(_,8))},C.\u0275dir=m.ac({type:C,selectors:[["","cdkTreeNodeOutlet",""]]}),C.ctorParameters=function(){return[{type:m.hb},{type:void 0,decorators:[{type:m.y,args:[_]},{type:m.N}]}]};var P=function e(t){Object(c.a)(this,e),this.$implicit=t},x=function e(t){Object(c.a)(this,e),this.template=t};x.\u0275fac=function(e){return new(e||x)(m.fc(m.cb))},x.\u0275dir=m.ac({type:x,selectors:[["","cdkTreeNodeDef",""]],inputs:{when:["cdkTreeNodeDefWhen","when"]}}),x.ctorParameters=function(){return[{type:m.cb}]};var S=function(){function e(t,n){Object(c.a)(this,e),this._differs=t,this._changeDetectorRef=n,this._onDestroy=new p.a,this._levels=new Map,this.viewChange=new h.a({start:0,end:Number.MAX_VALUE})}return Object(l.a)(e,[{key:"dataSource",get:function(){return this._dataSource},set:function(e){this._dataSource!==e&&this._switchDataSource(e)}},{key:"ngOnInit",value:function(){this._dataDiffer=this._differs.find([]).create(this.trackBy),this.treeControl}},{key:"ngOnDestroy",value:function(){this._nodeOutlet.viewContainer.clear(),this.viewChange.complete(),this._onDestroy.next(),this._onDestroy.complete(),this._dataSource&&"function"==typeof this._dataSource.disconnect&&this.dataSource.disconnect(this),this._dataSubscription&&(this._dataSubscription.unsubscribe(),this._dataSubscription=null)}},{key:"ngAfterContentChecked",value:function(){var e=this._nodeDefs.filter((function(e){return!e.when}));e.length,this._defaultNodeDef=e[0],this.dataSource&&this._nodeDefs&&!this._dataSubscription&&this._observeRenderChanges()}},{key:"_switchDataSource",value:function(e){this._dataSource&&"function"==typeof this._dataSource.disconnect&&this.dataSource.disconnect(this),this._dataSubscription&&(this._dataSubscription.unsubscribe(),this._dataSubscription=null),e||this._nodeOutlet.viewContainer.clear(),this._dataSource=e,this._nodeDefs&&this._observeRenderChanges()}},{key:"_observeRenderChanges",value:function(){var e,t=this;Object(d.f)(this._dataSource)?e=this._dataSource.connect(this):Object(u.a)(this._dataSource)?e=this._dataSource:Array.isArray(this._dataSource)&&(e=Object(g.a)(this._dataSource)),e&&(this._dataSubscription=e.pipe(Object(f.a)(this._onDestroy)).subscribe((function(e){return t.renderNodeChanges(e)})))}},{key:"renderNodeChanges",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._dataDiffer,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._nodeOutlet.viewContainer,r=arguments.length>3?arguments[3]:void 0,a=n.diff(e);a&&(a.forEachOperation((function(n,a,o){if(null==n.previousIndex)t.insertNode(e[o],o,i,r);else if(null==o)i.remove(a),t._levels.delete(n.item);else{var s=i.get(a);i.move(s,o)}})),this._changeDetectorRef.detectChanges())}},{key:"_getNodeDef",value:function(e,t){if(1===this._nodeDefs.length)return this._nodeDefs.first;var n=this._nodeDefs.find((function(n){return n.when&&n.when(t,e)}))||this._defaultNodeDef;return n}},{key:"insertNode",value:function(e,t,n,i){var r=this._getNodeDef(e,t),a=new P(e);this.treeControl.getLevel?a.level=this.treeControl.getLevel(e):void 0!==i&&this._levels.has(i)?a.level=this._levels.get(i)+1:a.level=0,this._levels.set(e,a.level),(n||this._nodeOutlet.viewContainer).createEmbeddedView(r.template,a,t),k.mostRecentTreeNode&&(k.mostRecentTreeNode.data=e)}}]),e}();S.\u0275fac=function(e){return new(e||S)(m.fc(m.E),m.fc(m.j))},S.\u0275cmp=m.Zb({type:S,selectors:[["cdk-tree"]],contentQueries:function(e,t,n){var i;(1&e&&m.Yb(n,x,!0),2&e)&&(m.Lc(i=m.uc())&&(t._nodeDefs=i))},viewQuery:function(e,t){var n;(1&e&&m.Wc(C,!0),2&e)&&(m.Lc(n=m.uc())&&(t._nodeOutlet=n.first))},hostAttrs:["role","tree",1,"cdk-tree"],inputs:{dataSource:"dataSource",treeControl:"treeControl",trackBy:"trackBy"},exportAs:["cdkTree"],decls:1,vars:0,consts:[["cdkTreeNodeOutlet",""]],template:function(e,t){1&e&&m.hc(0,0)},directives:[C],encapsulation:2}),S.ctorParameters=function(){return[{type:m.E},{type:m.j}]},S.propDecorators={dataSource:[{type:m.D}],treeControl:[{type:m.D}],trackBy:[{type:m.D}],_nodeOutlet:[{type:m.gb,args:[C,{static:!0}]}],_nodeDefs:[{type:m.o,args:[x,{descendants:!0}]}]};var k=function(){function e(t,n){Object(c.a)(this,e),this._elementRef=t,this._tree=n,this._destroyed=new p.a,this._dataChanges=new p.a,this.role="treeitem",e.mostRecentTreeNode=this}return Object(l.a)(e,[{key:"data",get:function(){return this._data},set:function(e){e!==this._data&&(this._data=e,this._setRoleFromData(),this._dataChanges.next())}},{key:"isExpanded",get:function(){return this._tree.treeControl.isExpanded(this._data)}},{key:"level",get:function(){return this._tree.treeControl.getLevel?this._tree.treeControl.getLevel(this._data):0}},{key:"ngOnDestroy",value:function(){e.mostRecentTreeNode===this&&(e.mostRecentTreeNode=null),this._dataChanges.complete(),this._destroyed.next(),this._destroyed.complete()}},{key:"focus",value:function(){this._elementRef.nativeElement.focus()}},{key:"_setRoleFromData",value:function(){!this._tree.treeControl.isExpandable&&this._tree.treeControl.getChildren,this.role="treeitem"}}]),e}();k.\u0275fac=function(e){return new(e||k)(m.fc(m.r),m.fc(S))},k.\u0275dir=m.ac({type:k,selectors:[["cdk-tree-node"]],hostAttrs:[1,"cdk-tree-node"],hostVars:3,hostBindings:function(e,t){2&e&&m.Tb("aria-expanded",t.isExpanded)("aria-level",t.level+1)("role",t.role)},inputs:{role:"role"},exportAs:["cdkTreeNode"]}),k.mostRecentTreeNode=null,k.ctorParameters=function(){return[{type:m.r},{type:S}]},k.propDecorators={role:[{type:m.D}]};var D=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e,i,r){var a;return Object(c.a)(this,n),(a=t.call(this,e,i))._elementRef=e,a._tree=i,a._differs=r,a}return Object(l.a)(n,[{key:"ngAfterContentInit",value:function(){var e=this;this._dataDiffer=this._differs.find([]).create(this._tree.trackBy),this._tree.treeControl.getChildren;var t=this._tree.treeControl.getChildren(this.data);Array.isArray(t)?this.updateChildrenNodes(t):Object(u.a)(t)&&t.pipe(Object(f.a)(this._destroyed)).subscribe((function(t){return e.updateChildrenNodes(t)})),this.nodeOutlet.changes.pipe(Object(f.a)(this._destroyed)).subscribe((function(){return e.updateChildrenNodes()}))}},{key:"ngOnDestroy",value:function(){this._clear(),Object(i.a)(Object(r.a)(n.prototype),"ngOnDestroy",this).call(this)}},{key:"updateChildrenNodes",value:function(e){var t=this._getNodeOutlet();if(e&&(this._children=e),t&&this._children){var n=t.viewContainer;this._tree.renderNodeChanges(this._children,this._dataDiffer,n,this._data)}else this._dataDiffer.diff([])}},{key:"_clear",value:function(){var e=this._getNodeOutlet();e&&(e.viewContainer.clear(),this._dataDiffer.diff([]))}},{key:"_getNodeOutlet",value:function(){var e=this,t=this.nodeOutlet;return t&&t.find((function(t){return!t._node||t._node===e}))}}]),n}(k);D.\u0275fac=function(e){return new(e||D)(m.fc(m.r),m.fc(S),m.fc(m.E))},D.\u0275dir=m.ac({type:D,selectors:[["cdk-nested-tree-node"]],contentQueries:function(e,t,n){var i;(1&e&&m.Yb(n,C,!0),2&e)&&(m.Lc(i=m.uc())&&(t.nodeOutlet=i))},hostAttrs:[1,"cdk-tree-node","cdk-nested-tree-node"],hostVars:2,hostBindings:function(e,t){2&e&&m.Tb("aria-expanded",t.isExpanded)("role",t.role)},exportAs:["cdkNestedTreeNode"],features:[m.Rb([{provide:k,useExisting:D},{provide:_,useExisting:D}]),m.Pb]}),D.ctorParameters=function(){return[{type:m.r},{type:S},{type:m.E}]},D.propDecorators={nodeOutlet:[{type:m.o,args:[C,{descendants:!0}]}]};var w=/([A-Za-z%]+)$/,T=function(){function e(t,n,i,r,a){var o=this;Object(c.a)(this,e),this._treeNode=t,this._tree=n,this._element=r,this._dir=a,this._destroyed=new p.a,this.indentUnits="px",this._indent=40,this._setPadding(),a&&a.change.pipe(Object(f.a)(this._destroyed)).subscribe((function(){return o._setPadding(!0)})),t._dataChanges.subscribe((function(){return o._setPadding()}))}return Object(l.a)(e,[{key:"level",get:function(){return this._level},set:function(e){this._setLevelInput(e)}},{key:"indent",get:function(){return this._indent},set:function(e){this._setIndentInput(e)}},{key:"ngOnDestroy",value:function(){this._destroyed.next(),this._destroyed.complete()}},{key:"_paddingIndent",value:function(){var e=this._treeNode.data&&this._tree.treeControl.getLevel?this._tree.treeControl.getLevel(this._treeNode.data):null,t=null==this._level?e:this._level;return"number"==typeof t?"".concat(t*this._indent).concat(this.indentUnits):null}},{key:"_setPadding",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this._paddingIndent();if(t!==this._currentPadding||e){var n=this._element.nativeElement,i=this._dir&&"rtl"===this._dir.value?"paddingRight":"paddingLeft",r="paddingLeft"===i?"paddingRight":"paddingLeft";n.style[i]=t||"",n.style[r]="",this._currentPadding=t}}},{key:"_setLevelInput",value:function(e){this._level=Object(v.e)(e,null),this._setPadding()}},{key:"_setIndentInput",value:function(e){var t=e,n="px";if("string"==typeof e){var i=e.split(w);t=i[0],n=i[1]||n}this.indentUnits=n,this._indent=Object(v.e)(t),this._setPadding()}}]),e}();T.\u0275fac=function(e){return new(e||T)(m.fc(k),m.fc(S),m.fc(m.U),m.fc(m.r),m.fc(b.c,8))},T.\u0275dir=m.ac({type:T,selectors:[["","cdkTreeNodePadding",""]],inputs:{level:["cdkTreeNodePadding","level"],indent:["cdkTreeNodePaddingIndent","indent"]}}),T.ctorParameters=function(){return[{type:k},{type:S},{type:m.U},{type:m.r},{type:b.c,decorators:[{type:m.N}]}]},T.propDecorators={level:[{type:m.D,args:["cdkTreeNodePadding"]}],indent:[{type:m.D,args:["cdkTreeNodePaddingIndent"]}]};var I=function(){function e(t,n){Object(c.a)(this,e),this._tree=t,this._treeNode=n,this._recursive=!1}return Object(l.a)(e,[{key:"recursive",get:function(){return this._recursive},set:function(e){this._recursive=Object(v.b)(e)}},{key:"_toggle",value:function(e){this.recursive?this._tree.treeControl.toggleDescendants(this._treeNode.data):this._tree.treeControl.toggle(this._treeNode.data),e.stopPropagation()}}]),e}();I.\u0275fac=function(e){return new(e||I)(m.fc(S),m.fc(k))},I.\u0275dir=m.ac({type:I,selectors:[["","cdkTreeNodeToggle",""]],hostBindings:function(e,t){1&e&&m.tc("click",(function(e){return t._toggle(e)}))},inputs:{recursive:["cdkTreeNodeToggleRecursive","recursive"]}}),I.ctorParameters=function(){return[{type:S},{type:k}]},I.propDecorators={recursive:[{type:m.D,args:["cdkTreeNodeToggleRecursive"]}],_toggle:[{type:m.w,args:["click",["$event"]]}]};var j=function e(){Object(c.a)(this,e)};j.\u0275mod=m.dc({type:j}),j.\u0275inj=m.cc({factory:function(e){return new(e||j)}})},tHMF:function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));var i=n("D57K"),r=n("W9bu"),a=n("X0jn"),o=n("wx9+"),s=n("h1tj"),c=function(e){function t(n){var i=e.call(this)||this;i.translate=n,i.animationDuration=30,i.textPadding=5,i.onChange=function(){return null},i.text=new s.Text(i.translate.instant("TOOLTIPS.CLICK_TO_OPEN_LINK"),"12px Arial","#7E7E7E"),i.textRect=new s.Shape;var r=i.text.getMeasuredWidth()+2*i.textPadding,a=i.text.getMeasuredHeight()+2*i.textPadding;return i.clickableRect=new s.Shape,i.clickableRect.name=t.clickableRectName,i.clickableRect.alpha=0,i.textRect.graphics.clear().setStrokeStyle(1).beginStroke("#ECECEC").beginFill("#fff").drawRect(0,0,r,a).endFill(),i.textRect.setBounds(0,0,r,a),i.text.setBounds(0,0,i.text.getMeasuredWidth(),i.text.getMeasuredHeight()),i.textRect.visible=!1,i.text.visible=!1,i.circle=new s.Shape,i.addChild(i.circle),i.addChild(i.textRect),i.addChild(i.text),i.addChild(i.clickableRect),i.circle.graphics.clear(),i.circle.graphics.beginFill(t.ICON_COLOR),i.circle.graphics.beginStroke("#FFFFFF"),i.circle.graphics.setStrokeStyle(2),i.circle.graphics.drawCircle(0,0,5),i.circle.graphics.endStroke(),i.circle.graphics.endFill(),i.circle.shadow=new s.Shadow("rgba(0, 0, 0, 0.25)",0,2,3),i}return Object(i.e)(t,e),Object.defineProperty(t.prototype,"clickable",{set:function(e){this.clickableRect.alpha=e?1:0},enumerable:!1,configurable:!0}),t.prototype.destroy=function(){},t.prototype.update=function(e,t){this.bounds=e,this.link=t,this.circle.x=e.right,this.circle.y=e.bottom,this.text.x=e.centerX-this.text.getBounds().width/2,this.text.y=e.bottom+this.textPadding+15,this.clickableRect.graphics.clear().beginFill("rgba(0,0,0,0.01)").drawRect(0,0,e.width,e.height).endFill(),this.clickableRect.x=e.x,this.clickableRect.y=e.y,this.textRect.x=e.centerX-this.textRect.getBounds().width/2,this.textRect.y=e.bottom+15,this.setVisibilty([this.text,this.textRect],!1)},t.prototype.toggleInfo=function(e){var t=this.text.isVisible()&&this.textRect.isVisible();if(this.bounds){var n=this.bounds.contains({x:e.x,y:e.y,width:0,height:0});!t&&n&&this.setVisibilty([this.text,this.textRect],!0),t&&!n&&this.setVisibilty([this.text,this.textRect],!1)}},t.prototype.setVisibilty=function(e,t){var n=this;e.forEach((function(e){return s.Tween.get(e,{override:!0,onChange:n.onChange}).to({alpha:t?1:0,visible:t},n.animationDuration)}))},t.ICON_COLOR="#5B7AEA",t.clickableRectName="clickableRect",t}(s.Container),l=n("5xGT"),d=n("ZTXN"),u=n("C05f"),p=n("g6G6"),h=n("KTx3"),g=n("TLy2"),f=n("YtkY"),m=n("8j5Y"),b=n("xVbo"),v=n("QoSw"),y=n("flPR"),O=n("nsO7"),_=n("sXdR"),C=n("s2Ay"),P=n("EM62"),x=function(e){function t(t,n,i,r,a){var o=e.call(this,r)||this;return o.linkService=t,o.viewport=n,o.ll=i,o.state=r,o.translate=a,o._indicators={},o.addSource=new d.a,o.removeSource=new d.a,o.changeSource=new d.a,o.update=new u.a(!0),o}return Object(i.e)(t,e),Object.defineProperty(t.prototype,"indicators",{get:function(){return Object(O.values)(this._indicators)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"visible",{set:function(e){this.indicators.forEach((function(t){return t.visible=e}))},enumerable:!1,configurable:!0}),t.prototype.initialize=function(){var e=this,t=this.state.changes("InterfaceControlState").pipe(Object(g.a)((function(){return e.removeIndicators(),e.init()})));this.subs.push(t.subscribe(),this.handleVisibility().subscribe(),this.handleKeyDown().subscribe(),this.handleKeyUp().subscribe(),this.handleClick().subscribe(),this.pointerMove().subscribe((function(t){e.indicators.forEach((function(e){return e.toggleInfo(t)}))})))},t.prototype.createAddSource=function(){return this.addSource},t.prototype.createRemoveSource=function(){return this.removeSource},t.prototype.createChangeSource=function(){return this.changeSource},t.prototype.init=function(){var e=this;return Object(p.a)(this.ll.forCurrentObserver(!1).pipe(Object(g.a)((function(e){return e.getDiagramModel()})),Object(g.a)((function(t){return e.state.changes("ActiveShapes").pipe(Object(f.a)((function(n){return e.manageIndicators(t,n)})))}))),this.state.changes("ActiveShapes").pipe(Object(g.a)((function(){return e.update})),Object(g.a)((function(){return e.viewport.getShapeModels(Object.keys(e._indicators)).pipe(Object(g.a)((function(t){return e.updateIndicators(t)})))}))))},t.prototype.handleKeyDown=function(){var e=this;return this.getKeyEvent("keydown").pipe(Object(m.a)((function(){return e.indicators.forEach((function(t){t.clickable=!0,e.changeSource.next(t)}))})))},t.prototype.handleKeyUp=function(){var e=this;return this.getKeyEvent("keyup").pipe(Object(m.a)((function(){return e.indicators.forEach((function(t){t.clickable=!1,e.changeSource.next(t)}))})))},t.prototype.handleClick=function(){var e=this;return Object(h.a)(this.indicatorLayer,"click").pipe(Object(m.a)((function(t){if(t.target&&t.target.name===c.clickableRectName){var n=t.target.parent;n.link&&e.linkService.navigate(n.link)}})))},t.prototype.handleVisibility=function(){var e=this;return this.state.changes("Selected").pipe(Object(g.a)((function(t){return e.ll.forCurrentObserver(!0).pipe(Object(g.a)((function(e){return e.getDiagramModel()})),Object(f.a)((function(e){return{ids:t,diagram:e}})))})),Object(m.a)((function(t){var n=t.ids,i=t.diagram;if(0===n.length)e.indicators.forEach((function(t){t.circle.visible=!0,e.changeSource.next(t)}));else if(1===n.length){(r=e._indicators[n[0]])&&(r.circle.visible=!1,e.changeSource.next(r))}else if(n.length>1&&i.isShapeInGroup(n)){var r,a=i.getGroupHierarchy(n[0])[0];(r=e._indicators[a])&&(r.circle.visible=!1,e.changeSource.next(r))}})))},t.prototype.pointerMove=function(e){return void 0===e&&(e=200),Object(h.a)(this.indicatorLayer.canvas,"mousemove").pipe(Object(_.lodashThrottle)(e,{leading:!0,trailing:!0}),Object(f.a)((function(e){return{x:e.x,y:e.y}})))},t.prototype.manageIndicators=function(e,t){var n=[];for(var r in e.groups){var a=e.groups[r];(a.links&&a.links.length>0||a.link)&&n.push(r)}var o=Object(O.values)(e.shapes).filter((function(e){return e.links&&e.links.length>0||e.link})).map((function(e){return e.id})).filter((function(e){return t.includes(e)})),s=Object(i.j)(n,o);this.manageIndicatorsRemove(s),this.manageIndicatorsAdd(s),this.update.next(!0)},t.prototype.manageIndicatorsRemove=function(e){var t=this;Object.keys(this._indicators).forEach((function(n){e.includes(n)||t.removeIndicator(n)}))},t.prototype.removeIndicators=function(){var e=this;Object.keys(this._indicators).forEach((function(t){return e.removeIndicator(t)})),this._indicators={}},t.prototype.manageIndicatorsAdd=function(e){var t=this;e.forEach((function(e){t._indicators[e]||(t._indicators[e]=new c(t.translate),t._indicators[e].onChange=function(){return t.changeSource.next(t._indicators[e])},t.addSource.next(t._indicators[e]))}))},t.prototype.updateIndicators=function(e){var t=this;return this.ll.forCurrentObserver(!0).pipe(Object(g.a)((function(e){return e.getDiagramOnce()})),Object(m.a)((function(n){Object.keys(t._indicators).forEach((function(i){var r=e[i];if(r){var a=t._indicators[i],o=r.bounds,s=void 0;r.links&&r.links.length>0?s=r.links[0]:r.link&&(s=r.link),a.update(o,s),t.changeSource.next(a)}else if(n.groups[i]){a=t._indicators[i];var c=n.groups[i],l=c.shapes.map((function(t){return e[t]})),d=l[0].bounds;l.forEach((function(e,t){t>0&&d.absorb(e.bounds)}));s=void 0;c.links&&c.links.length>0?s=c.links[0]:c.link&&(s=c.link),a.update(d,s),t.changeSource.next(a)}}))})))},t.prototype.getKeyEvent=function(e){return Object(h.a)(window,e).pipe(Object(b.a)((function(e){return e.keyCode===a.j.Command||e.keyCode===a.j.Control})))},t.prototype.removeIndicator=function(e){var t=this._indicators[e];this.removeSource.next(t),delete this._indicators[e]},t.\u0275fac=function(e){return new(e||t)(P.pc(r.a),P.pc(o.a),P.pc(v.a),P.pc(l.Ib),P.pc(C.e))},t.\u0275prov=P.bc({token:t,factory:t.\u0275fac}),t=Object(i.d)([Object(y.a)(),Object(i.g)("design:paramtypes",[r.a,o.a,v.a,l.Ib,C.e])],t)}(y.b)},weoZ:function(e,t,n){"use strict";n.d(t,"a",(function(){return he}));var i=n("Jzy8"),r=n("8j5Y"),a=n("J+dc"),o=n("TaSY"),s=n("xVbo"),c=n("BwBJ"),l=n("TLy2"),d=n("C05f"),u=n("ROBh"),p=n("HM3f"),h=n("6Oco"),g=n("5xGT"),f=n("4y1S"),m=n("xnGY"),b=n("S0Xf"),v=n("NNJu"),y=n("C5+t"),O=n("foQ2"),_=n("8EYK"),C=n("QoSw"),P=n("Q4Fx"),x=n("c7W3"),S=n("X0jn"),k=n("EM62"),D=n("sEIs"),w=n("s2Ay"),T=n("2kYt"),I=n("crdX"),j=n("K0+f"),E=n("62De"),M=n("ZTXN"),R=n("mWib"),A=n("RTAa"),L=n("JupZ"),N=n("jHi0");function U(e,t){1&e&&(k.lc(0,"div",8),k.wc(),k.lc(1,"svg",9),k.gc(2,"use",10),k.kc(),k.vc(),k.lc(3,"span",11),k.lc(4,"p",12),k.ed(5,"TOOLTIPS.DOCUMENT_LOCK.DOCUMENT_LOCK_INDICATOR.HEADING"),k.kc(),k.lc(6,"p",13),k.ed(7,"TOOLTIPS.DOCUMENT_LOCK.DOCUMENT_LOCK_INDICATOR.DESCRIPTION"),k.kc(),k.kc(),k.kc())}var F=function(e){return{value1Type:"diagramId",value1:e}},B=function(e){return{event:"left.dashboard.recentDocument.click",data:e}},H=function(){function e(e,t,n,i,r){this.state=e,this.router=t,this.elementRef=n,this.modelSubManager=i,this.diagramNavigation=r,this.enteredToViewport=new d.a(!1)}return Object.defineProperty(e.prototype,"isCurrent",{get:function(){return this.state.get("CurrentDiagram")===this.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scrollCheck",{set:function(e){!this.enteredToViewport.value&&L.is(this.elementRef.nativeElement)&&this.enteredToViewport.next(!0)},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){},e.prototype.navToSelectedDiagram=function(e){var t=this,n=this.state.get("CurrentDiagram");"start"!==n?n!==e&&this.modelSubManager.stop(this.state.get("CurrentDiagram"),!0).pipe(Object(a.a)(1),Object(r.a)((function(){t.diagramNavigation.navigateToDiagram(e,"edit")}))).subscribe():this.diagramNavigation.navigateToDiagram(e,"edit"),this.state.set("SelectedLeftPanel","none")},e.\u0275fac=function(t){return new(t||e)(k.fc(g.Ib),k.fc(D.d),k.fc(k.r),k.fc(m.d),k.fc(A.a))},e.\u0275cmp=k.Zb({type:e,selectors:[["diagram-info-item"]],inputs:{name:"name",folderName:"folderName",lastUpdatedMoment:"lastUpdatedMoment",isUserPaused:"isUserPaused",id:"id",scrollCheck:"scrollCheck"},features:[k.Rb([g.zb])],decls:14,vars:9,consts:[[1,"diagram-info-item",3,"trackAction","click"],[1,"diagram-info-text-info","fx-ellipsis"],[1,"diagram-info-doc-name"],[1,"fx-ellipsis"],[1,"diagram-info-panel"],["translate",""],[1,"separator"],["tooltip","","placement","bottom",4,"ngIf"],["tooltip","","placement","bottom"],[1,"nu-icon","nu-icon-small","grey"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-lock"],[1,"tooltip-content"],["translate","",1,"tooltip-header","nu-text-bold"],["translate","",1,"tooltip-body"]],template:function(e,t){1&e&&(k.lc(0,"div",0),k.tc("click",(function(){return t.navToSelectedDiagram(t.id)})),k.lc(1,"div",1),k.lc(2,"div",2),k.lc(3,"h2",3),k.ed(4),k.kc(),k.kc(),k.lc(5,"div",4),k.lc(6,"span",5),k.ed(7,"LABELS.EDITED"),k.kc(),k.lc(8,"span"),k.ed(9),k.kc(),k.gc(10,"span",6),k.lc(11,"span"),k.ed(12),k.kc(),k.kc(),k.kc(),k.cd(13,U,8,0,"div",7),k.kc()),2&e&&(k.Cc("trackAction",k.Hc(7,B,k.Hc(5,F,t.id))),k.Sb(4),k.fd(t.name),k.Sb(5),k.gd(" "," "+t.lastUpdatedMoment,""),k.Sb(3),k.fd(t.folderName),k.Sb(1),k.Cc("ngIf",t.isUserPaused))},directives:[j.a,w.a,T.t,N.a],styles:['.diagram-info-item[_ngcontent-%COMP%]{padding:16px;display:flex;align-items:center;border:1px solid rgba(202,204,206,.5);border-radius:4px;background-color:#fff;box-shadow:0 2px 2px rgba(195,195,222,.25);width:410px;margin-bottom:16px}.diagram-info-item[_ngcontent-%COMP%]:hover{cursor:pointer;border:1px solid #29947f;background-color:#f4fcfa}.diagram-info-item[_ngcontent-%COMP%]:hover   h2[_ngcontent-%COMP%]{color:#195249}.diagram-info-item[_ngcontent-%COMP%]   .diagram-info-text-info[_ngcontent-%COMP%]{flex:1}.diagram-info-item[_ngcontent-%COMP%]   .diagram-info-text-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:13px;margin:0;font-weight:400}.diagram-info-item[_ngcontent-%COMP%]   .diagram-info-text-info[_ngcontent-%COMP%]   .diagram-info-doc-name[_ngcontent-%COMP%]{display:flex;align-items:center}.diagram-info-item[_ngcontent-%COMP%]   .diagram-info-text-info[_ngcontent-%COMP%]   .diagram-info-panel[_ngcontent-%COMP%]{padding-top:4px;line-height:16px}.diagram-info-item[_ngcontent-%COMP%]   .diagram-info-text-info[_ngcontent-%COMP%]   .diagram-info-panel[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px;color:#697274}.diagram-info-item[_ngcontent-%COMP%]   .diagram-info-text-info[_ngcontent-%COMP%]   .diagram-info-panel[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%]:before{content:"|";margin:0 8px;color:rgba(202,204,206,.5)}.diagram-info-icon[_ngcontent-%COMP%]{margin-right:20px}.diagram-info-call[_ngcontent-%COMP%]{margin-left:20px}.diagram-info-user-count[_ngcontent-%COMP%]{display:flex}.diagram-info-count-bubble[_ngcontent-%COMP%]{width:25px;height:25px;border-radius:100%;text-align:center;line-height:25px;color:#fff;position:relative}.diagram-info-notifications[_ngcontent-%COMP%]{margin-right:-5px;margin-left:20px;background-color:#f36c67;z-index:1}.diagram-info-user-count-lbl[_ngcontent-%COMP%]{background-color:#f6f6fa;margin-right:-10px}.diagram-info-user-count[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{display:inline-block}'],changeDetection:0}),e}();function z(e,t){if(1&e&&(k.gc(0,"diagram-info-item",3),k.yc(1,"async")),2&e){var n=t.$implicit,i=k.xc(2);k.Cc("id",null==n?null:n.id)("name",null==n?null:n.name)("folderName",i.getProjectNameById(null==n?null:n.project))("lastUpdatedMoment",i.getLastOpenedMoment(n))("scrollCheck",k.zc(1,6,i.scroll))("isUserPaused",i.isUserPaused)}}function G(e,t){if(1&e&&(k.lc(0,"div",1),k.cd(1,z,2,8,"diagram-info-item",2),k.yc(2,"async"),k.kc()),2&e){var n=k.xc();k.Sb(1),k.Cc("ngForOf",k.zc(2,2,n.diagramList))("ngForTrackBy",n.getDiagramTrackId)}}var V=function(){function e(){this._columnCount=1,this._scroll=new M.a,this.scroll=this._scroll.pipe(Object(R.a)(e.scrollDebounce))}return Object.defineProperty(e.prototype,"columnCount",{get:function(){return this._columnCount},set:function(e){this._columnCount=e},enumerable:!1,configurable:!0}),e.prototype.getDiagramTrackId=function(e,t){return t.id},e.prototype.getLastOpenedMoment=function(e){return new i.j(e.id,e.name,e).lastUpdatedMoment()},e.prototype.onScroll=function(e){this._scroll.next(e)},e.prototype.getProjectNameById=function(e){var t=this.projectList.value.find((function(t){return t.id===e}));return t?t.name:null},e.scrollDebounce=400,e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=k.Zb({type:e,selectors:[["diagram-info-list-area"]],inputs:{diagramList:"diagramList",projectList:"projectList",isUserPaused:"isUserPaused",columnCount:"columnCount"},decls:2,vars:3,consts:[["class","diagram-info-list-area-container",4,"ngIf"],[1,"diagram-info-list-area-container"],[3,"id","name","folderName","lastUpdatedMoment","scrollCheck","isUserPaused",4,"ngFor","ngForOf","ngForTrackBy"],[3,"id","name","folderName","lastUpdatedMoment","scrollCheck","isUserPaused"]],template:function(e,t){1&e&&(k.cd(0,G,3,4,"div",0),k.yc(1,"async")),2&e&&k.Cc("ngIf",k.zc(1,1,t.projectList))},directives:[T.t,T.s,H],pipes:[T.b],styles:[".diagram-info-list-area-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:100%;justify-content:space-between;flex-wrap:wrap}"],changeDetection:0}),e}(),Y=n("xEGh"),W=n("D57K"),K=n("cV4H"),q=n("D1Hy");function X(e,t){1&e&&(k.lc(0,"div",11),k.lc(1,"div",12),k.lc(2,"div",13),k.wc(),k.lc(3,"svg",14),k.gc(4,"use",15),k.kc(),k.kc(),k.vc(),k.lc(5,"div",16),k.ed(6,"LABELS.PREMIUM"),k.kc(),k.kc(),k.kc())}var Z=function(e){function t(t,n){var i=e.call(this)||this;return i.modalController=t,i.state=n,i.isFreeDemoOrLite=!1,i}return Object(W.e)(t,e),t.prototype.onClickHandler=function(){q.a.track("left.dashboard.toolkit.click",{value1Type:"Template Name",value1:this.trackingInfo.name,value2Type:"Template ID",value2:this.trackingInfo.id}),this.isFreeDemoOrLite?this.modalController.show(f.u,{inputs:{dialogData:{id:"PremiumToolkits",iframeType:f.t.PremiumToolkits,buttons:[{type:"upgrade",clickHandler:function(){}}],integrationContext:{embedded:this.state.get("ApplicationIsEmbedded"),environment:this.state.get("PluginApp")}}}}):this.buttonClicked("use")},t.\u0275fac=function(e){return new(e||t)(k.fc(K.a),k.fc(g.Ib))},t.\u0275cmp=k.Zb({type:t,selectors:[["toolkit-tile"]],inputs:{description:"description",trackingInfo:"trackingInfo",isFreeDemoOrLite:"isFreeDemoOrLite"},features:[k.Pb],decls:14,vars:14,consts:[[1,"toolkit-tile-container",3,"click"],[1,"toolkit-tile-inner"],[1,"toolkit-tile-header"],[1,"toolkit-tile-name","fx-ellipsis"],["class","premium-container",4,"ngIf"],[1,"toolkit-tile-description"],[1,"spinner-container","fx-cover","fx-center-all"],["id","spinner",1,"spinner"],[1,"bounce1","white"],[1,"bounce2","white"],[1,"bounce3","white"],[1,"premium-container"],[1,"premium"],[1,"icon"],["width","11px","hight","11px",1,"nu-icon"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-premium-crown"],["translate","",1,"label"]],template:function(e,t){1&e&&(k.lc(0,"div",0),k.tc("click",(function(){return t.onClickHandler()})),k.yc(1,"async"),k.lc(2,"div",1),k.lc(3,"div",2),k.lc(4,"div",3),k.ed(5),k.kc(),k.cd(6,X,7,0,"div",4),k.kc(),k.lc(7,"div",5),k.ed(8),k.kc(),k.kc(),k.lc(9,"div",6),k.lc(10,"div",7),k.gc(11,"div",8),k.gc(12,"div",9),k.gc(13,"div",10),k.kc(),k.kc(),k.kc()),2&e&&(k.Xb("show-loading",k.zc(1,12,t.loading))("template",t.isTemplate)("fx-pointer-events-none",t.isUserPaused)("overlay",t.isUserPaused),k.Tb("data-testid",t.name),k.Sb(5),k.gd(" ",t.name," "),k.Sb(1),k.Cc("ngIf",t.isFreeDemoOrLite),k.Sb(2),k.gd(" ",t.description," "))},directives:[T.t,w.a],pipes:[T.b],styles:['.spinner[_ngcontent-%COMP%]{text-align:center}.spinner[_ngcontent-%COMP%]   .bounce[_ngcontent-%COMP%]{width:15px;height:15px;margin-left:4px;margin-right:4px;border-radius:100%;display:inline-block;-webkit-animation:sk-bouncedelay 1.4s ease-in-out infinite both;animation:sk-bouncedelay 1.4s ease-in-out infinite both}.spinner[_ngcontent-%COMP%]   .bounce-1[_ngcontent-%COMP%]{-webkit-animation-delay:-.32s;animation-delay:-.32s}.spinner[_ngcontent-%COMP%]   .bounce-2[_ngcontent-%COMP%]{-webkit-animation-delay:-.16s;animation-delay:-.16s}.bounce[_ngcontent-%COMP%]   .paused[_ngcontent-%COMP%]{-webkit-animation-play-state:paused;animation-play-state:paused}@-webkit-keyframes sk-bouncedelay{0%,80%,to{transform:scale(0)}40%{transform:scale(1)}}@keyframes sk-bouncedelay{0%,80%,to{transform:scale(0)}40%{transform:scale(1)}}.toolkit-tile-container[_ngcontent-%COMP%]{background-color:#fff;box-shadow:0 2px 2px rgba(195,195,222,.25);border-radius:4px;border:1px solid rgba(202,204,206,.5);padding:16px;display:flex;flex-direction:column;justify-content:center;align-items:center;width:410px;height:94px;position:relative}.toolkit-tile-container[_ngcontent-%COMP%]   .spinner-container[_ngcontent-%COMP%]{top:0;display:none;background-color:rgba(0,0,0,.5)}.toolkit-tile-container.show-loading[_ngcontent-%COMP%]{pointer-events:none}.toolkit-tile-container.show-loading[_ngcontent-%COMP%]   .spinner-container[_ngcontent-%COMP%]{display:flex}.toolkit-tile-container[_ngcontent-%COMP%]:hover{cursor:pointer;border:1px solid #29947f;background-color:#f4fcfa}.toolkit-tile-container[_ngcontent-%COMP%]:hover   .toolkit-tile-name[_ngcontent-%COMP%]{color:#195249}.overlay[_ngcontent-%COMP%]:after{background-color:hsla(0,0%,100%,.5);position:absolute;content:"";width:100%;height:100%;top:0;left:0;z-index:2;pointer-events:none}.toolkit-tile-inner[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;width:100%}.toolkit-tile-name[_ngcontent-%COMP%]{height:20px;text-align:center;font-family:Open Sans;font-style:normal;font-weight:600;font-size:13px;line-height:20px;color:#14282e}.toolkit-tile-header[_ngcontent-%COMP%]{display:flex;flex-direction:row}.toolkit-tile-description[_ngcontent-%COMP%]{font-family:Open Sans;font-style:normal;font-weight:400;font-size:12px;line-height:16px;padding-top:8px;color:#14282e}.premium-container[_ngcontent-%COMP%]{display:flex;justify-items:center;padding-left:5px}.premium-container[_ngcontent-%COMP%]   .premium[_ngcontent-%COMP%]{display:flex;align-items:center;height:20px;border-radius:2px;padding:0 5px;background:linear-gradient(0deg,rgba(81,192,170,.05),rgba(81,192,170,.05)),hsla(0,0%,100%,.65)}.premium-container[_ngcontent-%COMP%]   .premium[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:11px;height:11px}.premium-container[_ngcontent-%COMP%]   .premium[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:9px;font-weight:700;color:#29947f;margin-left:5px}'],changeDetection:0}),t}(E.a),J=["diagramArea"],Q=["contentContainer"];function $(e,t){if(1&e&&(k.lc(0,"h1"),k.ed(1),k.yc(2,"async"),k.kc()),2&e){var n=t.ngIf,i=k.xc();k.Sb(1),k.gd("",k.zc(2,1,i.getWelcomeHeader(n.firstName)),"!")}}var ee=function(e,t,n){return{id:e,name:t,type:n,location:"left.dashboard.featuredTemplate"}};function te(e,t){if(1&e){var n=k.mc();k.lc(0,"template-thumbnail",20),k.tc("onButtonClick",(function(e){k.Pc(n);var t=k.xc();return t.navigateToTemplate(t.getDashboardTemplates[0].id,e)})),k.yc(1,"async"),k.kc()}if(2&e){var i=k.xc();k.Cc("name",i.getDashboardTemplates[0].name)("thumbImg",i.getDashboardTemplates[0].thumbUrl)("isUserPaused",k.zc(1,4,i.isUserPaused))("trackingInfo",k.Jc(6,ee,i.getDashboardTemplates[0].id,i.getDashboardTemplates[0].name,i.getDashboardTemplates[0].type))}}function ne(e,t){if(1&e){var n=k.mc();k.lc(0,"template-thumbnail",20),k.tc("onButtonClick",(function(e){k.Pc(n);var t=k.xc();return t.navigateToTemplate(t.getDashboardTemplates[1].id,e)})),k.yc(1,"async"),k.kc()}if(2&e){var i=k.xc();k.Cc("name",i.getDashboardTemplates[1].name)("thumbImg",i.getDashboardTemplates[1].thumbUrl)("isUserPaused",k.zc(1,4,i.isUserPaused))("trackingInfo",k.Jc(6,ee,i.getDashboardTemplates[1].id,i.getDashboardTemplates[1].name,i.getDashboardTemplates[1].type))}}function ie(e,t){if(1&e){var n=k.mc();k.lc(0,"template-thumbnail",20),k.tc("onButtonClick",(function(e){k.Pc(n);var t=k.xc();return t.navigateToTemplate(t.getDashboardTemplates[2].id,e)})),k.yc(1,"async"),k.kc()}if(2&e){var i=k.xc();k.Cc("name",i.getDashboardTemplates[2].name)("thumbImg",i.getDashboardTemplates[2].thumbUrl)("isUserPaused",k.zc(1,4,i.isUserPaused))("trackingInfo",k.Jc(6,ee,i.getDashboardTemplates[2].id,i.getDashboardTemplates[2].name,i.getDashboardTemplates[2].type))}}function re(e,t){if(1&e){var n=k.mc();k.lc(0,"template-thumbnail",20),k.tc("onButtonClick",(function(e){k.Pc(n);var t=k.xc();return t.navigateToTemplate(t.getDashboardTemplates[3].id,e)})),k.yc(1,"async"),k.kc()}if(2&e){var i=k.xc();k.Cc("name",i.getDashboardTemplates[3].name)("thumbImg",i.getDashboardTemplates[3].thumbUrl)("isUserPaused",k.zc(1,4,i.isUserPaused))("trackingInfo",k.Jc(6,ee,i.getDashboardTemplates[3].id,i.getDashboardTemplates[3].name,i.getDashboardTemplates[3].type))}}function ae(e,t){1&e&&k.gc(0,"loading-bubbles",27)}var oe=function(){return{event:"left.dashboard.moreDocuments.click"}};function se(e,t){if(1&e){var n=k.mc();k.lc(0,"div",28),k.lc(1,"a",29),k.tc("click",(function(){return k.Pc(n),k.xc(2).showDocuments(!0)})),k.ed(2,"DASHBOARD_PANEL.MORE_RECENT"),k.kc(),k.kc()}2&e&&(k.Sb(1),k.Cc("trackAction",k.Gc(1,oe)))}function ce(e,t){if(1&e&&(k.lc(0,"div",21),k.lc(1,"h2",17),k.ed(2,"DASHBOARD_PANEL.CONTINUE_YOUR_WORK"),k.kc(),k.cd(3,ae,1,0,"loading-bubbles",22),k.yc(4,"async"),k.lc(5,"div",23),k.gc(6,"diagram-info-list-area",24,25),k.yc(8,"async"),k.kc(),k.cd(9,se,3,2,"div",26),k.yc(10,"async"),k.kc()),2&e){var n=k.xc();k.Sb(3),k.Cc("ngIf",k.zc(4,6,n.showLoadingIndicator)),k.Sb(3),k.Cc("diagramList",n.diagramList)("projectList",n.projectModels)("columnCount",n.columns)("isUserPaused",k.zc(8,8,n.isUserPaused)),k.Sb(3),k.Cc("ngIf",k.zc(10,10,n.recentCount)>8)}}function le(e,t){if(1&e){var n=k.mc();k.lc(0,"toolkit-tile",32),k.tc("onButtonClick",(function(e){k.Pc(n);var t=k.xc().$implicit,i=k.xc();return i.isFreeDemoOrLite.value?"":i.createProjectFromTemplate(t.id,e)})),k.yc(1,"async"),k.yc(2,"async"),k.kc()}if(2&e){var i=k.xc().$implicit,r=k.xc();k.Cc("name",i.name)("description",i.description)("isUserPaused",k.zc(1,5,r.isUserPaused))("isFreeDemoOrLite",k.zc(2,7,r.isFreeDemoOrLite))("trackingInfo",k.Jc(9,ee,i.id,i.name,i.type))}}function de(e,t){if(1&e&&(k.lc(0,"div",30),k.cd(1,le,3,13,"toolkit-tile",31),k.kc()),2&e){var n=t.$implicit;k.Sb(1),k.Cc("ngIf",n)}}var ue=function(){return{event:"left.dashboard.createDiagram.click"}},pe=function(e){return{"toolkit-tile-items-container-additional-b-padding":e}},he=function(){function e(e,t,n,i,r,a,o,s,c,l,u,p,h,g,f){this.diagramInfoLocator=e,this.commandService=t,this.planPermManager=n,this.random=i,this.router=r,this.state=a,this.modelSubManager=o,this.logger=s,this.ll=c,this.changeDetectorRef=l,this.translate=u,this.env=p,this.userLocator=h,this.templateLoader=g,this.modalController=f,this.id="dashboard",this.expandSidebar=!0,this.projectModels=new d.a([]),this.debounce=200,this.showLoadingIndicator=new d.a(!0),this.isUserPaused=new d.a(!1),this.isFreeDemoOrLite=new d.a(!1),this.isFreeOrDemoUser=new d.a(!1),this.isNotDemoUser=new d.a(!0),this.columns=1,this.diagramFetchDelay=500,this.permissionFilter=new d.a(O.b.ANY),this.sortOrder=new d.a(O.c.LAST_UPDATED),this.isExpandable=!0,this.subs=[],this.recentCount=new d.a(1)}return Object.defineProperty(e.prototype,"appConnectionStatus",{get:function(){var e=this;return this.state.changes(y.c).pipe(Object(r.a)((function(t){t===y.c.ONLINE&&e.state.get("LeftSidebarState")===P.b.Opened&&e.onOpen()})))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"getDashboardTemplates",{get:function(){return this.templateLoader.dashboardTemplates},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canCreateDiagram",{get:function(){return this.planPermManager.check([S.p.DIAGRAM_CREATE])||this.planPermManager.check([S.p.DIAGRAM_CREATE_PRIVATE])||this.planPermManager.check([S.p.DIAGRAM_CREATE_TEAM])||this.planPermManager.check([S.p.DIAGRAM_CREATE_PUBLIC])},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){var e=this;this.subs.push(this.listenToSidebarStateChanges().subscribe(),this.checkUserPauseStatus().subscribe(),this.checkUserDemoStatus().subscribe(),this.isFreeDemoOrLiteUser().subscribe((function(t){return e.isFreeDemoOrLite.next(t)})),this.planPermManager.isFreeOrDemoUser().subscribe((function(t){return e.isFreeOrDemoUser.next(t)})),this.fetchProjectsInfo().subscribe()),this.fetchRecentDiagram(),this.userMdl=this.userLocator.getUserData()},e.prototype.onOpen=function(){},e.prototype.isRegisteredUser=function(){return Object(u.a)(!0)},e.prototype.getWelcomeHeader=function(e){return this.translate.get("DASHBOARD_PANEL.WELCOME",{name:e})},e.prototype.getfeaturedTemplates=function(){return this.templateLoader.featuredTemplates},e.prototype.getProjectTemplates=function(){return this.templateLoader.projectTemplates},e.prototype.navigateToTemplate=function(e,t){"use"===t&&this.createDiagram(e)},e.prototype.createProjectFromTemplate=function(e,t,n){if(void 0===n&&(n=null),"use"===t){var r=g.sb.projectId();this.commandService.dispatch(i.w.duplicateProject,e,{id:r,name:n})}},e.prototype.checkUserPauseStatus=function(){var e=this;return this.userLocator.isUserPaused().pipe(Object(a.a)(1),Object(r.a)((function(t){return e.isUserPaused.next(t)})))},e.prototype.checkUserDemoStatus=function(){var e=this;return this.userLocator.getUserDataAfterUserSubscriptionStarted().pipe(Object(a.a)(1),Object(r.a)((function(t){t&&t.status===f.B.DEMO&&e.isNotDemoUser.next(!1)})))},e.prototype.showDocuments=function(e){this.state.set("SelectedLeftPanel","folders"),e?this.state.set("FolderPanelSelectedTab","recent"):this.state.set("FolderPanelSelectedTab","diagrams")},e.prototype.createDiagram=function(e,t){void 0===e&&(e=""),void 0===t&&(t=!0),!this.isFreeOrDemoUser.value||this.canCreateDiagram?this.createDiagramProcess(e,t):this.showUpgradeDialog(e,t)},e.prototype.showTemplatesPanel=function(){this.state.set("TemplateOriginLocation","dashboard"),this.state.set("ToggleTemplatesModal",!0)},e.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},e.prototype.dispatchGetRecentDiagrams=function(){return this.diagramInfoLocator.hasRecentDiagrams()?(this.commandService.dispatch(x.a.getRecentDiagrams),Object(u.a)([])):this.commandService.dispatch(x.a.getRecentDiagrams).pipe(Object(o.a)())},e.prototype.dispatchGetUserProjects=function(){var e=this;return this.commandService.dispatch(i.w.getUserProjectsInfo).pipe(Object(o.a)(),Object(r.a)((function(t){var n=t.resultData[0].projects;e.projectModels.next(n)})))},e.prototype.handlePermError=function(e){e.data&&setTimeout((function(){throw new f.j("diagram create failed",e.data)}))},e.prototype.showUpgradeDialog=function(e,t){var n=this,i={id:S.p.DIAGRAM_CREATE_PUBLIC,iframeType:f.t.CreateWorkspace,buttons:[{type:"action",clickHandler:function(){n.createDiagramProcess(e,t)},visibility:this.canCreateDiagram?"enable":"disabled"},{type:"upgrade",clickHandler:function(){}}],integrationContext:{embedded:this.state.get("ApplicationIsEmbedded"),environment:this.state.get("PluginApp")}};this.modalController.show(f.u,{inputs:{dialogData:i}})},e.prototype.createDiagramProcess=function(e,t){var n=this;if(this.canCreateDiagram){var i={};return e&&e.length>0&&(i={templateId:e}),this.state.set("TemplateOriginLocation","dashboard"),this.state.set("ShowTemplateSkip",t),this.router.navigate(["start/new/project/home"],{queryParams:i}).catch((function(e){return n.handlePermError(e)})),void this.state.set("SelectedLeftPanel","none")}},e.prototype.fetchRecentDiagram=function(){var e=this;this.diagramList=Object(p.b)(this.state.changes("LeftSidebarState").pipe(Object(s.a)((function(e){return"expanded"===e}))),this.state.changes("SelectedLeftPanel").pipe(Object(s.a)((function(e){return"dashboard"===e})))).pipe(Object(c.a)(this.diagramFetchDelay),Object(r.a)((function(){e.showLoadingIndicator.next(!0)})),Object(l.a)((function(){return e.dispatchGetRecentDiagrams().pipe(Object(l.a)((function(){return e.diagramInfoLocator.getRecentDiagrams().pipe(Object(r.a)((function(t){e.recentCount.next(t.length),e.showLoadingIndicator.next(!1),e.dispatchGetUserProjects()})),Object(l.a)((function(e){return Object(u.a)(e.slice(0,8))})))})))})))},e.prototype.fetchProjectsInfo=function(){var e=this;return Object(p.b)(this.state.changes("LeftSidebarState").pipe(Object(s.a)((function(e){return"expanded"===e}))),this.state.changes("SelectedLeftPanel").pipe(Object(s.a)((function(e){return"dashboard"===e})))).pipe(Object(l.a)((function(){return e.dispatchGetUserProjects()})))},e.prototype.listenToSidebarStateChanges=function(){var e=this;return this.state.changes("LeftSidebarState").pipe(Object(l.a)((function(t){switch(e.sidebarState=t,e.changeDetectorRef.markForCheck(),t){case P.b.Expanding:return e.fadeContent(!1).start().pipe(Object(r.a)({complete:function(){return e.columns=2}}));case P.b.Shrinking:case P.b.Collapsing:return e.fadeContent(!1).start().pipe(Object(r.a)({complete:function(){e.columns=1,e.permissionFilter.next(O.b.ANY),e.sortOrder.next(O.c.LAST_UPDATED)}}));case P.b.Expanded:case P.b.Opened:return e.fadeContent().start();default:return h.a}})))},e.prototype.fadeContent=function(e){void 0===e&&(e=!0);var t={opacity:1},n={opacity:0},i=n,r=t;e||(i=t,r=n);var a=new v.e({from:i,to:r,transitionProperty:"opacity",duration:50,easing:"linear"});return a.element=this.contentContainer.nativeElement,a},e.prototype.isFreeDemoOrLiteUser=function(){var e=this;return this.planPermManager.isFreeOrDemoUser().pipe(Object(l.a)((function(t){return t?Object(u.a)(!0):e.planPermManager.isLiteUser()})))},e.\u0275fac=function(t){return new(t||e)(k.fc(i.i),k.fc(g.B),k.fc(f.m),k.fc(g.sb),k.fc(D.d),k.fc(g.Ib),k.fc(m.d),k.fc(g.db),k.fc(C.a),k.fc(k.j),k.fc(w.e),k.fc(g.F),k.fc(f.y),k.fc(_.a),k.fc(g.gb))},e.\u0275cmp=k.Zb({type:e,selectors:[["dashboard-panel"]],viewQuery:function(e,t){var n;(1&e&&(k.jd(J,!0,b.a),k.Wc(Q,!0)),2&e)&&(k.Lc(n=k.uc())&&(t.diagramArea=n.first),k.Lc(n=k.uc())&&(t.contentContainer=n.first))},decls:37,vars:31,consts:[[1,"dashboard-panel","left-sidebar-panel",3,"ngClass"],["contentContainer",""],[1,"dashboard-panel-inner"],[4,"ngIf"],[1,"dashboard-buttons"],["data-testid","create-workspace-button",1,"template-buttom",3,"trackAction","disabled","click"],[1,"dashboard-panel-header-button"],[1,"nu-icon","nu-icon-custom"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-plus"],["translate","",1,"dashboard-panel-header-button-label"],["class","dashboard-panel-header-button",3,"name","thumbImg","isUserPaused","trackingInfo","onButtonClick",4,"ngIf"],[1,"template-buttom",3,"disabled","click"],[1,"nu-icon","nu-icon-medium"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-more-horizontal"],[1,"separator"],["class","dashboard-panel-content section",4,"ngIf"],[1,"section"],["translate","",1,"font-bold"],[1,"toolkit-tile-items-container",3,"ngClass"],["class","toolkit-tile",4,"ngFor","ngForOf"],[1,"dashboard-panel-header-button",3,"name","thumbImg","isUserPaused","trackingInfo","onButtonClick"],[1,"dashboard-panel-content","section"],["class","fx-margin-top-20","color","grey",4,"ngIf"],[1,"dashboard-recent-docs-container"],[1,"diagram-info-list-area",3,"diagramList","projectList","columnCount","isUserPaused"],["diagramArea",""],["class","dashboard-panel-content-footer fx-text-right",4,"ngIf"],["color","grey",1,"fx-margin-top-20"],[1,"dashboard-panel-content-footer","fx-text-right"],["translate","",1,"dashboard-panel-more-recent",3,"trackAction","click"],[1,"toolkit-tile"],[3,"name","description","isUserPaused","isFreeDemoOrLite","trackingInfo","onButtonClick",4,"ngIf"],[3,"name","description","isUserPaused","isFreeDemoOrLite","trackingInfo","onButtonClick"]],template:function(e,t){1&e&&(k.lc(0,"div",0,1),k.lc(2,"perfect-scrollbar"),k.lc(3,"div",2),k.cd(4,$,3,3,"h1",3),k.yc(5,"async"),k.lc(6,"div",4),k.lc(7,"button",5),k.tc("click",(function(){return t.createDiagram()})),k.yc(8,"async"),k.yc(9,"async"),k.lc(10,"div",6),k.wc(),k.lc(11,"svg",7),k.gc(12,"use",8),k.kc(),k.kc(),k.vc(),k.lc(13,"div",9),k.ed(14,"DASHBOARD_PANEL.BLANK"),k.kc(),k.kc(),k.cd(15,te,2,10,"template-thumbnail",10),k.cd(16,ne,2,10,"template-thumbnail",10),k.cd(17,ie,2,10,"template-thumbnail",10),k.cd(18,re,2,10,"template-thumbnail",10),k.lc(19,"button",11),k.tc("click",(function(){return t.showTemplatesPanel()})),k.yc(20,"async"),k.yc(21,"async"),k.lc(22,"div",6),k.wc(),k.lc(23,"svg",12),k.gc(24,"use",13),k.kc(),k.kc(),k.vc(),k.lc(25,"div",9),k.ed(26,"DASHBOARD_PANEL.MORE_TEMPLATES"),k.kc(),k.kc(),k.kc(),k.gc(27,"hr",14),k.cd(28,ce,11,12,"div",15),k.yc(29,"async"),k.yc(30,"async"),k.lc(31,"div",16),k.lc(32,"h2",17),k.ed(33,"DASHBOARD_PANEL.STARTER_TOOLKITS"),k.kc(),k.lc(34,"div",18),k.yc(35,"async"),k.cd(36,de,2,1,"div",19),k.kc(),k.kc(),k.kc(),k.kc(),k.kc()),2&e&&(k.Cc("ngClass",t.sidebarState),k.Sb(4),k.Cc("ngIf",k.zc(5,12,t.userMdl)),k.Sb(3),k.Cc("trackAction",k.Gc(28,ue))("disabled",k.zc(8,14,t.isUserPaused)||0===k.zc(9,16,t.appConnectionStatus)),k.Sb(8),k.Cc("ngIf",t.getDashboardTemplates[0]),k.Sb(1),k.Cc("ngIf",t.getDashboardTemplates[1]),k.Sb(1),k.Cc("ngIf",t.getDashboardTemplates[2]),k.Sb(1),k.Cc("ngIf",t.getDashboardTemplates[3]),k.Sb(1),k.Cc("disabled",k.zc(20,18,t.isUserPaused)||0===k.zc(21,20,t.appConnectionStatus)),k.Sb(9),k.Cc("ngIf",k.zc(29,22,t.isNotDemoUser)&&k.zc(30,24,t.recentCount)>0),k.Sb(6),k.Cc("ngClass",k.Hc(29,pe,!1===k.zc(35,26,t.isNotDemoUser))),k.Sb(2),k.Cc("ngForOf",t.getProjectTemplates()))},directives:[T.q,I.b,T.t,j.a,w.a,T.s,E.a,V,Y.a,Z],pipes:[T.b],styles:[".left-sidebar-panel[_ngcontent-%COMP%]{width:264px}.left-sidebar-panel.collapsing[_ngcontent-%COMP%], .left-sidebar-panel.expanded[_ngcontent-%COMP%], .left-sidebar-panel.shrinking[_ngcontent-%COMP%]{width:890px}.left-sidebar-panel.closed[_ngcontent-%COMP%]{transform:translateX(-215px);width:0}.left-sidebar-panel-padding[_ngcontent-%COMP%]{padding-left:10px;padding-right:10px}.left-sidebar-panel[_ngcontent-%COMP%]{width:100%;background-color:#f6f6f9;padding-left:25px}.dashboard-panel-inner[_ngcontent-%COMP%]{padding-right:25px}.dashboard-panel[_ngcontent-%COMP%]{height:100vh;border-right:1px solid #d3d3e7;background-image:url(/assets/images/dashboard/dashboard-bg.svg);background-position:100% 0;background-repeat:no-repeat}.dashboard-panel[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .dashboard-panel[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:Questrial,sans-serif}.dashboard-panel[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:25px;margin-bottom:25px;margin-top:35px}.dashboard-panel[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:18px;margin-bottom:15px;font-family:Open Sans}.dashboard-section[_ngcontent-%COMP%]{margin-bottom:70px}.dashboard-buttons[_ngcontent-%COMP%]{margin-bottom:24px;display:flex}.dashboard-buttons[_ngcontent-%COMP%]   .nu-icon[_ngcontent-%COMP%]{margin-left:-8px}.dashboard-recent-docs-container[_ngcontent-%COMP%]{display:flex}.template-thumbnail-items-container[_ngcontent-%COMP%]{margin-bottom:20px;display:inline-grid;grid-template-columns:auto auto auto;grid-row-gap:10px;grid-column-gap:10px;grid-template-columns:repeat(auto-fit,minmax(195px,195px));width:100%}.toolkit-tile-items-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between}.toolkit-tile-items-container[_ngcontent-%COMP%]   .toolkit-tile[_ngcontent-%COMP%]{margin-bottom:16px}.toolkit-tile-items-container-additional-b-padding[_ngcontent-%COMP%]{padding-bottom:30px}.dashboard-panel-more-recent[_ngcontent-%COMP%]{font-size:14px;color:#29947f}.dashboard-panel-header-button[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;position:static;width:125.5px;height:112px;left:0;top:0;background:#fff;border:1px solid rgba(202,204,206,.5);box-sizing:border-box;border-radius:4px;margin-right:12px;flex:none;order:0;flex-grow:1}.dashboard-panel-header-button[_ngcontent-%COMP%]  .template-thumbnail-container{width:125.5px;height:112px;box-shadow:none;border:none}.dashboard-panel-header-button[_ngcontent-%COMP%]:hover{border-color:#51c0aa;background:linear-gradient(0deg,rgba(81,192,170,.05),rgba(81,192,170,.05)),hsla(0,0%,100%,.65)}.dashboard-panel-header-button[_ngcontent-%COMP%]:hover   .nu-icon[_ngcontent-%COMP%]{color:#29947f}.dashboard-panel-header-button[_ngcontent-%COMP%]   .dashboard-buttons[_ngcontent-%COMP%]{margin-right:0}.dashboard-panel-header-button[_ngcontent-%COMP%]   .nu-icon[_ngcontent-%COMP%]{margin-left:0}.dashboard-panel-header-button-label[_ngcontent-%COMP%]{margin-right:12px;text-align:center;color:#14282e;font-size:12px;height:20px;padding-top:5px}.nu-icon-custom[_ngcontent-%COMP%]{width:60px;height:60px}.template-buttom[_ngcontent-%COMP%]{cursor:pointer;background:none}.template-buttom[_ngcontent-%COMP%]:hover   .dashboard-panel-header-button-label[_ngcontent-%COMP%]{color:#195249}.show-template-icon[_ngcontent-%COMP%]{margin-bottom:12px}.diagram-info-list-area[_ngcontent-%COMP%]{width:100%}.font-bold[_ngcontent-%COMP%]{font-weight:700}.section[_ngcontent-%COMP%]{padding-top:24px}.dashboard-panel-content-footer[_ngcontent-%COMP%]{padding-top:16px}.separator[_ngcontent-%COMP%]{border-top:1px solid rgba(202,204,206,.5)}"],changeDetection:0}),e}()},"wp/b":function(e,t,n){"use strict";n.d(t,"a",(function(){return P}));var i=n("D57K"),r=n("h1tj"),a=function(e){function t(){var t=e.call(this)||this;return t.onChange=function(){return null},t.shape=new r.Shape,t.addChild(t.shape),t}return Object(i.e)(t,e),t.prototype.destroy=function(){},t.prototype.initDraw=function(e){this.shape.alpha=1,this.shape.visible=!0,this.shape.graphics.clear().setStrokeStyle(t.thickness).beginStroke(t.color).drawRect(0,0,e.width,e.height).endStroke(),this.updatePosition(e),this.animate()},t.prototype.updatePosition=function(e){this.shape.x=e.x,this.shape.y=e.y},t.prototype.animate=function(){r.Tween.get(this.shape,{override:!0,onChange:this.onChange}).to({alpha:0,visible:!1},t.animationDuration)},t.animationDuration=2e3,t.color="#F6AA00",t.thickness=2,t}(r.Container),o=n("wx9+"),s=n("5xGT"),c=n("ZTXN"),l=n("8lHc"),d=n("6Oco"),u=n("Ohay"),p=n("TLy2"),h=n("xVbo"),g=n("kuMc"),f=n("jIqt"),m=n("0Woy"),b=n("8j5Y"),v=n("YtkY"),y=n("QoSw"),O=n("flPR"),_=n("nsO7"),C=n("EM62"),P=function(e){function t(t,n,i,r){var a=e.call(this,i)||this;return a.viewport=t,a.ll=n,a.state=i,a.commandService=r,a.addSource=new c.a,a.removeSource=new c.a,a.changeSource=new c.a,a}return Object(i.e)(t,e),Object.defineProperty(t.prototype,"indicators",{get:function(){return[this._indicator]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"visible",{set:function(e){this.indicators.forEach((function(t){return t.visible=e}))},enumerable:!1,configurable:!0}),t.prototype.initialize=function(){var e=this,t=this.state.changes("InterfaceControlState").pipe(Object(u.a)(_.isEqual),Object(p.a)((function(t){return e.removeIndicator(),e.init()})));this.subs.push(t.subscribe())},t.prototype.createAddSource=function(){return this.addSource},t.prototype.createRemoveSource=function(){return this.removeSource},t.prototype.createChangeSource=function(){return this.changeSource},t.prototype.init=function(){var e=this;return this.state.changes("ShapelinkTarget").pipe(Object(h.a)((function(e){return e.shapeId||e.groupId})),Object(p.a)((function(t){return e.addIndicator(),e.getBounds(t).pipe(Object(g.a)(Object(l.a)(a.animationDuration)),Object(f.a)(null),Object(m.a)(),Object(b.a)((function(n){var r=Object(i.h)(n,2),a=r[0],o=r[1];null===a?(e._indicator.initDraw(o),e.changeSource.next(e._indicator)):(e._indicator.updatePosition(o),e.changeSource.next(e._indicator)),e.selectShapeAfterLoad(t.shapeId)})))})))},t.prototype.getBounds=function(e){var t=this;return e.shapeId?this.viewport.getShapeModel(e.shapeId).pipe(Object(v.a)((function(e){return e.bounds}))):e.groupId?this.ll.forCurrentObserver(!0).pipe(Object(p.a)((function(e){return e.getDiagramOnce()})),Object(p.a)((function(n){if(n.groups[e.groupId]){var i=n.getShapesInGroup(e.groupId);return t.viewport.getShapeModels(i).pipe(Object(v.a)((function(e){var t=Object(_.values)(e),n=t[0].bounds;return t.forEach((function(e){n.absorb(e.bounds)})),n})))}return Object(d.b)()}))):void 0},t.prototype.selectShapeAfterLoad=function(e){var t=this;if(this.state.get("DiagramLoadComplete"))this.selectShape(e);else{var n=this.state.changes("DiagramLoadComplete").pipe(Object(h.a)((function(e){return!!e})),Object(b.a)((function(n){n&&t.selectShape(e)}))).subscribe();this.subs.push(n)}},t.prototype.selectShape=function(e){this.state.set("Selected",[e])},t.prototype.addIndicator=function(){var e=this;this._indicator||(this._indicator=new a,this.addSource.next(this._indicator),this._indicator.onChange=function(){return e.changeSource.next(e._indicator)})},t.prototype.removeIndicator=function(){this._indicator&&(this.removeSource.next(this._indicator),this._indicator=null)},t.\u0275fac=function(e){return new(e||t)(C.pc(o.a),C.pc(y.a),C.pc(s.Ib),C.pc(s.B))},t.\u0275prov=C.bc({token:t,factory:t.\u0275fac}),t=Object(i.d)([Object(O.a)(),Object(i.g)("design:paramtypes",[o.a,y.a,s.Ib,s.B])],t)}(O.b)}}]);
//# sourceMappingURL=1.26b7fce9117149831f16.js.map